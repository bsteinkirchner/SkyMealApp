/*! For license information please see main.js.LICENSE.txt */
!function(){var t={9669:function(t,e,n){t.exports=n(1609)},5448:function(t,e,n){"use strict";var r=n(4867),o=n(6026),i=n(4372),a=n(5327),s=n(4097),c=n(4109),l=n(7985),u=n(7874),h=n(2648),f=n(644),p=n(205);t.exports=function(t){return new Promise((function(e,n){var d,y=t.data,m=t.headers,g=t.responseType;function w(){t.cancelToken&&t.cancelToken.unsubscribe(d),t.signal&&t.signal.removeEventListener("abort",d)}r.isFormData(y)&&r.isStandardBrowserEnv()&&delete m["Content-Type"];var v=new XMLHttpRequest;if(t.auth){var b=t.auth.username||"",E=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";m.Authorization="Basic "+btoa(b+":"+E)}var x=s(t.baseURL,t.url);function k(){if(v){var r="getAllResponseHeaders"in v?c(v.getAllResponseHeaders()):null,i={data:g&&"text"!==g&&"json"!==g?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:t,request:v};o((function(t){e(t),w()}),(function(t){n(t),w()}),i),v=null}}if(v.open(t.method.toUpperCase(),a(x,t.params,t.paramsSerializer),!0),v.timeout=t.timeout,"onloadend"in v?v.onloadend=k:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(k)},v.onabort=function(){v&&(n(new h("Request aborted",h.ECONNABORTED,t,v)),v=null)},v.onerror=function(){n(new h("Network Error",h.ERR_NETWORK,t,v,v)),v=null},v.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",r=t.transitional||u;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new h(e,r.clarifyTimeoutError?h.ETIMEDOUT:h.ECONNABORTED,t,v)),v=null},r.isStandardBrowserEnv()){var _=(t.withCredentials||l(x))&&t.xsrfCookieName?i.read(t.xsrfCookieName):void 0;_&&(m[t.xsrfHeaderName]=_)}"setRequestHeader"in v&&r.forEach(m,(function(t,e){void 0===y&&"content-type"===e.toLowerCase()?delete m[e]:v.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(v.withCredentials=!!t.withCredentials),g&&"json"!==g&&(v.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&v.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(d=function(t){v&&(n(!t||t&&t.type?new f:t),v.abort(),v=null)},t.cancelToken&&t.cancelToken.subscribe(d),t.signal&&(t.signal.aborted?d():t.signal.addEventListener("abort",d))),y||(y=null);var U=p(x);U&&-1===["http","https","file"].indexOf(U)?n(new h("Unsupported protocol "+U+":",h.ERR_BAD_REQUEST,t)):v.send(y)}))}},1609:function(t,e,n){"use strict";var r=n(4867),o=n(1849),i=n(321),a=n(7185),s=function t(e){var n=new i(e),s=o(i.prototype.request,n);return r.extend(s,i.prototype,n),r.extend(s,n),s.create=function(n){return t(a(e,n))},s}(n(5546));s.Axios=i,s.CanceledError=n(644),s.CancelToken=n(4972),s.isCancel=n(6502),s.VERSION=n(7288).version,s.toFormData=n(7675),s.AxiosError=n(2648),s.Cancel=s.CanceledError,s.all=function(t){return Promise.all(t)},s.spread=n(8713),s.isAxiosError=n(6268),t.exports=s,t.exports.default=s},4972:function(t,e,n){"use strict";var r=n(644);function o(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;this.promise.then((function(t){if(n._listeners){var e,r=n._listeners.length;for(e=0;e<r;e++)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},o.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},o.source=function(){var t;return{token:new o((function(e){t=e})),cancel:t}},t.exports=o},644:function(t,e,n){"use strict";var r=n(2648);function o(t){r.call(this,null==t?"canceled":t,r.ERR_CANCELED),this.name="CanceledError"}n(4867).inherits(o,r,{__CANCEL__:!0}),t.exports=o},6502:function(t){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},321:function(t,e,n){"use strict";var r=n(4867),o=n(5327),i=n(782),a=n(3572),s=n(7185),c=n(4097),l=n(4875),u=l.validators;function h(t){this.defaults=t,this.interceptors={request:new i,response:new i}}h.prototype.request=function(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;void 0!==n&&l.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(o=o&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var i,c=[];if(this.interceptors.response.forEach((function(t){c.push(t.fulfilled,t.rejected)})),!o){var h=[a,void 0];for(Array.prototype.unshift.apply(h,r),h=h.concat(c),i=Promise.resolve(e);h.length;)i=i.then(h.shift(),h.shift());return i}for(var f=e;r.length;){var p=r.shift(),d=r.shift();try{f=p(f)}catch(t){d(t);break}}try{i=a(f)}catch(t){return Promise.reject(t)}for(;c.length;)i=i.then(c.shift(),c.shift());return i},h.prototype.getUri=function(t){t=s(this.defaults,t);var e=c(t.baseURL,t.url);return o(e,t.params,t.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(t){h.prototype[t]=function(e,n){return this.request(s(n||{},{method:t,url:e,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,o){return this.request(s(o||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}h.prototype[t]=e(),h.prototype[t+"Form"]=e(!0)})),t.exports=h},2648:function(t,e,n){"use strict";var r=n(4867);function o(t,e,n,r,o){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}r.inherits(o,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=o.prototype,a={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(t){a[t]={value:t}})),Object.defineProperties(o,a),Object.defineProperty(i,"isAxiosError",{value:!0}),o.from=function(t,e,n,a,s,c){var l=Object.create(i);return r.toFlatObject(t,l,(function(t){return t!==Error.prototype})),o.call(l,t.message,e,n,a,s),l.name=t.name,c&&Object.assign(l,c),l},t.exports=o},782:function(t,e,n){"use strict";var r=n(4867);function o(){this.handlers=[]}o.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=o},4097:function(t,e,n){"use strict";var r=n(1793),o=n(7303);t.exports=function(t,e){return t&&!r(e)?o(t,e):e}},3572:function(t,e,n){"use strict";var r=n(4867),o=n(8527),i=n(6502),a=n(5546),s=n(644);function c(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new s}t.exports=function(t){return c(t),t.headers=t.headers||{},t.data=o.call(t,t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return c(t),e.data=o.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return i(e)||(c(t),e&&e.response&&(e.response.data=o.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},7185:function(t,e,n){"use strict";var r=n(4867);t.exports=function(t,e){e=e||{};var n={};function o(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function i(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:o(void 0,t[n]):o(t[n],e[n])}function a(t){if(!r.isUndefined(e[t]))return o(void 0,e[t])}function s(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:o(void 0,t[n]):o(void 0,e[n])}function c(n){return n in e?o(t[n],e[n]):n in t?o(void 0,t[n]):void 0}var l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return r.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=l[t]||i,o=e(t);r.isUndefined(o)&&e!==c||(n[t]=o)})),n}},6026:function(t,e,n){"use strict";var r=n(2648);t.exports=function(t,e,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}},8527:function(t,e,n){"use strict";var r=n(4867),o=n(5546);t.exports=function(t,e,n){var i=this||o;return r.forEach(n,(function(n){t=n.call(i,t,e)})),t}},5546:function(t,e,n){"use strict";var r=n(4867),o=n(6016),i=n(2648),a=n(7874),s=n(7675),c={"Content-Type":"application/x-www-form-urlencoded"};function l(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var u,h={transitional:a,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(u=n(5448)),u),transformRequest:[function(t,e){if(o(e,"Accept"),o(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t))return t;if(r.isArrayBufferView(t))return t.buffer;if(r.isURLSearchParams(t))return l(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var n,i=r.isObject(t),a=e&&e["Content-Type"];if((n=r.isFileList(t))||i&&"multipart/form-data"===a){var c=this.env&&this.env.FormData;return s(n?{"files[]":t}:t,c&&new c)}return i||"application/json"===a?(l(e,"application/json"),function(t,e,n){if(r.isString(t))try{return(0,JSON.parse)(t),r.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(0,JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||h.transitional,n=e&&e.silentJSONParsing,o=e&&e.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||o&&r.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(a){if("SyntaxError"===t.name)throw i.from(t,i.ERR_BAD_RESPONSE,this,null,this.response);throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(1623)},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){h.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){h.headers[t]=r.merge(c)})),t.exports=h},7874:function(t){"use strict";t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7288:function(t){t.exports={version:"0.27.2"}},1849:function(t){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},5327:function(t,e,n){"use strict";var r=n(4867);function o(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else if(r.isURLSearchParams(e))i=e.toString();else{var a=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),a.push(o(e)+"="+o(t))})))})),i=a.join("&")}if(i){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}},7303:function(t){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},4372:function(t,e,n){"use strict";var r=n(4867);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,o,i,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:function(t){"use strict";t.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}},6268:function(t,e,n){"use strict";var r=n(4867);t.exports=function(t){return r.isObject(t)&&!0===t.isAxiosError}},7985:function(t,e,n){"use strict";var r=n(4867);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=o(window.location.href),function(e){var n=r.isString(e)?o(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},6016:function(t,e,n){"use strict";var r=n(4867);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},1623:function(t){t.exports=null},4109:function(t,e,n){"use strict";var r=n(4867),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,i,a={};return t?(r.forEach(t.split("\n"),(function(t){if(i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e){if(a[e]&&o.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}})),a):a}},205:function(t){"use strict";t.exports=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}},8713:function(t){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},7675:function(t,e,n){"use strict";var r=n(4867);t.exports=function(t,e){e=e||new FormData;var n=[];function o(t){return null===t?"":r.isDate(t)?t.toISOString():r.isArrayBuffer(t)||r.isTypedArray(t)?"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}return function t(i,a){if(r.isPlainObject(i)||r.isArray(i)){if(-1!==n.indexOf(i))throw Error("Circular reference detected in "+a);n.push(i),r.forEach(i,(function(n,i){if(!r.isUndefined(n)){var s,c=a?a+"."+i:i;if(n&&!a&&"object"==typeof n)if(r.endsWith(i,"{}"))n=JSON.stringify(n);else if(r.endsWith(i,"[]")&&(s=r.toArray(n)))return void s.forEach((function(t){!r.isUndefined(t)&&e.append(c,o(t))}));t(n,c)}})),n.pop()}else e.append(a,o(i))}(t),e}},4875:function(t,e,n){"use strict";var r=n(7288).version,o=n(2648),i={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){i[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var a={};i.transitional=function(t,e,n){function i(t,e){return"[Axios v"+r+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,r,s){if(!1===t)throw new o(i(r," has been removed"+(e?" in "+e:"")),o.ERR_DEPRECATED);return e&&!a[r]&&(a[r]=!0,console.warn(i(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,s)}},t.exports={assertOptions:function(t,e,n){if("object"!=typeof t)throw new o("options must be an object",o.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(t),i=r.length;i-- >0;){var a=r[i],s=e[a];if(s){var c=t[a],l=void 0===c||s(c,a,t);if(!0!==l)throw new o("option "+a+" must be "+l,o.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new o("Unknown option "+a,o.ERR_BAD_OPTION)}},validators:i}},4867:function(t,e,n){"use strict";var r,o=n(1849),i=Object.prototype.toString,a=(r=Object.create(null),function(t){var e=i.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())});function s(t){return t=t.toLowerCase(),function(e){return a(e)===t}}function c(t){return Array.isArray(t)}function l(t){return void 0===t}var u=s("ArrayBuffer");function h(t){return null!==t&&"object"==typeof t}function f(t){if("object"!==a(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}var p=s("Date"),d=s("File"),y=s("Blob"),m=s("FileList");function g(t){return"[object Function]"===i.call(t)}var w=s("URLSearchParams");function v(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),c(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var b,E=(b="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(t){return b&&t instanceof b});t.exports={isArray:c,isArrayBuffer:u,isBuffer:function(t){return null!==t&&!l(t)&&null!==t.constructor&&!l(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){var e="[object FormData]";return t&&("function"==typeof FormData&&t instanceof FormData||i.call(t)===e||g(t.toString)&&t.toString()===e)},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&u(t.buffer)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:h,isPlainObject:f,isUndefined:l,isDate:p,isFile:d,isBlob:y,isFunction:g,isStream:function(t){return h(t)&&g(t.pipe)},isURLSearchParams:w,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:v,merge:function t(){var e={};function n(n,r){f(e[r])&&f(n)?e[r]=t(e[r],n):f(n)?e[r]=t({},n):c(n)?e[r]=n.slice():e[r]=n}for(var r=0,o=arguments.length;r<o;r++)v(arguments[r],n);return e},extend:function(t,e,n){return v(e,(function(e,r){t[r]=n&&"function"==typeof e?o(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,n,r){t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)},toFlatObject:function(t,e,n){var r,o,i,a={};e=e||{};do{for(o=(r=Object.getOwnPropertyNames(t)).length;o-- >0;)a[i=r[o]]||(e[i]=t[i],a[i]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:a,kindOfTest:s,endsWith:function(t,e,n){t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;var r=t.indexOf(e,n);return-1!==r&&r===n},toArray:function(t){if(!t)return null;var e=t.length;if(l(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n},isTypedArray:E,isFileList:m}},4501:function(t){function e(t,e){var n=t.indexOf(e);if(-1===n)throw new Error("Invalid character found: "+e);return n}t.exports=function(t,n){var r;switch(n){case"RFC3548":case"RFC4648":r="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",t=t.replace(/=+$/,"");break;case"RFC4648-HEX":r="0123456789ABCDEFGHIJKLMNOPQRSTUV",t=t.replace(/=+$/,"");break;case"Crockford":r="0123456789ABCDEFGHJKMNPQRSTVWXYZ",t=t.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1");break;default:throw new Error("Unknown base32 variant: "+n)}for(var o=t.length,i=0,a=0,s=0,c=new Uint8Array(5*o/8|0),l=0;l<o;l++)a=a<<5|e(r,t[l]),(i+=5)>=8&&(c[s++]=a>>>i-8&255,i-=8);return c.buffer}},1227:function(t,e,n){var r=n(489);t.exports=function(t,e,n){var o,i;switch(n=n||{},e){case"RFC3548":case"RFC4648":o="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",i=!0;break;case"RFC4648-HEX":o="0123456789ABCDEFGHIJKLMNOPQRSTUV",i=!0;break;case"Crockford":o="0123456789ABCDEFGHJKMNPQRSTVWXYZ",i=!1;break;default:throw new Error("Unknown base32 variant: "+e)}for(var a=void 0!==n.padding?n.padding:i,s=r(t),c=0,l=0,u="",h=0;h<s.byteLength;h++)for(l=l<<8|s.getUint8(h),c+=8;c>=5;)u+=o[l>>>c-5&31],c-=5;if(c>0&&(u+=o[l<<5-c&31]),a)for(;u.length%8!=0;)u+="=";return u}},9742:function(t,e){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,i=c(t),a=i[0],s=i[1],l=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),u=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;return 2===s&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[u++]=255&e),1===s&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e),l},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],a=16383,s=0,c=r-o;s<c;s+=a)i.push(l(t,s,s+a>c?c:s+a));return 1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),i.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=i.length;a<s;++a)n[a]=i[a],r[i.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,r){for(var o,i,a=[],s=e;s<r;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8442:function(t,e,n){const r=n(9488);function o(t,e,n){const r=t[e]+t[n];let o=t[e+1]+t[n+1];r>=4294967296&&o++,t[e]=r,t[e+1]=o}function i(t,e,n,r){let o=t[e]+n;n<0&&(o+=4294967296);let i=t[e+1]+r;o>=4294967296&&i++,t[e]=o,t[e+1]=i}function a(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function s(t,e,n,r,a,s){const c=h[a],l=h[a+1],f=h[s],p=h[s+1];o(u,t,e),i(u,t,c,l);let d=u[r]^u[t],y=u[r+1]^u[t+1];u[r]=y,u[r+1]=d,o(u,n,r),d=u[e]^u[n],y=u[e+1]^u[n+1],u[e]=d>>>24^y<<8,u[e+1]=y>>>24^d<<8,o(u,t,e),i(u,t,f,p),d=u[r]^u[t],y=u[r+1]^u[t+1],u[r]=d>>>16^y<<16,u[r+1]=y>>>16^d<<16,o(u,n,r),d=u[e]^u[n],y=u[e+1]^u[n+1],u[e]=y>>>31^d<<1,u[e+1]=d>>>31^y<<1}const c=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),l=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(t){return 2*t}))),u=new Uint32Array(32),h=new Uint32Array(32);function f(t,e){let n=0;for(n=0;n<16;n++)u[n]=t.h[n],u[n+16]=c[n];for(u[24]=u[24]^t.t,u[25]=u[25]^t.t/4294967296,e&&(u[28]=~u[28],u[29]=~u[29]),n=0;n<32;n++)h[n]=a(t.b,4*n);for(n=0;n<12;n++)s(0,8,16,24,l[16*n+0],l[16*n+1]),s(2,10,18,26,l[16*n+2],l[16*n+3]),s(4,12,20,28,l[16*n+4],l[16*n+5]),s(6,14,22,30,l[16*n+6],l[16*n+7]),s(0,10,20,30,l[16*n+8],l[16*n+9]),s(2,12,22,24,l[16*n+10],l[16*n+11]),s(4,14,16,26,l[16*n+12],l[16*n+13]),s(6,8,18,28,l[16*n+14],l[16*n+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^u[n]^u[n+16]}const p=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function d(t,e,n,r){if(0===t||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&16!==n.length)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&16!==r.length)throw new Error("Illegal personal, expected Uint8Array with length is 16");const o={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};p.fill(0),p[0]=t,e&&(p[1]=e.length),p[2]=1,p[3]=1,n&&p.set(n,32),r&&p.set(r,48);for(let t=0;t<16;t++)o.h[t]=c[t]^a(p,4*t);return e&&(y(o,e),o.c=128),o}function y(t,e){for(let n=0;n<e.length;n++)128===t.c&&(t.t+=t.c,f(t,!1),t.c=0),t.b[t.c++]=e[n]}function m(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;f(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(3&n);return e}function g(t,e,n,o,i){n=n||64,t=r.normalizeInput(t),o&&(o=r.normalizeInput(o)),i&&(i=r.normalizeInput(i));const a=d(n,e,o,i);return y(a,t),m(a)}t.exports={blake2b:g,blake2bHex:function(t,e,n,o,i){const a=g(t,e,n,o,i);return r.toHex(a)},blake2bInit:d,blake2bUpdate:y,blake2bFinal:m}},5297:function(t,e,n){const r=n(9488);function o(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function i(t,e,n,r,o,i){l[t]=l[t]+l[e]+o,l[r]=a(l[r]^l[t],16),l[n]=l[n]+l[r],l[e]=a(l[e]^l[n],12),l[t]=l[t]+l[e]+i,l[r]=a(l[r]^l[t],8),l[n]=l[n]+l[r],l[e]=a(l[e]^l[n],7)}function a(t,e){return t>>>e^t<<32-e}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),l=new Uint32Array(16),u=new Uint32Array(16);function h(t,e){let n=0;for(n=0;n<8;n++)l[n]=t.h[n],l[n+8]=s[n];for(l[12]^=t.t,l[13]^=t.t/4294967296,e&&(l[14]=~l[14]),n=0;n<16;n++)u[n]=o(t.b,4*n);for(n=0;n<10;n++)i(0,4,8,12,u[c[16*n+0]],u[c[16*n+1]]),i(1,5,9,13,u[c[16*n+2]],u[c[16*n+3]]),i(2,6,10,14,u[c[16*n+4]],u[c[16*n+5]]),i(3,7,11,15,u[c[16*n+6]],u[c[16*n+7]]),i(0,5,10,15,u[c[16*n+8]],u[c[16*n+9]]),i(1,6,11,12,u[c[16*n+10]],u[c[16*n+11]]),i(2,7,8,13,u[c[16*n+12]],u[c[16*n+13]]),i(3,4,9,14,u[c[16*n+14]],u[c[16*n+15]]);for(n=0;n<8;n++)t.h[n]^=l[n]^l[n+8]}function f(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(p(r,e),r.c=64),r}function p(t,e){for(let n=0;n<e.length;n++)64===t.c&&(t.t+=t.c,h(t,!1),t.c=0),t.b[t.c++]=e[n]}function d(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;h(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(3&n)&255;return e}function y(t,e,n){n=n||32,t=r.normalizeInput(t);const o=f(n,e);return p(o,t),d(o)}t.exports={blake2s:y,blake2sHex:function(t,e,n){const o=y(t,e,n);return r.toHex(o)},blake2sInit:f,blake2sUpdate:p,blake2sFinal:d}},1191:function(t,e,n){const r=n(8442),o=n(5297);t.exports={blake2b:r.blake2b,blake2bHex:r.blake2bHex,blake2bInit:r.blake2bInit,blake2bUpdate:r.blake2bUpdate,blake2bFinal:r.blake2bFinal,blake2s:o.blake2s,blake2sHex:o.blake2sHex,blake2sInit:o.blake2sInit,blake2sUpdate:o.blake2sUpdate,blake2sFinal:o.blake2sFinal}},9488:function(t){function e(t){return(4294967296+t).toString(16).substring(1)}t.exports={normalizeInput:function(t){let e;if(t instanceof Uint8Array)e=t;else{if("string"!=typeof t)throw new Error("Input must be an string, Buffer or Uint8Array");e=(new TextEncoder).encode(t)}return e},toHex:function(t){return Array.prototype.map.call(t,(function(t){return(t<16?"0":"")+t.toString(16)})).join("")},debugPrint:function(t,n,r){let o="\n"+t+" = ";for(let i=0;i<n.length;i+=2){if(32===r)o+=e(n[i]).toUpperCase(),o+=" ",o+=e(n[i+1]).toUpperCase();else{if(64!==r)throw new Error("Invalid size "+r);o+=e(n[i+1]).toUpperCase(),o+=e(n[i]).toUpperCase()}i%6==4?o+="\n"+new Array(t.length+4).join(" "):i<n.length-2&&(o+=" ")}console.log(o)},testSpeed:function(t,e,n){let r=(new Date).getTime();const o=new Uint8Array(e);for(let t=0;t<e;t++)o[t]=t%256;const i=(new Date).getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let i=0;i<n;i++){const n=t(o),i=(new Date).getTime(),a=i-r;r=i,console.log("Hashed in "+a+"ms: "+n.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(a/1e3)*100)/100+" MB PER SECOND")}}}},8764:function(t,e,n){"use strict";const r=n(9742),o=n(645),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function s(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,c.prototype),e}function c(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return l(t,e,n)}function l(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|y(t,e);let r=s(n);const o=r.write(t,e);return o!==n&&(r=r.slice(0,o)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Y(t,Uint8Array)){const e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Y(t,ArrayBuffer)||t&&Y(t.buffer,ArrayBuffer))return p(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(Y(t,SharedArrayBuffer)||t&&Y(t.buffer,SharedArrayBuffer)))return p(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return c.from(r,e,n);const o=function(t){if(c.isBuffer(t)){const e=0|d(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||G(t.length)?s(0):f(t):"Buffer"===t.type&&Array.isArray(t.data)?f(t.data):void 0}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return c.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return u(t),s(t<0?0:0|d(t))}function f(t){const e=t.length<0?0:0|d(t.length),n=s(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function p(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,c.prototype),r}function d(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function y(t,e){if(c.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Y(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(o)return r?-1:J(t).length;e=(""+e).toLowerCase(),o=!0}}function m(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return U(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function w(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),G(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,o){let i,a=1,s=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){let r=-1;for(i=n;i<s;i++)if(l(t,i)===l(e,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===c)return r*a}else-1!==r&&(i-=i-r),r=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){let n=!0;for(let r=0;r<c;r++)if(l(t,i+r)!==l(e,r)){n=!1;break}if(n)return i}return-1}function b(t,e,n,r){n=Number(n)||0;const o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;const i=e.length;let a;for(r>i/2&&(r=i/2),a=0;a<r;++a){const r=parseInt(e.substr(2*a,2),16);if(G(r))return a;t[n+a]=r}return a}function E(t,e,n,r){return V(J(e,t.length-n),t,n,r)}function x(t,e,n,r){return V(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function k(t,e,n,r){return V(W(e),t,n,r)}function _(t,e,n,r){return V(function(t,e){let n,r,o;const i=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function U(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);const r=[];let o=e;for(;o<n;){const e=t[o];let i=null,a=e>239?4:e>223?3:e>191?2:1;if(o+a<=n){let n,r,s,c;switch(a){case 1:e<128&&(i=e);break;case 2:n=t[o+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(i=c));break;case 3:n=t[o+1],r=t[o+2],128==(192&n)&&128==(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:n=t[o+1],r=t[o+2],s=t[o+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&s,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=a}return function(t){const e=t.length;if(e<=S)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=S));return n}(r)}e.kMaxLength=a,c.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(t,e,n){return l(t,e,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?s(t):void 0!==e?"string"==typeof n?s(t).fill(e,n):s(t).fill(e):s(t)}(t,e,n)},c.allocUnsafe=function(t){return h(t)},c.allocUnsafeSlow=function(t){return h(t)},c.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==c.prototype},c.compare=function(t,e){if(Y(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),Y(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=c.allocUnsafe(e);let o=0;for(n=0;n<t.length;++n){let e=t[n];if(Y(e,Uint8Array))o+e.length>r.length?(c.isBuffer(e)||(e=c.from(e)),e.copy(r,o)):Uint8Array.prototype.set.call(r,e,o);else{if(!c.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,o)}o+=e.length}return r},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)g(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?A(this,0,t):m.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(t,e,n,r,o){if(Y(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;let i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0);const s=Math.min(i,a),l=this.slice(r,o),u=t.slice(e,n);for(let t=0;t<s;++t)if(l[t]!==u[t]){i=l[t],a=u[t];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":case"latin1":case"binary":return x(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const S=4096;function P(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function O(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function R(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=e;r<n;++r)o+=X[t[r]];return o}function C(t,e,n){const r=t.slice(e,n);let o="";for(let t=0;t<r.length-1;t+=2)o+=String.fromCharCode(r[t]+256*r[t+1]);return o}function B(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,n,r,o,i){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r,o){q(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,n}function I(t,e,n,r,o){q(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n+7]=i,i>>=8,t[n+6]=i,i>>=8,t[n+5]=i,i>>=8,t[n+4]=i;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=a,a>>=8,t[n+2]=a,a>>=8,t[n+1]=a,a>>=8,t[n]=a,n+8}function j(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function T(t,e,n,r,i){return e=+e,n>>>=0,i||j(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,i){return e=+e,n>>>=0,i||j(t,0,n,8),o.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||B(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||B(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=Z((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),c.prototype.readBigUInt64BE=Z((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),c.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||B(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||B(t,e,this.length);let r=e,o=1,i=this[t+--r];for(;r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},c.prototype.readInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){t>>>=0,e||B(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){t>>>=0,e||B(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=Z((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),c.prototype.readBigInt64BE=Z((function(t){z(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||K(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),c.prototype.readFloatLE=function(t,e){return t>>>=0,e||B(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t>>>=0,e||B(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t>>>=0,e||B(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t>>>=0,e||B(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||L(this,t,e,n,Math.pow(2,8*n)-1,0);let o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||L(this,t,e,n,Math.pow(2,8*n)-1,0);let o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,1,255,0),this[e]=255&t,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigUInt64LE=Z((function(t,e=0){return D(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Z((function(t,e=0){return I(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,t,e,n,r-1,-r)}let o=0,i=1,a=0;for(this[e]=255&t;++o<n&&(i*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,t,e,n,r-1,-r)}let o=n-1,i=1,a=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/i>>0)-a&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},c.prototype.writeBigInt64LE=Z((function(t,e=0){return D(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Z((function(t,e=0){return I(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(t,e,n){return T(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return T(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const o=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),o},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{const i=c.isBuffer(t)?t:c.from(t,r),a=i.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=i[o%a]}return this};const N={};function M(t,e,n){N[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function H(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function q(t,e,n,r,o,i){if(t>n||t<e){const r="bigint"==typeof e?"n":"";let o;throw o=i>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new N.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,n){z(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||K(e,t.length-(n+1))}(r,o,i)}function z(t,e){if("number"!=typeof t)throw new N.ERR_INVALID_ARG_TYPE(e,"number",t)}function K(t,e,n){if(Math.floor(t)!==t)throw z(t,n),new N.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}M("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),M("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),M("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=H(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=H(o)),o+="n"),r+=` It must be ${e}. Received ${o}`,r}),RangeError);const $=/[^+/0-9A-Za-z-_]/g;function J(t,e){let n;e=e||1/0;const r=t.length;let o=null;const i=[];for(let a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function W(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace($,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,r){let o;for(o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function Y(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function G(t){return t!=t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)e[r+o]=t[n]+t[o]}return e}();function Z(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},645:function(t,e){e.read=function(t,e,n,r,o){var i,a,s=8*o-r-1,c=(1<<s)-1,l=c>>1,u=-7,h=n?o-1:0,f=n?-1:1,p=t[e+h];for(h+=f,i=p&(1<<-u)-1,p>>=-u,u+=s;u>0;i=256*i+t[e+h],h+=f,u-=8);for(a=i&(1<<-u)-1,i>>=-u,u+=r;u>0;a=256*a+t[e+h],h+=f,u-=8);if(0===i)i=1-l;else{if(i===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=l}return(p?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,s,c,l=8*i-o-1,u=(1<<l)-1,h=u>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+h>=1?f/c:f*Math.pow(2,1-h))*c>=2&&(a++,c/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*c-1)*Math.pow(2,o),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,o),a=0));o>=8;t[n+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;t[n+p]=255&a,p+=d,a/=256,l-=8);t[n+p-d]|=128*y}},9575:function(t,e,n){var r,o;o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:this,t.exports=function(n){"use strict";var o,i=(n=n||{}).Base64,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t.charAt(n)]=n;return e}(a),c=String.fromCharCode,l=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?c(192|e>>>6)+c(128|63&e):c(224|e>>>12&15)+c(128|e>>>6&63)+c(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return c(240|e>>>18&7)+c(128|e>>>12&63)+c(128|e>>>6&63)+c(128|63&e)},u=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,h=function(t){return t.replace(u,l)},f=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[a.charAt(n>>>18),a.charAt(n>>>12&63),e>=2?"=":a.charAt(n>>>6&63),e>=1?"=":a.charAt(63&n)].join("")},p=n.btoa&&"function"==typeof n.btoa?function(t){return n.btoa(t)}:function(t){if(t.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return t.replace(/[\s\S]{1,3}/g,f)},d=function(t){return p(h(String(t)))},y=function(t){return t.replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"})).replace(/=/g,"")},m=function(t,e){return e?y(d(t)):d(t)};n.Uint8Array&&(o=function(t,e){for(var n="",r=0,o=t.length;r<o;r+=3){var i=t[r],s=t[r+1],c=t[r+2],l=i<<16|s<<8|c;n+=a.charAt(l>>>18)+a.charAt(l>>>12&63)+(void 0!==s?a.charAt(l>>>6&63):"=")+(void 0!==c?a.charAt(63&l):"=")}return e?y(n):n});var g,w=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,v=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return c(55296+(e>>>10))+c(56320+(1023&e));case 3:return c((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return c((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},b=function(t){return t.replace(w,v)},E=function(t){var e=t.length,n=e%4,r=(e>0?s[t.charAt(0)]<<18:0)|(e>1?s[t.charAt(1)]<<12:0)|(e>2?s[t.charAt(2)]<<6:0)|(e>3?s[t.charAt(3)]:0),o=[c(r>>>16),c(r>>>8&255),c(255&r)];return o.length-=[0,0,2,1][n],o.join("")},x=n.atob&&"function"==typeof n.atob?function(t){return n.atob(t)}:function(t){return t.replace(/\S{1,4}/g,E)},k=function(t){return x(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},_=function(t){return String(t).replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},U=function(t){return function(t){return b(x(t))}(_(t))};n.Uint8Array&&(g=function(t){return Uint8Array.from(k(_(t)),(function(t){return t.charCodeAt(0)}))});if(n.Base64={VERSION:"2.6.4",atob:k,btoa:p,fromBase64:U,toBase64:m,utob:h,encode:m,encodeURI:function(t){return m(t,!0)},btou:b,decode:U,noConflict:function(){var t=n.Base64;return n.Base64=i,t},fromUint8Array:o,toUint8Array:g},"function"==typeof Object.defineProperty){var A=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",A((function(){return U(this)}))),Object.defineProperty(String.prototype,"toBase64",A((function(t){return m(this,t)}))),Object.defineProperty(String.prototype,"toBase64URI",A((function(){return m(this,!0)})))}}return n.Meteor&&(Base64=n.Base64),t.exports?t.exports.Base64=n.Base64:void 0===(r=function(){return n.Base64}.apply(e,[]))||(t.exports=r),{Base64:n.Base64}}(o)},6470:function(t){"use strict";function e(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function n(t,e){for(var n,r="",o=0,i=-1,a=0,s=0;s<=t.length;++s){if(s<t.length)n=t.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(i===s-1||1===a);else if(i!==s-1&&2===a){if(r.length<2||2!==o||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",o=0):o=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),i=s,a=0;continue}}else if(2===r.length||1===r.length){r="",o=0,i=s,a=0;continue}e&&(r.length>0?r+="/..":r="..",o=2)}else r.length>0?r+="/"+t.slice(i+1,s):r=t.slice(i+1,s),o=s-i-1;i=s,a=0}else 46===n&&-1!==a?++a:a=-1}return r}var r={resolve:function(){for(var t,r="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a;i>=0?a=arguments[i]:(void 0===t&&(t=process.cwd()),a=t),e(a),0!==a.length&&(r=a+"/"+r,o=47===a.charCodeAt(0))}return r=n(r,!o),o?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(t){if(e(t),0===t.length)return".";var r=47===t.charCodeAt(0),o=47===t.charCodeAt(t.length-1);return 0!==(t=n(t,!r)).length||r||(t="."),t.length>0&&o&&(t+="/"),r?"/"+t:t},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var t,n=0;n<arguments.length;++n){var o=arguments[n];e(o),o.length>0&&(void 0===t?t=o:t+="/"+o)}return void 0===t?".":r.normalize(t)},relative:function(t,n){if(e(t),e(n),t===n)return"";if((t=r.resolve(t))===(n=r.resolve(n)))return"";for(var o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var i=t.length,a=i-o,s=1;s<n.length&&47===n.charCodeAt(s);++s);for(var c=n.length-s,l=a<c?a:c,u=-1,h=0;h<=l;++h){if(h===l){if(c>l){if(47===n.charCodeAt(s+h))return n.slice(s+h+1);if(0===h)return n.slice(s+h)}else a>l&&(47===t.charCodeAt(o+h)?u=h:0===h&&(u=0));break}var f=t.charCodeAt(o+h);if(f!==n.charCodeAt(s+h))break;47===f&&(u=h)}var p="";for(h=o+u+1;h<=i;++h)h!==i&&47!==t.charCodeAt(h)||(0===p.length?p+="..":p+="/..");return p.length>0?p+n.slice(s+u):(s+=u,47===n.charCodeAt(s)&&++s,n.slice(s))},_makeLong:function(t){return t},dirname:function(t){if(e(t),0===t.length)return".";for(var n=t.charCodeAt(0),r=47===n,o=-1,i=!0,a=t.length-1;a>=1;--a)if(47===(n=t.charCodeAt(a))){if(!i){o=a;break}}else i=!1;return-1===o?r?"/":".":r&&1===o?"//":t.slice(0,o)},basename:function(t,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');e(t);var r,o=0,i=-1,a=!0;if(void 0!==n&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var s=n.length-1,c=-1;for(r=t.length-1;r>=0;--r){var l=t.charCodeAt(r);if(47===l){if(!a){o=r+1;break}}else-1===c&&(a=!1,c=r+1),s>=0&&(l===n.charCodeAt(s)?-1==--s&&(i=r):(s=-1,i=c))}return o===i?i=c:-1===i&&(i=t.length),t.slice(o,i)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!a){o=r+1;break}}else-1===i&&(a=!1,i=r+1);return-1===i?"":t.slice(o,i)},extname:function(t){e(t);for(var n=-1,r=0,o=-1,i=!0,a=0,s=t.length-1;s>=0;--s){var c=t.charCodeAt(s);if(47!==c)-1===o&&(i=!1,o=s+1),46===c?-1===n?n=s:1!==a&&(a=1):-1!==n&&(a=-1);else if(!i){r=s+1;break}}return-1===n||-1===o||0===a||1===a&&n===o-1&&n===r+1?"":t.slice(n,o)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+"/"+r:r}(0,t)},parse:function(t){e(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return n;var r,o=t.charCodeAt(0),i=47===o;i?(n.root="/",r=1):r=0;for(var a=-1,s=0,c=-1,l=!0,u=t.length-1,h=0;u>=r;--u)if(47!==(o=t.charCodeAt(u)))-1===c&&(l=!1,c=u+1),46===o?-1===a?a=u:1!==h&&(h=1):-1!==a&&(h=-1);else if(!l){s=u+1;break}return-1===a||-1===c||0===h||1===h&&a===c-1&&a===s+1?-1!==c&&(n.base=n.name=0===s&&i?t.slice(1,c):t.slice(s,c)):(0===s&&i?(n.name=t.slice(1,a),n.base=t.slice(1,c)):(n.name=t.slice(s,a),n.base=t.slice(s,c)),n.ext=t.slice(a,c)),s>0?n.dir=t.slice(0,s-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,t.exports=r},7129:function(t,e){"use strict";var n=Object.prototype.hasOwnProperty;function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function o(t){try{return encodeURIComponent(t)}catch(t){return null}}e.stringify=function(t,e){e=e||"";var r,i,a=[];for(i in"string"!=typeof e&&(e="?"),t)if(n.call(t,i)){if((r=t[i])||null!=r&&!isNaN(r)||(r=""),i=o(i),r=o(r),null===i||null===r)continue;a.push(i+"="+r)}return a.length?e+a.join("&"):""},e.parse=function(t){for(var e,n=/([^=?#&]+)=?([^&]*)/g,o={};e=n.exec(t);){var i=r(e[1]),a=r(e[2]);null===i||null===a||i in o||(o[i]=a)}return o}},1798:function(t,e,n){"use strict";var r=65536,o=n(9509).Buffer,i=n.g.crypto||n.g.msCrypto;i&&i.getRandomValues?t.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var n=o.allocUnsafe(t);if(t>0)if(t>r)for(var a=0;a<t;a+=r)i.getRandomValues(n.slice(a,a+r));else i.getRandomValues(n);return"function"==typeof e?process.nextTick((function(){e(null,n)})):n}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},7418:function(t){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},9509:function(t,e,n){var r=n(8764),o=r.Buffer;function i(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return o(t,e,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a),i(o,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=o(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},1757:function(t,e,n){"use strict";var r,o={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(t){this.toString=function(){return"CORRUPT: "+this.message},this.message=t},invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}}};function i(t,e,n){if(4!==e.length)throw new o.exception.invalid("invalid aes block size");var r=t.b[n],i=e[0]^r[0],a=e[n?3:1]^r[1],s=e[2]^r[2];e=e[n?1:3]^r[3];var c,l,u,h,f=r.length/4-2,p=4,d=[0,0,0,0];t=(c=t.s[n])[0];var y=c[1],m=c[2],g=c[3],w=c[4];for(h=0;h<f;h++)c=t[i>>>24]^y[a>>16&255]^m[s>>8&255]^g[255&e]^r[p],l=t[a>>>24]^y[s>>16&255]^m[e>>8&255]^g[255&i]^r[p+1],u=t[s>>>24]^y[e>>16&255]^m[i>>8&255]^g[255&a]^r[p+2],e=t[e>>>24]^y[i>>16&255]^m[a>>8&255]^g[255&s]^r[p+3],p+=4,i=c,a=l,s=u;for(h=0;4>h;h++)d[n?3&-h:h]=w[i>>>24]<<24^w[a>>16&255]<<16^w[s>>8&255]<<8^w[255&e]^r[p++],c=i,i=a,a=s,s=e,e=c;return d}function a(t,e){var n,r,o,i=t.F,a=t.b,s=i[0],c=i[1],l=i[2],u=i[3],h=i[4],f=i[5],p=i[6],d=i[7];for(n=0;64>n;n++)16>n?r=e[n]:(r=e[n+1&15],o=e[n+14&15],r=e[15&n]=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(o>>>17^o>>>19^o>>>10^o<<15^o<<13)+e[15&n]+e[n+9&15]|0),r=r+d+(h>>>6^h>>>11^h>>>25^h<<26^h<<21^h<<7)+(p^h&(f^p))+a[n],d=p,p=f,f=h,h=u+r|0,u=l,l=c,s=r+((c=s)&l^u&(c^l))+(c>>>2^c>>>13^c>>>22^c<<30^c<<19^c<<10)|0;i[0]=i[0]+s|0,i[1]=i[1]+c|0,i[2]=i[2]+l|0,i[3]=i[3]+u|0,i[4]=i[4]+h|0,i[5]=i[5]+f|0,i[6]=i[6]+p|0,i[7]=i[7]+d|0}function s(t,e){var n,r=o.random.K[t],i=[];for(n in r)r.hasOwnProperty(n)&&i.push(r[n]);for(n=0;n<i.length;n++)i[n](e)}function c(t,e){"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?t.addEntropy(window.performance.now(),e,"loadtime"):t.addEntropy((new Date).valueOf(),e,"loadtime")}function l(t){t.b=u(t).concat(u(t)),t.L=new o.cipher.aes(t.b)}function u(t){for(var e=0;4>e&&(t.h[e]=t.h[e]+1|0,!t.h[e]);e++);return t.L.encrypt(t.h)}function h(t,e){return function(){e.apply(t,arguments)}}o.cipher.aes=function(t){this.s[0][0][0]||this.O();var e,n,r,i,a=this.s[0][4],s=this.s[1],c=1;if(4!==(e=t.length)&&6!==e&&8!==e)throw new o.exception.invalid("invalid aes key size");for(this.b=[r=t.slice(0),i=[]],t=e;t<4*e+28;t++)n=r[t-1],(0==t%e||8===e&&4==t%e)&&(n=a[n>>>24]<<24^a[n>>16&255]<<16^a[n>>8&255]<<8^a[255&n],0==t%e&&(n=n<<8^n>>>24^c<<24,c=c<<1^283*(c>>7))),r[t]=r[t-e]^n;for(e=0;t;e++,t--)n=r[3&e?t:t-4],i[e]=4>=t||4>e?n:s[0][a[n>>>24]]^s[1][a[n>>16&255]]^s[2][a[n>>8&255]]^s[3][a[255&n]]},o.cipher.aes.prototype={encrypt:function(t){return i(this,t,0)},decrypt:function(t){return i(this,t,1)},s:[[[],[],[],[],[]],[[],[],[],[],[]]],O:function(){var t,e,n,r,o,i,a,s=this.s[0],c=this.s[1],l=s[4],u=c[4],h=[],f=[];for(t=0;256>t;t++)f[(h[t]=t<<1^283*(t>>7))^t]=t;for(e=n=0;!l[e];e^=r||1,n=f[n]||1)for(i=(i=n^n<<1^n<<2^n<<3^n<<4)>>8^255&i^99,l[e]=i,u[i]=e,a=16843009*(o=h[t=h[r=h[e]]])^65537*t^257*r^16843008*e,o=257*h[i]^16843008*i,t=0;4>t;t++)s[t][e]=o=o<<24^o>>>8,c[t][i]=a=a<<24^a>>>8;for(t=0;5>t;t++)s[t]=s[t].slice(0),c[t]=c[t].slice(0)}},o.bitArray={bitSlice:function(t,e,n){return t=o.bitArray.$(t.slice(e/32),32-(31&e)).slice(1),void 0===n?t:o.bitArray.clamp(t,n-e)},extract:function(t,e,n){var r=Math.floor(-e-n&31);return(-32&(e+n-1^e)?t[e/32|0]<<32-r^t[e/32+1|0]>>>r:t[e/32|0]>>>r)&(1<<n)-1},concat:function(t,e){if(0===t.length||0===e.length)return t.concat(e);var n=t[t.length-1],r=o.bitArray.getPartial(n);return 32===r?t.concat(e):o.bitArray.$(e,r,0|n,t.slice(0,t.length-1))},bitLength:function(t){var e=t.length;return 0===e?0:32*(e-1)+o.bitArray.getPartial(t[e-1])},clamp:function(t,e){if(32*t.length<e)return t;var n=(t=t.slice(0,Math.ceil(e/32))).length;return e&=31,0<n&&e&&(t[n-1]=o.bitArray.partial(e,t[n-1]&2147483648>>e-1,1)),t},partial:function(t,e,n){return 32===t?e:(n?0|e:e<<32-t)+1099511627776*t},getPartial:function(t){return Math.round(t/1099511627776)||32},equal:function(t,e){if(o.bitArray.bitLength(t)!==o.bitArray.bitLength(e))return!1;var n,r=0;for(n=0;n<t.length;n++)r|=t[n]^e[n];return 0===r},$:function(t,e,n,r){var i;for(i=0,void 0===r&&(r=[]);32<=e;e-=32)r.push(n),n=0;if(0===e)return r.concat(t);for(i=0;i<t.length;i++)r.push(n|t[i]>>>e),n=t[i]<<32-e;return i=t.length?t[t.length-1]:0,t=o.bitArray.getPartial(i),r.push(o.bitArray.partial(e+t&31,32<e+t?n:r.pop(),1)),r},i:function(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]},byteswapM:function(t){var e,n;for(e=0;e<t.length;++e)n=t[e],t[e]=n>>>24|n>>>8&65280|(65280&n)<<8|n<<24;return t}},o.codec.utf8String={fromBits:function(t){var e,n,r="",i=o.bitArray.bitLength(t);for(e=0;e<i/8;e++)0==(3&e)&&(n=t[e/4]),r+=String.fromCharCode(n>>>8>>>8>>>8),n<<=8;return decodeURIComponent(escape(r))},toBits:function(t){t=unescape(encodeURIComponent(t));var e,n=[],r=0;for(e=0;e<t.length;e++)r=r<<8|t.charCodeAt(e),3==(3&e)&&(n.push(r),r=0);return 3&e&&n.push(o.bitArray.partial(8*(3&e),r)),n}},o.codec.hex={fromBits:function(t){var e,n="";for(e=0;e<t.length;e++)n+=(0xf00000000000+(0|t[e])).toString(16).substr(4);return n.substr(0,o.bitArray.bitLength(t)/4)},toBits:function(t){var e,n,r=[];for(n=(t=t.replace(/\s|0x/g,"")).length,t+="00000000",e=0;e<t.length;e+=8)r.push(0^parseInt(t.substr(e,8),16));return o.bitArray.clamp(r,4*n)}},o.codec.base32={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",X:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(t,e,n){var r=o.codec.base32.BASE,i=o.codec.base32.REMAINING,a="",s=0,c=o.codec.base32.B,l=0,u=o.bitArray.bitLength(t);for(n&&(c=o.codec.base32.X),n=0;a.length*r<u;)a+=c.charAt((l^t[n]>>>s)>>>i),s<r?(l=t[n]<<r-s,s+=i,n++):(l<<=r,s-=r);for(;7&a.length&&!e;)a+="=";return a},toBits:function(t,e){t=t.replace(/\s|=/g,"").toUpperCase();var n,r,i=o.codec.base32.BITS,a=o.codec.base32.BASE,s=o.codec.base32.REMAINING,c=[],l=0,u=o.codec.base32.B,h=0,f="base32";for(e&&(u=o.codec.base32.X,f="base32hex"),n=0;n<t.length;n++){if(0>(r=u.indexOf(t.charAt(n)))){if(!e)try{return o.codec.base32hex.toBits(t)}catch(t){}throw new o.exception.invalid("this isn't "+f+"!")}l>s?(l-=s,c.push(h^r>>>l),h=r<<i-l):h^=r<<i-(l+=a)}return 56&l&&c.push(o.bitArray.partial(56&l,h,1)),c}},o.codec.base32hex={fromBits:function(t,e){return o.codec.base32.fromBits(t,e,1)},toBits:function(t){return o.codec.base32.toBits(t,1)}},o.codec.base64={B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(t,e,n){var r="",i=0,a=o.codec.base64.B,s=0,c=o.bitArray.bitLength(t);for(n&&(a=a.substr(0,62)+"-_"),n=0;6*r.length<c;)r+=a.charAt((s^t[n]>>>i)>>>26),6>i?(s=t[n]<<6-i,i+=26,n++):(s<<=6,i-=6);for(;3&r.length&&!e;)r+="=";return r},toBits:function(t,e){t=t.replace(/\s|=/g,"");var n,r,i=[],a=0,s=o.codec.base64.B,c=0;for(e&&(s=s.substr(0,62)+"-_"),n=0;n<t.length;n++){if(0>(r=s.indexOf(t.charAt(n))))throw new o.exception.invalid("this isn't base64!");26<a?(a-=26,i.push(c^r>>>a),c=r<<32-a):c^=r<<32-(a+=6)}return 56&a&&i.push(o.bitArray.partial(56&a,c,1)),i}},o.codec.base64url={fromBits:function(t){return o.codec.base64.fromBits(t,1,1)},toBits:function(t){return o.codec.base64.toBits(t,1)}},o.hash.sha256=function(t){this.b[0]||this.O(),t?(this.F=t.F.slice(0),this.A=t.A.slice(0),this.l=t.l):this.reset()},o.hash.sha256.hash=function(t){return(new o.hash.sha256).update(t).finalize()},o.hash.sha256.prototype={blockSize:512,reset:function(){return this.F=this.Y.slice(0),this.A=[],this.l=0,this},update:function(t){"string"==typeof t&&(t=o.codec.utf8String.toBits(t));var e,n=this.A=o.bitArray.concat(this.A,t);if(e=this.l,9007199254740991<(t=this.l=e+o.bitArray.bitLength(t)))throw new o.exception.invalid("Cannot hash more than 2^53 - 1 bits");if("undefined"!=typeof Uint32Array){var r=new Uint32Array(n),i=0;for(e=512+e-(512+e&511);e<=t;e+=512)a(this,r.subarray(16*i,16*(i+1))),i+=1;n.splice(0,16*i)}else for(e=512+e-(512+e&511);e<=t;e+=512)a(this,n.splice(0,16));return this},finalize:function(){var t,e=this.A,n=this.F;for(t=(e=o.bitArray.concat(e,[o.bitArray.partial(1,1)])).length+2;15&t;t++)e.push(0);for(e.push(Math.floor(this.l/4294967296)),e.push(0|this.l);e.length;)a(this,e.splice(0,16));return this.reset(),n},Y:[],b:[],O:function(){function t(t){return 4294967296*(t-Math.floor(t))|0}for(var e,n,r=0,o=2;64>r;o++){for(n=!0,e=2;e*e<=o;e++)if(0==o%e){n=!1;break}n&&(8>r&&(this.Y[r]=t(Math.pow(o,.5))),this.b[r]=t(Math.pow(o,1/3)),r++)}}},o.mode.ccm={name:"ccm",G:[],listenProgress:function(t){o.mode.ccm.G.push(t)},unListenProgress:function(t){-1<(t=o.mode.ccm.G.indexOf(t))&&o.mode.ccm.G.splice(t,1)},fa:function(t){var e,n=o.mode.ccm.G.slice();for(e=0;e<n.length;e+=1)n[e](t)},encrypt:function(t,e,n,r,i){var a,s=e.slice(0),c=o.bitArray,l=c.bitLength(n)/8,u=c.bitLength(s)/8;if(i=i||64,r=r||[],7>l)throw new o.exception.invalid("ccm: iv must be at least 7 bytes");for(a=2;4>a&&u>>>8*a;a++);return a<15-l&&(a=15-l),n=c.clamp(n,8*(15-a)),e=o.mode.ccm.V(t,e,n,r,i,a),s=o.mode.ccm.C(t,s,n,e,i,a),c.concat(s.data,s.tag)},decrypt:function(t,e,n,r,i){i=i||64,r=r||[];var a=o.bitArray,s=a.bitLength(n)/8,c=a.bitLength(e),l=a.clamp(e,c-i),u=a.bitSlice(e,c-i);if(c=(c-i)/8,7>s)throw new o.exception.invalid("ccm: iv must be at least 7 bytes");for(e=2;4>e&&c>>>8*e;e++);if(e<15-s&&(e=15-s),n=a.clamp(n,8*(15-e)),l=o.mode.ccm.C(t,l,n,u,i,e),t=o.mode.ccm.V(t,l.data,n,r,i,e),!a.equal(l.tag,t))throw new o.exception.corrupt("ccm: tag doesn't match");return l.data},na:function(t,e,n,r,i,a){var s=[],c=o.bitArray,l=c.i;if(r=[c.partial(8,(e.length?64:0)|r-2<<2|a-1)],(r=c.concat(r,n))[3]|=i,r=t.encrypt(r),e.length)for(65279>=(n=c.bitLength(e)/8)?s=[c.partial(16,n)]:4294967295>=n&&(s=c.concat([c.partial(16,65534)],[n])),s=c.concat(s,e),e=0;e<s.length;e+=4)r=t.encrypt(l(r,s.slice(e,e+4).concat([0,0,0])));return r},V:function(t,e,n,r,i,a){var s=o.bitArray,c=s.i;if((i/=8)%2||4>i||16<i)throw new o.exception.invalid("ccm: invalid tag length");if(4294967295<r.length||4294967295<e.length)throw new o.exception.bug("ccm: can't deal with 4GiB or more data");for(n=o.mode.ccm.na(t,r,n,i,s.bitLength(e)/8,a),r=0;r<e.length;r+=4)n=t.encrypt(c(n,e.slice(r,r+4).concat([0,0,0])));return s.clamp(n,8*i)},C:function(t,e,n,r,i,a){var s,c=o.bitArray;s=c.i;var l=e.length,u=c.bitLength(e),h=l/50,f=h;if(n=c.concat([c.partial(8,a-1)],n).concat([0,0,0]).slice(0,4),r=c.bitSlice(s(r,t.encrypt(n)),0,i),!l)return{tag:r,data:[]};for(s=0;s<l;s+=4)s>h&&(o.mode.ccm.fa(s/l),h+=f),n[3]++,i=t.encrypt(n),e[s]^=i[0],e[s+1]^=i[1],e[s+2]^=i[2],e[s+3]^=i[3];return{tag:r,data:c.clamp(e,u)}}},o.mode.ocb2={name:"ocb2",encrypt:function(t,e,n,r,i,a){if(128!==o.bitArray.bitLength(n))throw new o.exception.invalid("ocb iv must be 128 bits");var s,c=o.mode.ocb2.S,l=o.bitArray,u=l.i,h=[0,0,0,0];n=c(t.encrypt(n));var f,p=[];for(r=r||[],i=i||64,s=0;s+4<e.length;s+=4)h=u(h,f=e.slice(s,s+4)),p=p.concat(u(n,t.encrypt(u(n,f)))),n=c(n);return f=e.slice(s),e=l.bitLength(f),s=t.encrypt(u(n,[0,0,0,e])),f=l.clamp(u(f.concat([0,0,0]),s),e),h=u(h,u(f.concat([0,0,0]),s)),h=t.encrypt(u(h,u(n,c(n)))),r.length&&(h=u(h,a?r:o.mode.ocb2.pmac(t,r))),p.concat(l.concat(f,l.clamp(h,i)))},decrypt:function(t,e,n,r,i,a){if(128!==o.bitArray.bitLength(n))throw new o.exception.invalid("ocb iv must be 128 bits");i=i||64;var s,c,l=o.mode.ocb2.S,u=o.bitArray,h=u.i,f=[0,0,0,0],p=l(t.encrypt(n)),d=o.bitArray.bitLength(e)-i,y=[];for(r=r||[],n=0;n+4<d/32;n+=4)s=h(p,t.decrypt(h(p,e.slice(n,n+4)))),f=h(f,s),y=y.concat(s),p=l(p);if(c=d-32*n,s=t.encrypt(h(p,[0,0,0,c])),s=h(s,u.clamp(e.slice(n),c).concat([0,0,0])),f=h(f,s),f=t.encrypt(h(f,h(p,l(p)))),r.length&&(f=h(f,a?r:o.mode.ocb2.pmac(t,r))),!u.equal(u.clamp(f,i),u.bitSlice(e,d)))throw new o.exception.corrupt("ocb: tag doesn't match");return y.concat(u.clamp(s,c))},pmac:function(t,e){var n,r=o.mode.ocb2.S,i=o.bitArray,a=i.i,s=[0,0,0,0],c=a(c=t.encrypt([0,0,0,0]),r(r(c)));for(n=0;n+4<e.length;n+=4)c=r(c),s=a(s,t.encrypt(a(c,e.slice(n,n+4))));return n=e.slice(n),128>i.bitLength(n)&&(c=a(c,r(c)),n=i.concat(n,[-2147483648,0,0,0])),s=a(s,n),t.encrypt(a(r(a(c,r(c))),s))},S:function(t){return[t[0]<<1^t[1]>>>31,t[1]<<1^t[2]>>>31,t[2]<<1^t[3]>>>31,t[3]<<1^135*(t[0]>>>31)]}},o.mode.gcm={name:"gcm",encrypt:function(t,e,n,r,i){var a=e.slice(0);return e=o.bitArray,r=r||[],t=o.mode.gcm.C(!0,t,a,r,n,i||128),e.concat(t.data,t.tag)},decrypt:function(t,e,n,r,i){var a=e.slice(0),s=o.bitArray,c=s.bitLength(a);if(r=r||[],(i=i||128)<=c?(e=s.bitSlice(a,c-i),a=s.bitSlice(a,0,c-i)):(e=a,a=[]),t=o.mode.gcm.C(!1,t,a,r,n,i),!s.equal(t.tag,e))throw new o.exception.corrupt("gcm: tag doesn't match");return t.data},ka:function(t,e){var n,r,i,a,s,c=o.bitArray.i;for(i=[0,0,0,0],a=e.slice(0),n=0;128>n;n++){for((r=0!=(t[Math.floor(n/32)]&1<<31-n%32))&&(i=c(i,a)),s=0!=(1&a[3]),r=3;0<r;r--)a[r]=a[r]>>>1|(1&a[r-1])<<31;a[0]>>>=1,s&&(a[0]^=-520093696)}return i},j:function(t,e,n){var r,i=n.length;for(e=e.slice(0),r=0;r<i;r+=4)e[0]^=4294967295&n[r],e[1]^=4294967295&n[r+1],e[2]^=4294967295&n[r+2],e[3]^=4294967295&n[r+3],e=o.mode.gcm.ka(e,t);return e},C:function(t,e,n,r,i,a){var s,c,l,u,h,f,p,d,y=o.bitArray;for(f=n.length,p=y.bitLength(n),d=y.bitLength(r),c=y.bitLength(i),s=e.encrypt([0,0,0,0]),96===c?(i=i.slice(0),i=y.concat(i,[1])):(i=o.mode.gcm.j(s,[0,0,0,0],i),i=o.mode.gcm.j(s,i,[0,0,Math.floor(c/4294967296),4294967295&c])),c=o.mode.gcm.j(s,[0,0,0,0],r),h=i.slice(0),r=c.slice(0),t||(r=o.mode.gcm.j(s,c,n)),u=0;u<f;u+=4)h[3]++,l=e.encrypt(h),n[u]^=l[0],n[u+1]^=l[1],n[u+2]^=l[2],n[u+3]^=l[3];return n=y.clamp(n,p),t&&(r=o.mode.gcm.j(s,c,n)),t=[Math.floor(d/4294967296),4294967295&d,Math.floor(p/4294967296),4294967295&p],r=o.mode.gcm.j(s,r,t),l=e.encrypt(i),r[0]^=l[0],r[1]^=l[1],r[2]^=l[2],r[3]^=l[3],{tag:y.bitSlice(r,0,a),data:n}}},o.misc.hmac=function(t,e){this.W=e=e||o.hash.sha256;var n,r=[[],[]],i=e.prototype.blockSize/32;for(this.w=[new e,new e],t.length>i&&(t=e.hash(t)),n=0;n<i;n++)r[0][n]=909522486^t[n],r[1][n]=1549556828^t[n];this.w[0].update(r[0]),this.w[1].update(r[1]),this.R=new e(this.w[0])},o.misc.hmac.prototype.encrypt=o.misc.hmac.prototype.mac=function(t){if(this.aa)throw new o.exception.invalid("encrypt on already updated hmac called!");return this.update(t),this.digest(t)},o.misc.hmac.prototype.reset=function(){this.R=new this.W(this.w[0]),this.aa=!1},o.misc.hmac.prototype.update=function(t){this.aa=!0,this.R.update(t)},o.misc.hmac.prototype.digest=function(){var t=this.R.finalize();return t=new this.W(this.w[1]).update(t).finalize(),this.reset(),t},o.misc.pbkdf2=function(t,e,n,r,i){if(n=n||1e4,0>r||0>n)throw new o.exception.invalid("invalid params to pbkdf2");"string"==typeof t&&(t=o.codec.utf8String.toBits(t)),"string"==typeof e&&(e=o.codec.utf8String.toBits(e)),t=new(i=i||o.misc.hmac)(t);var a,s,c,l,u=[],h=o.bitArray;for(l=1;32*u.length<(r||1);l++){for(i=a=t.encrypt(h.concat(e,[l])),s=1;s<n;s++)for(a=t.encrypt(a),c=0;c<a.length;c++)i[c]^=a[c];u=u.concat(i)}return r&&(u=h.clamp(u,r)),u},o.prng=function(t){this.c=[new o.hash.sha256],this.m=[0],this.P=0,this.H={},this.N=0,this.U={},this.Z=this.f=this.o=this.ha=0,this.b=[0,0,0,0,0,0,0,0],this.h=[0,0,0,0],this.L=void 0,this.M=t,this.D=!1,this.K={progress:{},seeded:{}},this.u=this.ga=0,this.I=1,this.J=2,this.ca=65536,this.T=[0,48,64,96,128,192,256,384,512,768,1024],this.da=3e4,this.ba=80},o.prng.prototype={randomWords:function(t,e){var n,r,i=[];if((n=this.isReady(e))===this.u)throw new o.exception.notReady("generator isn't seeded");if(n&this.J){n=!(n&this.I),r=[];var a,s=0;for(this.Z=r[0]=(new Date).valueOf()+this.da,a=0;16>a;a++)r.push(4294967296*Math.random()|0);for(a=0;a<this.c.length&&(r=r.concat(this.c[a].finalize()),s+=this.m[a],this.m[a]=0,n||!(this.P&1<<a));a++);for(this.P>=1<<this.c.length&&(this.c.push(new o.hash.sha256),this.m.push(0)),this.f-=s,s>this.o&&(this.o=s),this.P++,this.b=o.hash.sha256.hash(this.b.concat(r)),this.L=new o.cipher.aes(this.b),n=0;4>n&&(this.h[n]=this.h[n]+1|0,!this.h[n]);n++);}for(n=0;n<t;n+=4)0==(n+1)%this.ca&&l(this),r=u(this),i.push(r[0],r[1],r[2],r[3]);return l(this),i.slice(0,t)},setDefaultParanoia:function(t,e){if(0===t&&"Setting paranoia=0 will ruin your security; use it only for testing"!==e)throw new o.exception.invalid("Setting paranoia=0 will ruin your security; use it only for testing");this.M=t},addEntropy:function(t,e,n){n=n||"user";var r,i,a=(new Date).valueOf(),c=this.H[n],l=this.isReady(),u=0;switch(void 0===(r=this.U[n])&&(r=this.U[n]=this.ha++),void 0===c&&(c=this.H[n]=0),this.H[n]=(this.H[n]+1)%this.c.length,typeof t){case"number":void 0===e&&(e=1),this.c[c].update([r,this.N++,1,e,a,1,0|t]);break;case"object":if("[object Uint32Array]"===(n=Object.prototype.toString.call(t))){for(i=[],n=0;n<t.length;n++)i.push(t[n]);t=i}else for("[object Array]"!==n&&(u=1),n=0;n<t.length&&!u;n++)"number"!=typeof t[n]&&(u=1);if(!u){if(void 0===e)for(n=e=0;n<t.length;n++)for(i=t[n];0<i;)e++,i>>>=1;this.c[c].update([r,this.N++,2,e,a,t.length].concat(t))}break;case"string":void 0===e&&(e=t.length),this.c[c].update([r,this.N++,3,e,a,t.length]),this.c[c].update(t);break;default:u=1}if(u)throw new o.exception.bug("random: addEntropy only supports number, array of numbers or string");this.m[c]+=e,this.f+=e,l===this.u&&(this.isReady()!==this.u&&s("seeded",Math.max(this.o,this.f)),s("progress",this.getProgress()))},isReady:function(t){return t=this.T[void 0!==t?t:this.M],this.o&&this.o>=t?this.m[0]>this.ba&&(new Date).valueOf()>this.Z?this.J|this.I:this.I:this.f>=t?this.J|this.u:this.u},getProgress:function(t){return t=this.T[t||this.M],this.o>=t||this.f>t?1:this.f/t},startCollectors:function(){if(!this.D){if(this.a={loadTimeCollector:h(this,this.ma),mouseCollector:h(this,this.oa),keyboardCollector:h(this,this.la),accelerometerCollector:h(this,this.ea),touchCollector:h(this,this.qa)},window.addEventListener)window.addEventListener("load",this.a.loadTimeCollector,!1),window.addEventListener("mousemove",this.a.mouseCollector,!1),window.addEventListener("keypress",this.a.keyboardCollector,!1),window.addEventListener("devicemotion",this.a.accelerometerCollector,!1),window.addEventListener("touchmove",this.a.touchCollector,!1);else{if(!document.attachEvent)throw new o.exception.bug("can't attach event");document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector)}this.D=!0}},stopCollectors:function(){this.D&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,!1),window.removeEventListener("mousemove",this.a.mouseCollector,!1),window.removeEventListener("keypress",this.a.keyboardCollector,!1),window.removeEventListener("devicemotion",this.a.accelerometerCollector,!1),window.removeEventListener("touchmove",this.a.touchCollector,!1)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.D=!1)},addEventListener:function(t,e){this.K[t][this.ga++]=e},removeEventListener:function(t,e){var n,r,o=this.K[t],i=[];for(r in o)o.hasOwnProperty(r)&&o[r]===e&&i.push(r);for(n=0;n<i.length;n++)delete o[r=i[n]]},la:function(){c(this,1)},oa:function(t){var e,n;try{e=t.x||t.clientX||t.offsetX||0,n=t.y||t.clientY||t.offsetY||0}catch(t){n=e=0}0!=e&&0!=n&&this.addEntropy([e,n],2,"mouse"),c(this,0)},qa:function(t){t=t.touches[0]||t.changedTouches[0],this.addEntropy([t.pageX||t.clientX,t.pageY||t.clientY],1,"touch"),c(this,0)},ma:function(){c(this,2)},ea:function(t){if(t=t.accelerationIncludingGravity.x||t.accelerationIncludingGravity.y||t.accelerationIncludingGravity.z,window.orientation){var e=window.orientation;"number"==typeof e&&this.addEntropy(e,1,"accelerometer")}t&&this.addEntropy(t,2,"accelerometer"),c(this,0)}},o.random=new o.prng(6);t:try{var f,p,d,y;if(y=t.exports){var m;try{m=n(Object(function(){var t=new Error("Cannot find module 'crypto'");throw t.code="MODULE_NOT_FOUND",t}()))}catch(t){m=null}y=p=m}if(y&&p.randomBytes)f=p.randomBytes(128),f=new Uint32Array(new Uint8Array(f).buffer),o.random.addEntropy(f,1024,"crypto['randomBytes']");else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){if(d=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(d);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break t;window.msCrypto.getRandomValues(d)}o.random.addEntropy(d,1024,"crypto['getRandomValues']")}}catch(t){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(t))}o.json={defaults:{v:1,iter:1e4,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},ja:function(t,e,n,r){n=n||{},r=r||{};var i,a=o.json,s=a.g({iv:o.random.randomWords(4,0)},a.defaults);if(a.g(s,n),n=s.adata,"string"==typeof s.salt&&(s.salt=o.codec.base64.toBits(s.salt)),"string"==typeof s.iv&&(s.iv=o.codec.base64.toBits(s.iv)),!o.mode[s.mode]||!o.cipher[s.cipher]||"string"==typeof t&&100>=s.iter||64!==s.ts&&96!==s.ts&&128!==s.ts||128!==s.ks&&192!==s.ks&&256!==s.ks||2>s.iv.length||4<s.iv.length)throw new o.exception.invalid("json encrypt: invalid parameters");return"string"==typeof t?(t=(i=o.misc.cachedPbkdf2(t,s)).key.slice(0,s.ks/32),s.salt=i.salt):o.ecc&&t instanceof o.ecc.elGamal.publicKey&&(i=t.kem(),s.kemtag=i.tag,t=i.key.slice(0,s.ks/32)),"string"==typeof e&&(e=o.codec.utf8String.toBits(e)),"string"==typeof n&&(s.adata=n=o.codec.utf8String.toBits(n)),i=new o.cipher[s.cipher](t),a.g(r,s),r.key=t,s.ct="ccm"===s.mode&&o.arrayBuffer&&o.arrayBuffer.ccm&&e instanceof ArrayBuffer?o.arrayBuffer.ccm.encrypt(i,e,s.iv,n,s.ts):o.mode[s.mode].encrypt(i,e,s.iv,n,s.ts),s},encrypt:function(t,e,n,r){var i=o.json,a=i.ja.apply(i,arguments);return i.encode(a)},ia:function(t,e,n,r){n=n||{},r=r||{};var i,a,s=o.json;if(i=(e=s.g(s.g(s.g({},s.defaults),e),n,!0)).adata,"string"==typeof e.salt&&(e.salt=o.codec.base64.toBits(e.salt)),"string"==typeof e.iv&&(e.iv=o.codec.base64.toBits(e.iv)),!o.mode[e.mode]||!o.cipher[e.cipher]||"string"==typeof t&&100>=e.iter||64!==e.ts&&96!==e.ts&&128!==e.ts||128!==e.ks&&192!==e.ks&&256!==e.ks||!e.iv||2>e.iv.length||4<e.iv.length)throw new o.exception.invalid("json decrypt: invalid parameters");return"string"==typeof t?(t=(a=o.misc.cachedPbkdf2(t,e)).key.slice(0,e.ks/32),e.salt=a.salt):o.ecc&&t instanceof o.ecc.elGamal.secretKey&&(t=t.unkem(o.codec.base64.toBits(e.kemtag)).slice(0,e.ks/32)),"string"==typeof i&&(i=o.codec.utf8String.toBits(i)),a=new o.cipher[e.cipher](t),i="ccm"===e.mode&&o.arrayBuffer&&o.arrayBuffer.ccm&&e.ct instanceof ArrayBuffer?o.arrayBuffer.ccm.decrypt(a,e.ct,e.iv,e.tag,i,e.ts):o.mode[e.mode].decrypt(a,e.ct,e.iv,i,e.ts),s.g(r,e),r.key=t,1===n.raw?i:o.codec.utf8String.fromBits(i)},decrypt:function(t,e,n,r){var i=o.json;return i.ia(t,i.decode(e),n,r)},encode:function(t){var e,n="{",r="";for(e in t)if(t.hasOwnProperty(e)){if(!e.match(/^[a-z0-9]+$/i))throw new o.exception.invalid("json encode: invalid property name");switch(n+=r+'"'+e+'":',r=",",typeof t[e]){case"number":case"boolean":n+=t[e];break;case"string":n+='"'+escape(t[e])+'"';break;case"object":n+='"'+o.codec.base64.fromBits(t[e],0)+'"';break;default:throw new o.exception.bug("json encode: unsupported type")}}return n+"}"},decode:function(t){if(!(t=t.replace(/\s/g,"")).match(/^\{.*\}$/))throw new o.exception.invalid("json decode: this isn't json!");t=t.replace(/^\{|\}$/g,"").split(/,/);var e,n,r={};for(e=0;e<t.length;e++){if(!(n=t[e].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i)))throw new o.exception.invalid("json decode: this isn't json!");null!=n[3]?r[n[2]]=parseInt(n[3],10):null!=n[4]?r[n[2]]=n[2].match(/^(ct|adata|salt|iv)$/)?o.codec.base64.toBits(n[4]):unescape(n[4]):null!=n[5]&&(r[n[2]]="true"===n[5])}return r},g:function(t,e,n){if(void 0===t&&(t={}),void 0===e)return t;for(var r in e)if(e.hasOwnProperty(r)){if(n&&void 0!==t[r]&&t[r]!==e[r])throw new o.exception.invalid("required parameter overridden");t[r]=e[r]}return t},sa:function(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&t[n]!==e[n]&&(r[n]=t[n]);return r},ra:function(t,e){var n,r={};for(n=0;n<e.length;n++)void 0!==t[e[n]]&&(r[e[n]]=t[e[n]]);return r}},o.encrypt=o.json.encrypt,o.decrypt=o.json.decrypt,o.misc.pa={},o.misc.cachedPbkdf2=function(t,e){var n,r=o.misc.pa;return n=(e=e||{}).iter||1e3,(n=(r=r[t]=r[t]||{})[n]=r[n]||{firstSalt:e.salt&&e.salt.length?e.salt.slice(0):o.random.randomWords(2,0)})[r=void 0===e.salt?n.firstSalt:e.salt]=n[r]||o.misc.pbkdf2(t,r,e.iter),{key:n[r].slice(0),salt:r.slice(0)}},t.exports&&(t.exports=o),void 0===(r=function(){return o}.apply(e,[]))||(t.exports=r)},2893:function(t){"use strict";function e(){this._types=Object.create(null),this._extensions=Object.create(null);for(let t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}e.prototype.define=function(t,e){for(let n in t){let r=t[n].map((function(t){return t.toLowerCase()}));n=n.toLowerCase();for(let t=0;t<r.length;t++){const o=r[t];if("*"!==o[0]){if(!e&&o in this._types)throw new Error('Attempt to change mapping for "'+o+'" extension from "'+this._types[o]+'" to "'+n+'". Pass `force=true` to allow this, otherwise remove "'+o+'" from the list of extensions for "'+n+'".');this._types[o]=n}}if(e||!this._extensions[n]){const t=r[0];this._extensions[n]="*"!==t[0]?t:t.substr(1)}}},e.prototype.getType=function(t){let e=(t=String(t)).replace(/^.*[/\\]/,"").toLowerCase(),n=e.replace(/^.*\./,"").toLowerCase(),r=e.length<t.length;return(n.length<e.length-1||!r)&&this._types[n]||null},e.prototype.getExtension=function(t){return(t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1)&&this._extensions[t.toLowerCase()]||null},t.exports=e},8102:function(t,e,n){"use strict";let r=n(2893);t.exports=new r(n(8281))},8281:function(t){t.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},1433:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]});e.__esModule=!0,e.defaultHandshakeAttemptsInterval=e.defaultHandshakeMaxAttempts=e.monitorWindowError=e.errorWindowClosed=e.dispatchedErrorEvent=e.trimSuffix=e.removeAdjacentChars=e.ensureUrl=e.createIframe=e.createFullScreenIframe=e.PermWrite=e.PermRead=e.PermLegacySkyID=e.PermHidden=e.PermDiscoverable=e.permTypeToString=e.permCategoryToString=e.PermType=e.PermCategory=e.Permission=e.sanitizePath=e.getParentPath=e.getPathDomain=void 0;var o=n(1853);r(e,o,"getPathDomain"),r(e,o,"getParentPath"),r(e,o,"sanitizePath");var i=n(7178);r(e,i,"Permission"),r(e,i,"PermCategory"),r(e,i,"PermType"),r(e,i,"permCategoryToString"),r(e,i,"permTypeToString"),r(e,i,"PermDiscoverable"),r(e,i,"PermHidden"),r(e,i,"PermLegacySkyID"),r(e,i,"PermRead"),r(e,i,"PermWrite");var a=n(7144);r(e,a,"createFullScreenIframe"),r(e,a,"createIframe"),r(e,a,"ensureUrl"),r(e,a,"removeAdjacentChars"),r(e,a,"trimSuffix");var s=n(9616);r(e,s,"dispatchedErrorEvent"),r(e,s,"errorWindowClosed"),r(e,s,"monitorWindowError"),e.defaultHandshakeMaxAttempts=150,e.defaultHandshakeAttemptsInterval=100},1853:function(t,e,n){"use strict";e.__esModule=!0,e.sanitizePath=e.getParentPath=e.getPathDomain=void 0;var r=n(7144);function o(t){if((t=t.trim()).startsWith("/"))return null;t=(0,r.trimSuffix)(t,"/");var e=(t=(0,r.removeAdjacentChars)(t,"/")).split("/");e[0]=e[0].toLowerCase();var n=e.join("/");return""===n?null:n}e.getPathDomain=function(t){var e=o(t);if(null===e)return null;var n=e.split("/")[0];return""===n?null:n},e.getParentPath=function(t){var e=o(t);if(null===e)return null;var n=e.split("/");if(n.length<=1)return null;n.pop();var r=n.join("/");return""===r?null:r},e.sanitizePath=o},7178:function(t,e){"use strict";e.__esModule=!0,e.permTypeToString=e.permCategoryToString=e.PermType=e.PermWrite=e.PermRead=e.PermCategory=e.PermLegacySkyID=e.PermHidden=e.PermDiscoverable=e.Permission=void 0;var n,r;e.Permission=function(t,e,o,i){if(this.requestor=t,this.path=e,this.category=o,this.permType=i,"number"!=typeof o||!(o in n))throw new Error("Invalid 'category' enum value ".concat(o));if("number"!=typeof i||!(i in r))throw new Error("Invalid 'permType' enum value ".concat(i))},e.PermDiscoverable=1,e.PermHidden=2,e.PermLegacySkyID=3,function(t){t[t.Discoverable=e.PermDiscoverable]="Discoverable",t[t.Hidden=e.PermHidden]="Hidden",t[t.LegacySkyID=e.PermLegacySkyID]="LegacySkyID"}(n=e.PermCategory||(e.PermCategory={})),e.PermRead=4,e.PermWrite=5,function(t){t[t.Read=e.PermRead]="Read",t[t.Write=e.PermWrite]="Write"}(r=e.PermType||(e.PermType={})),e.permCategoryToString=function(t){if(t===n.Discoverable)return"Discoverable";if(t===n.Hidden)return"Hidden";if(t===n.LegacySkyID)return"LegacySkyID";throw new Error("Invalid permission category ".concat(t))},e.permTypeToString=function(t){if(t===r.Read)return"Read";if(t===r.Write)return"Write";throw new Error("Invalid permission type ".concat(t))}},7144:function(t,e){"use strict";function n(t){return t.startsWith("http://")?t:r(t,"https://")}function r(t,e){return t.startsWith(e)||(t="".concat(e).concat(t)),t}e.__esModule=!0,e.ensurePrefix=e.trimSuffix=e.removeAdjacentChars=e.ensureUrl=e.createFullScreenIframe=e.createIframe=void 0,e.createIframe=function(t,e){t=n(t);var r=document.createElement("iframe");if(null===r)throw new Error("Could not create new iframe");return r.src=t,r.name=e,r.style.display="none",document.body.appendChild(r),r},e.createFullScreenIframe=function(t,e){t=n(t);var r=document.createElement("iframe");if(null===r)throw new Error("Could not create new iframe");return r.src=t,r.name=e,r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.bottom="0",r.style.right="0",r.style.width="100%",r.style.height="100%",r.style.border="none",r.style.margin="0",r.style.padding="0",r.style.overflow="hidden",r.style.zIndex="999999",document.body.appendChild(r),r},e.ensureUrl=n,e.removeAdjacentChars=function(t,e){for(var n=Array.from(t),r=0;r<n.length-1;)n[r]===e&&n[r+1]===e?n.splice(r,1):r++;return n.join("")},e.trimSuffix=function(t,e,n){for(;t.endsWith(e)&&!(void 0!==n&&n<=0);)t=t.substring(0,t.length-e.length),n&&(n-=1);return t},e.ensurePrefix=r},9616:function(t,e){"use strict";e.__esModule=!0,e.monitorWindowError=e.PromiseController=e.dispatchedErrorEvent=e.errorWindowClosed=void 0,e.errorWindowClosed="window-closed",e.dispatchedErrorEvent="catchError";var n=function(){function t(){}return t.prototype.cleanup=function(){},t}();e.PromiseController=n,e.monitorWindowError=function(){var t=new n,r=new AbortController;return{promise:new Promise((function(n,o){var i=function(t){window.removeEventListener(e.dispatchedErrorEvent,i);var n=t.detail;o(n)};window.addEventListener(e.dispatchedErrorEvent,i,{signal:r.signal}),t.cleanup=function(){r.abort(),n()}})),controller:t}}},489:function(t){t.exports=function(t){if(t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray)return new DataView(t.buffer,t.byteOffset,t.byteLength);if(t instanceof ArrayBuffer)return new DataView(t);throw new TypeError("Expected `data` to be an ArrayBuffer, Buffer, Int8Array, Uint8Array or Uint8ClampedArray")}},780:function(t,e,n){!function(t){"use strict";var e=function(t){var e,n=new Float64Array(16);if(t)for(e=0;e<t.length;e++)n[e]=t[e];return n},r=function(){throw new Error("no PRNG")},o=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var a=e(),s=e([1]),c=e([56129,1]),l=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),f=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),p=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function d(t,e,n,r){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n,t[e+4]=r>>24&255,t[e+5]=r>>16&255,t[e+6]=r>>8&255,t[e+7]=255&r}function y(t,e,n,r,o){var i,a=0;for(i=0;i<o;i++)a|=t[e+i]^n[r+i];return(1&a-1>>>8)-1}function m(t,e,n,r){return y(t,e,n,r,16)}function g(t,e,n,r){return y(t,e,n,r,32)}function w(t,e,n,r){!function(t,e,n,r){for(var o,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,c=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,l=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,h=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,f=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,p=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,d=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,y=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,m=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,g=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,w=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,v=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,b=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,E=i,x=a,k=s,_=c,U=l,A=u,S=h,P=f,O=p,R=d,C=y,B=m,L=g,D=w,I=v,j=b,T=0;T<20;T+=2)E^=(o=(L^=(o=(O^=(o=(U^=(o=E+L|0)<<7|o>>>25)+E|0)<<9|o>>>23)+U|0)<<13|o>>>19)+O|0)<<18|o>>>14,A^=(o=(x^=(o=(D^=(o=(R^=(o=A+x|0)<<7|o>>>25)+A|0)<<9|o>>>23)+R|0)<<13|o>>>19)+D|0)<<18|o>>>14,C^=(o=(S^=(o=(k^=(o=(I^=(o=C+S|0)<<7|o>>>25)+C|0)<<9|o>>>23)+I|0)<<13|o>>>19)+k|0)<<18|o>>>14,j^=(o=(B^=(o=(P^=(o=(_^=(o=j+B|0)<<7|o>>>25)+j|0)<<9|o>>>23)+_|0)<<13|o>>>19)+P|0)<<18|o>>>14,E^=(o=(_^=(o=(k^=(o=(x^=(o=E+_|0)<<7|o>>>25)+E|0)<<9|o>>>23)+x|0)<<13|o>>>19)+k|0)<<18|o>>>14,A^=(o=(U^=(o=(P^=(o=(S^=(o=A+U|0)<<7|o>>>25)+A|0)<<9|o>>>23)+S|0)<<13|o>>>19)+P|0)<<18|o>>>14,C^=(o=(R^=(o=(O^=(o=(B^=(o=C+R|0)<<7|o>>>25)+C|0)<<9|o>>>23)+B|0)<<13|o>>>19)+O|0)<<18|o>>>14,j^=(o=(I^=(o=(D^=(o=(L^=(o=j+I|0)<<7|o>>>25)+j|0)<<9|o>>>23)+L|0)<<13|o>>>19)+D|0)<<18|o>>>14;E=E+i|0,x=x+a|0,k=k+s|0,_=_+c|0,U=U+l|0,A=A+u|0,S=S+h|0,P=P+f|0,O=O+p|0,R=R+d|0,C=C+y|0,B=B+m|0,L=L+g|0,D=D+w|0,I=I+v|0,j=j+b|0,t[0]=E>>>0&255,t[1]=E>>>8&255,t[2]=E>>>16&255,t[3]=E>>>24&255,t[4]=x>>>0&255,t[5]=x>>>8&255,t[6]=x>>>16&255,t[7]=x>>>24&255,t[8]=k>>>0&255,t[9]=k>>>8&255,t[10]=k>>>16&255,t[11]=k>>>24&255,t[12]=_>>>0&255,t[13]=_>>>8&255,t[14]=_>>>16&255,t[15]=_>>>24&255,t[16]=U>>>0&255,t[17]=U>>>8&255,t[18]=U>>>16&255,t[19]=U>>>24&255,t[20]=A>>>0&255,t[21]=A>>>8&255,t[22]=A>>>16&255,t[23]=A>>>24&255,t[24]=S>>>0&255,t[25]=S>>>8&255,t[26]=S>>>16&255,t[27]=S>>>24&255,t[28]=P>>>0&255,t[29]=P>>>8&255,t[30]=P>>>16&255,t[31]=P>>>24&255,t[32]=O>>>0&255,t[33]=O>>>8&255,t[34]=O>>>16&255,t[35]=O>>>24&255,t[36]=R>>>0&255,t[37]=R>>>8&255,t[38]=R>>>16&255,t[39]=R>>>24&255,t[40]=C>>>0&255,t[41]=C>>>8&255,t[42]=C>>>16&255,t[43]=C>>>24&255,t[44]=B>>>0&255,t[45]=B>>>8&255,t[46]=B>>>16&255,t[47]=B>>>24&255,t[48]=L>>>0&255,t[49]=L>>>8&255,t[50]=L>>>16&255,t[51]=L>>>24&255,t[52]=D>>>0&255,t[53]=D>>>8&255,t[54]=D>>>16&255,t[55]=D>>>24&255,t[56]=I>>>0&255,t[57]=I>>>8&255,t[58]=I>>>16&255,t[59]=I>>>24&255,t[60]=j>>>0&255,t[61]=j>>>8&255,t[62]=j>>>16&255,t[63]=j>>>24&255}(t,e,n,r)}function v(t,e,n,r){!function(t,e,n,r){for(var o,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,c=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,l=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,h=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,f=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,p=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,d=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,y=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,m=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,g=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,w=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,v=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,b=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,E=0;E<20;E+=2)i^=(o=(g^=(o=(p^=(o=(l^=(o=i+g|0)<<7|o>>>25)+i|0)<<9|o>>>23)+l|0)<<13|o>>>19)+p|0)<<18|o>>>14,u^=(o=(a^=(o=(w^=(o=(d^=(o=u+a|0)<<7|o>>>25)+u|0)<<9|o>>>23)+d|0)<<13|o>>>19)+w|0)<<18|o>>>14,y^=(o=(h^=(o=(s^=(o=(v^=(o=y+h|0)<<7|o>>>25)+y|0)<<9|o>>>23)+v|0)<<13|o>>>19)+s|0)<<18|o>>>14,b^=(o=(m^=(o=(f^=(o=(c^=(o=b+m|0)<<7|o>>>25)+b|0)<<9|o>>>23)+c|0)<<13|o>>>19)+f|0)<<18|o>>>14,i^=(o=(c^=(o=(s^=(o=(a^=(o=i+c|0)<<7|o>>>25)+i|0)<<9|o>>>23)+a|0)<<13|o>>>19)+s|0)<<18|o>>>14,u^=(o=(l^=(o=(f^=(o=(h^=(o=u+l|0)<<7|o>>>25)+u|0)<<9|o>>>23)+h|0)<<13|o>>>19)+f|0)<<18|o>>>14,y^=(o=(d^=(o=(p^=(o=(m^=(o=y+d|0)<<7|o>>>25)+y|0)<<9|o>>>23)+m|0)<<13|o>>>19)+p|0)<<18|o>>>14,b^=(o=(v^=(o=(w^=(o=(g^=(o=b+v|0)<<7|o>>>25)+b|0)<<9|o>>>23)+g|0)<<13|o>>>19)+w|0)<<18|o>>>14;t[0]=i>>>0&255,t[1]=i>>>8&255,t[2]=i>>>16&255,t[3]=i>>>24&255,t[4]=u>>>0&255,t[5]=u>>>8&255,t[6]=u>>>16&255,t[7]=u>>>24&255,t[8]=y>>>0&255,t[9]=y>>>8&255,t[10]=y>>>16&255,t[11]=y>>>24&255,t[12]=b>>>0&255,t[13]=b>>>8&255,t[14]=b>>>16&255,t[15]=b>>>24&255,t[16]=h>>>0&255,t[17]=h>>>8&255,t[18]=h>>>16&255,t[19]=h>>>24&255,t[20]=f>>>0&255,t[21]=f>>>8&255,t[22]=f>>>16&255,t[23]=f>>>24&255,t[24]=p>>>0&255,t[25]=p>>>8&255,t[26]=p>>>16&255,t[27]=p>>>24&255,t[28]=d>>>0&255,t[29]=d>>>8&255,t[30]=d>>>16&255,t[31]=d>>>24&255}(t,e,n,r)}var b=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function E(t,e,n,r,o,i,a){var s,c,l=new Uint8Array(16),u=new Uint8Array(64);for(c=0;c<16;c++)l[c]=0;for(c=0;c<8;c++)l[c]=i[c];for(;o>=64;){for(w(u,l,a,b),c=0;c<64;c++)t[e+c]=n[r+c]^u[c];for(s=1,c=8;c<16;c++)s=s+(255&l[c])|0,l[c]=255&s,s>>>=8;o-=64,e+=64,r+=64}if(o>0)for(w(u,l,a,b),c=0;c<o;c++)t[e+c]=n[r+c]^u[c];return 0}function x(t,e,n,r,o){var i,a,s=new Uint8Array(16),c=new Uint8Array(64);for(a=0;a<16;a++)s[a]=0;for(a=0;a<8;a++)s[a]=r[a];for(;n>=64;){for(w(c,s,o,b),a=0;a<64;a++)t[e+a]=c[a];for(i=1,a=8;a<16;a++)i=i+(255&s[a])|0,s[a]=255&i,i>>>=8;n-=64,e+=64}if(n>0)for(w(c,s,o,b),a=0;a<n;a++)t[e+a]=c[a];return 0}function k(t,e,n,r,o){var i=new Uint8Array(32);v(i,r,o,b);for(var a=new Uint8Array(8),s=0;s<8;s++)a[s]=r[s+16];return x(t,e,n,a,i)}function _(t,e,n,r,o,i,a){var s=new Uint8Array(32);v(s,i,a,b);for(var c=new Uint8Array(8),l=0;l<8;l++)c[l]=i[l+16];return E(t,e,n,r,o,c,s)}var U=function(t){var e,n,r,o,i,a,s,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,e=255&t[0]|(255&t[1])<<8,this.r[0]=8191&e,n=255&t[2]|(255&t[3])<<8,this.r[1]=8191&(e>>>13|n<<3),r=255&t[4]|(255&t[5])<<8,this.r[2]=7939&(n>>>10|r<<6),o=255&t[6]|(255&t[7])<<8,this.r[3]=8191&(r>>>7|o<<9),i=255&t[8]|(255&t[9])<<8,this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,a=255&t[10]|(255&t[11])<<8,this.r[6]=8191&(i>>>14|a<<2),s=255&t[12]|(255&t[13])<<8,this.r[7]=8065&(a>>>11|s<<5),c=255&t[14]|(255&t[15])<<8,this.r[8]=8191&(s>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8};function A(t,e,n,r,o,i){var a=new U(i);return a.update(n,r,o),a.finish(t,e),0}function S(t,e,n,r,o,i){var a=new Uint8Array(16);return A(a,0,n,r,o,i),m(t,e,a,0)}function P(t,e,n,r,o){var i;if(n<32)return-1;for(_(t,0,e,0,n,r,o),A(t,16,t,32,n-32,t),i=0;i<16;i++)t[i]=0;return 0}function O(t,e,n,r,o){var i,a=new Uint8Array(32);if(n<32)return-1;if(k(a,0,32,r,o),0!==S(e,16,e,32,n-32,a))return-1;for(_(t,0,e,0,n,r,o),i=0;i<32;i++)t[i]=0;return 0}function R(t,e){var n;for(n=0;n<16;n++)t[n]=0|e[n]}function C(t){var e,n,r=1;for(e=0;e<16;e++)n=t[e]+r+65535,r=Math.floor(n/65536),t[e]=n-65536*r;t[0]+=r-1+37*(r-1)}function B(t,e,n){for(var r,o=~(n-1),i=0;i<16;i++)r=o&(t[i]^e[i]),t[i]^=r,e[i]^=r}function L(t,n){var r,o,i,a=e(),s=e();for(r=0;r<16;r++)s[r]=n[r];for(C(s),C(s),C(s),o=0;o<2;o++){for(a[0]=s[0]-65517,r=1;r<15;r++)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,B(s,a,1-i)}for(r=0;r<16;r++)t[2*r]=255&s[r],t[2*r+1]=s[r]>>8}function D(t,e){var n=new Uint8Array(32),r=new Uint8Array(32);return L(n,t),L(r,e),g(n,0,r,0)}function I(t){var e=new Uint8Array(32);return L(e,t),1&e[0]}function j(t,e){var n;for(n=0;n<16;n++)t[n]=e[2*n]+(e[2*n+1]<<8);t[15]&=32767}function T(t,e,n){for(var r=0;r<16;r++)t[r]=e[r]+n[r]}function F(t,e,n){for(var r=0;r<16;r++)t[r]=e[r]-n[r]}function N(t,e,n){var r,o,i=0,a=0,s=0,c=0,l=0,u=0,h=0,f=0,p=0,d=0,y=0,m=0,g=0,w=0,v=0,b=0,E=0,x=0,k=0,_=0,U=0,A=0,S=0,P=0,O=0,R=0,C=0,B=0,L=0,D=0,I=0,j=n[0],T=n[1],F=n[2],N=n[3],M=n[4],H=n[5],q=n[6],z=n[7],K=n[8],$=n[9],J=n[10],W=n[11],V=n[12],Y=n[13],G=n[14],X=n[15];i+=(r=e[0])*j,a+=r*T,s+=r*F,c+=r*N,l+=r*M,u+=r*H,h+=r*q,f+=r*z,p+=r*K,d+=r*$,y+=r*J,m+=r*W,g+=r*V,w+=r*Y,v+=r*G,b+=r*X,a+=(r=e[1])*j,s+=r*T,c+=r*F,l+=r*N,u+=r*M,h+=r*H,f+=r*q,p+=r*z,d+=r*K,y+=r*$,m+=r*J,g+=r*W,w+=r*V,v+=r*Y,b+=r*G,E+=r*X,s+=(r=e[2])*j,c+=r*T,l+=r*F,u+=r*N,h+=r*M,f+=r*H,p+=r*q,d+=r*z,y+=r*K,m+=r*$,g+=r*J,w+=r*W,v+=r*V,b+=r*Y,E+=r*G,x+=r*X,c+=(r=e[3])*j,l+=r*T,u+=r*F,h+=r*N,f+=r*M,p+=r*H,d+=r*q,y+=r*z,m+=r*K,g+=r*$,w+=r*J,v+=r*W,b+=r*V,E+=r*Y,x+=r*G,k+=r*X,l+=(r=e[4])*j,u+=r*T,h+=r*F,f+=r*N,p+=r*M,d+=r*H,y+=r*q,m+=r*z,g+=r*K,w+=r*$,v+=r*J,b+=r*W,E+=r*V,x+=r*Y,k+=r*G,_+=r*X,u+=(r=e[5])*j,h+=r*T,f+=r*F,p+=r*N,d+=r*M,y+=r*H,m+=r*q,g+=r*z,w+=r*K,v+=r*$,b+=r*J,E+=r*W,x+=r*V,k+=r*Y,_+=r*G,U+=r*X,h+=(r=e[6])*j,f+=r*T,p+=r*F,d+=r*N,y+=r*M,m+=r*H,g+=r*q,w+=r*z,v+=r*K,b+=r*$,E+=r*J,x+=r*W,k+=r*V,_+=r*Y,U+=r*G,A+=r*X,f+=(r=e[7])*j,p+=r*T,d+=r*F,y+=r*N,m+=r*M,g+=r*H,w+=r*q,v+=r*z,b+=r*K,E+=r*$,x+=r*J,k+=r*W,_+=r*V,U+=r*Y,A+=r*G,S+=r*X,p+=(r=e[8])*j,d+=r*T,y+=r*F,m+=r*N,g+=r*M,w+=r*H,v+=r*q,b+=r*z,E+=r*K,x+=r*$,k+=r*J,_+=r*W,U+=r*V,A+=r*Y,S+=r*G,P+=r*X,d+=(r=e[9])*j,y+=r*T,m+=r*F,g+=r*N,w+=r*M,v+=r*H,b+=r*q,E+=r*z,x+=r*K,k+=r*$,_+=r*J,U+=r*W,A+=r*V,S+=r*Y,P+=r*G,O+=r*X,y+=(r=e[10])*j,m+=r*T,g+=r*F,w+=r*N,v+=r*M,b+=r*H,E+=r*q,x+=r*z,k+=r*K,_+=r*$,U+=r*J,A+=r*W,S+=r*V,P+=r*Y,O+=r*G,R+=r*X,m+=(r=e[11])*j,g+=r*T,w+=r*F,v+=r*N,b+=r*M,E+=r*H,x+=r*q,k+=r*z,_+=r*K,U+=r*$,A+=r*J,S+=r*W,P+=r*V,O+=r*Y,R+=r*G,C+=r*X,g+=(r=e[12])*j,w+=r*T,v+=r*F,b+=r*N,E+=r*M,x+=r*H,k+=r*q,_+=r*z,U+=r*K,A+=r*$,S+=r*J,P+=r*W,O+=r*V,R+=r*Y,C+=r*G,B+=r*X,w+=(r=e[13])*j,v+=r*T,b+=r*F,E+=r*N,x+=r*M,k+=r*H,_+=r*q,U+=r*z,A+=r*K,S+=r*$,P+=r*J,O+=r*W,R+=r*V,C+=r*Y,B+=r*G,L+=r*X,v+=(r=e[14])*j,b+=r*T,E+=r*F,x+=r*N,k+=r*M,_+=r*H,U+=r*q,A+=r*z,S+=r*K,P+=r*$,O+=r*J,R+=r*W,C+=r*V,B+=r*Y,L+=r*G,D+=r*X,b+=(r=e[15])*j,a+=38*(x+=r*F),s+=38*(k+=r*N),c+=38*(_+=r*M),l+=38*(U+=r*H),u+=38*(A+=r*q),h+=38*(S+=r*z),f+=38*(P+=r*K),p+=38*(O+=r*$),d+=38*(R+=r*J),y+=38*(C+=r*W),m+=38*(B+=r*V),g+=38*(L+=r*Y),w+=38*(D+=r*G),v+=38*(I+=r*X),i=(r=(i+=38*(E+=r*T))+(o=1)+65535)-65536*(o=Math.floor(r/65536)),a=(r=a+o+65535)-65536*(o=Math.floor(r/65536)),s=(r=s+o+65535)-65536*(o=Math.floor(r/65536)),c=(r=c+o+65535)-65536*(o=Math.floor(r/65536)),l=(r=l+o+65535)-65536*(o=Math.floor(r/65536)),u=(r=u+o+65535)-65536*(o=Math.floor(r/65536)),h=(r=h+o+65535)-65536*(o=Math.floor(r/65536)),f=(r=f+o+65535)-65536*(o=Math.floor(r/65536)),p=(r=p+o+65535)-65536*(o=Math.floor(r/65536)),d=(r=d+o+65535)-65536*(o=Math.floor(r/65536)),y=(r=y+o+65535)-65536*(o=Math.floor(r/65536)),m=(r=m+o+65535)-65536*(o=Math.floor(r/65536)),g=(r=g+o+65535)-65536*(o=Math.floor(r/65536)),w=(r=w+o+65535)-65536*(o=Math.floor(r/65536)),v=(r=v+o+65535)-65536*(o=Math.floor(r/65536)),b=(r=b+o+65535)-65536*(o=Math.floor(r/65536)),i=(r=(i+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(r/65536)),a=(r=a+o+65535)-65536*(o=Math.floor(r/65536)),s=(r=s+o+65535)-65536*(o=Math.floor(r/65536)),c=(r=c+o+65535)-65536*(o=Math.floor(r/65536)),l=(r=l+o+65535)-65536*(o=Math.floor(r/65536)),u=(r=u+o+65535)-65536*(o=Math.floor(r/65536)),h=(r=h+o+65535)-65536*(o=Math.floor(r/65536)),f=(r=f+o+65535)-65536*(o=Math.floor(r/65536)),p=(r=p+o+65535)-65536*(o=Math.floor(r/65536)),d=(r=d+o+65535)-65536*(o=Math.floor(r/65536)),y=(r=y+o+65535)-65536*(o=Math.floor(r/65536)),m=(r=m+o+65535)-65536*(o=Math.floor(r/65536)),g=(r=g+o+65535)-65536*(o=Math.floor(r/65536)),w=(r=w+o+65535)-65536*(o=Math.floor(r/65536)),v=(r=v+o+65535)-65536*(o=Math.floor(r/65536)),b=(r=b+o+65535)-65536*(o=Math.floor(r/65536)),i+=o-1+37*(o-1),t[0]=i,t[1]=a,t[2]=s,t[3]=c,t[4]=l,t[5]=u,t[6]=h,t[7]=f,t[8]=p,t[9]=d,t[10]=y,t[11]=m,t[12]=g,t[13]=w,t[14]=v,t[15]=b}function M(t,e){N(t,e,e)}function H(t,n){var r,o=e();for(r=0;r<16;r++)o[r]=n[r];for(r=253;r>=0;r--)M(o,o),2!==r&&4!==r&&N(o,o,n);for(r=0;r<16;r++)t[r]=o[r]}function q(t,n){var r,o=e();for(r=0;r<16;r++)o[r]=n[r];for(r=250;r>=0;r--)M(o,o),1!==r&&N(o,o,n);for(r=0;r<16;r++)t[r]=o[r]}function z(t,n,r){var o,i,a=new Uint8Array(32),s=new Float64Array(80),l=e(),u=e(),h=e(),f=e(),p=e(),d=e();for(i=0;i<31;i++)a[i]=n[i];for(a[31]=127&n[31]|64,a[0]&=248,j(s,r),i=0;i<16;i++)u[i]=s[i],f[i]=l[i]=h[i]=0;for(l[0]=f[0]=1,i=254;i>=0;--i)B(l,u,o=a[i>>>3]>>>(7&i)&1),B(h,f,o),T(p,l,h),F(l,l,h),T(h,u,f),F(u,u,f),M(f,p),M(d,l),N(l,h,l),N(h,u,p),T(p,l,h),F(l,l,h),M(u,l),F(h,f,d),N(l,h,c),T(l,l,f),N(h,h,l),N(l,f,d),N(f,u,s),M(u,p),B(l,u,o),B(h,f,o);for(i=0;i<16;i++)s[i+16]=l[i],s[i+32]=h[i],s[i+48]=u[i],s[i+64]=f[i];var y=s.subarray(32),m=s.subarray(16);return H(y,y),N(m,m,y),L(t,m),0}function K(t,e){return z(t,e,i)}function $(t,e){return r(e,32),K(t,e)}function J(t,e,n){var r=new Uint8Array(32);return z(r,n,e),v(t,o,r,b)}U.prototype.blocks=function(t,e,n){for(var r,o,i,a,s,c,l,u,h,f,p,d,y,m,g,w,v,b,E,x=this.fin?0:2048,k=this.h[0],_=this.h[1],U=this.h[2],A=this.h[3],S=this.h[4],P=this.h[5],O=this.h[6],R=this.h[7],C=this.h[8],B=this.h[9],L=this.r[0],D=this.r[1],I=this.r[2],j=this.r[3],T=this.r[4],F=this.r[5],N=this.r[6],M=this.r[7],H=this.r[8],q=this.r[9];n>=16;)f=h=0,f+=(k+=8191&(r=255&t[e+0]|(255&t[e+1])<<8))*L,f+=(_+=8191&(r>>>13|(o=255&t[e+2]|(255&t[e+3])<<8)<<3))*(5*q),f+=(U+=8191&(o>>>10|(i=255&t[e+4]|(255&t[e+5])<<8)<<6))*(5*H),f+=(A+=8191&(i>>>7|(a=255&t[e+6]|(255&t[e+7])<<8)<<9))*(5*M),h=(f+=(S+=8191&(a>>>4|(s=255&t[e+8]|(255&t[e+9])<<8)<<12))*(5*N))>>>13,f&=8191,f+=(P+=s>>>1&8191)*(5*F),f+=(O+=8191&(s>>>14|(c=255&t[e+10]|(255&t[e+11])<<8)<<2))*(5*T),f+=(R+=8191&(c>>>11|(l=255&t[e+12]|(255&t[e+13])<<8)<<5))*(5*j),f+=(C+=8191&(l>>>8|(u=255&t[e+14]|(255&t[e+15])<<8)<<8))*(5*I),p=h+=(f+=(B+=u>>>5|x)*(5*D))>>>13,p+=k*D,p+=_*L,p+=U*(5*q),p+=A*(5*H),h=(p+=S*(5*M))>>>13,p&=8191,p+=P*(5*N),p+=O*(5*F),p+=R*(5*T),p+=C*(5*j),h+=(p+=B*(5*I))>>>13,p&=8191,d=h,d+=k*I,d+=_*D,d+=U*L,d+=A*(5*q),h=(d+=S*(5*H))>>>13,d&=8191,d+=P*(5*M),d+=O*(5*N),d+=R*(5*F),d+=C*(5*T),y=h+=(d+=B*(5*j))>>>13,y+=k*j,y+=_*I,y+=U*D,y+=A*L,h=(y+=S*(5*q))>>>13,y&=8191,y+=P*(5*H),y+=O*(5*M),y+=R*(5*N),y+=C*(5*F),m=h+=(y+=B*(5*T))>>>13,m+=k*T,m+=_*j,m+=U*I,m+=A*D,h=(m+=S*L)>>>13,m&=8191,m+=P*(5*q),m+=O*(5*H),m+=R*(5*M),m+=C*(5*N),g=h+=(m+=B*(5*F))>>>13,g+=k*F,g+=_*T,g+=U*j,g+=A*I,h=(g+=S*D)>>>13,g&=8191,g+=P*L,g+=O*(5*q),g+=R*(5*H),g+=C*(5*M),w=h+=(g+=B*(5*N))>>>13,w+=k*N,w+=_*F,w+=U*T,w+=A*j,h=(w+=S*I)>>>13,w&=8191,w+=P*D,w+=O*L,w+=R*(5*q),w+=C*(5*H),v=h+=(w+=B*(5*M))>>>13,v+=k*M,v+=_*N,v+=U*F,v+=A*T,h=(v+=S*j)>>>13,v&=8191,v+=P*I,v+=O*D,v+=R*L,v+=C*(5*q),b=h+=(v+=B*(5*H))>>>13,b+=k*H,b+=_*M,b+=U*N,b+=A*F,h=(b+=S*T)>>>13,b&=8191,b+=P*j,b+=O*I,b+=R*D,b+=C*L,E=h+=(b+=B*(5*q))>>>13,E+=k*q,E+=_*H,E+=U*M,E+=A*N,h=(E+=S*F)>>>13,E&=8191,E+=P*T,E+=O*j,E+=R*I,E+=C*D,k=f=8191&(h=(h=((h+=(E+=B*L)>>>13)<<2)+h|0)+(f&=8191)|0),_=p+=h>>>=13,U=d&=8191,A=y&=8191,S=m&=8191,P=g&=8191,O=w&=8191,R=v&=8191,C=b&=8191,B=E&=8191,e+=16,n-=16;this.h[0]=k,this.h[1]=_,this.h[2]=U,this.h[3]=A,this.h[4]=S,this.h[5]=P,this.h[6]=O,this.h[7]=R,this.h[8]=C,this.h[9]=B},U.prototype.finish=function(t,e){var n,r,o,i,a=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=n,n=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,a[0]=this.h[0]+5,n=a[0]>>>13,a[0]&=8191,i=1;i<10;i++)a[i]=this.h[i]+n,n=a[i]>>>13,a[i]&=8191;for(a[9]-=8192,r=(1^n)-1,i=0;i<10;i++)a[i]&=r;for(r=~r,i=0;i<10;i++)this.h[i]=this.h[i]&r|a[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,i=1;i<8;i++)o=(this.h[i]+this.pad[i]|0)+(o>>>16)|0,this.h[i]=65535&o;t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255},U.prototype.update=function(t,e,n){var r,o;if(this.leftover){for((o=16-this.leftover)>n&&(o=n),r=0;r<o;r++)this.buffer[this.leftover+r]=t[e+r];if(n-=o,e+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(o=n-n%16,this.blocks(t,e,o),e+=o,n-=o),n){for(r=0;r<n;r++)this.buffer[this.leftover+r]=t[e+r];this.leftover+=n}};var W=P,V=O,Y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function G(t,e,n,r){for(var o,i,a,s,c,l,u,h,f,p,d,y,m,g,w,v,b,E,x,k,_,U,A,S,P,O,R=new Int32Array(16),C=new Int32Array(16),B=t[0],L=t[1],D=t[2],I=t[3],j=t[4],T=t[5],F=t[6],N=t[7],M=e[0],H=e[1],q=e[2],z=e[3],K=e[4],$=e[5],J=e[6],W=e[7],V=0;r>=128;){for(x=0;x<16;x++)k=8*x+V,R[x]=n[k+0]<<24|n[k+1]<<16|n[k+2]<<8|n[k+3],C[x]=n[k+4]<<24|n[k+5]<<16|n[k+6]<<8|n[k+7];for(x=0;x<80;x++)if(o=B,i=L,a=D,s=I,c=j,l=T,u=F,f=M,p=H,d=q,y=z,m=K,g=$,w=J,A=65535&(U=W),S=U>>>16,P=65535&(_=N),O=_>>>16,A+=65535&(U=(K>>>14|j<<18)^(K>>>18|j<<14)^(j>>>9|K<<23)),S+=U>>>16,P+=65535&(_=(j>>>14|K<<18)^(j>>>18|K<<14)^(K>>>9|j<<23)),O+=_>>>16,A+=65535&(U=K&$^~K&J),S+=U>>>16,P+=65535&(_=j&T^~j&F),O+=_>>>16,A+=65535&(U=Y[2*x+1]),S+=U>>>16,P+=65535&(_=Y[2*x]),O+=_>>>16,_=R[x%16],S+=(U=C[x%16])>>>16,P+=65535&_,O+=_>>>16,P+=(S+=(A+=65535&U)>>>16)>>>16,A=65535&(U=E=65535&A|S<<16),S=U>>>16,P=65535&(_=b=65535&P|(O+=P>>>16)<<16),O=_>>>16,A+=65535&(U=(M>>>28|B<<4)^(B>>>2|M<<30)^(B>>>7|M<<25)),S+=U>>>16,P+=65535&(_=(B>>>28|M<<4)^(M>>>2|B<<30)^(M>>>7|B<<25)),O+=_>>>16,S+=(U=M&H^M&q^H&q)>>>16,P+=65535&(_=B&L^B&D^L&D),O+=_>>>16,h=65535&(P+=(S+=(A+=65535&U)>>>16)>>>16)|(O+=P>>>16)<<16,v=65535&A|S<<16,A=65535&(U=y),S=U>>>16,P=65535&(_=s),O=_>>>16,S+=(U=E)>>>16,P+=65535&(_=b),O+=_>>>16,L=o,D=i,I=a,j=s=65535&(P+=(S+=(A+=65535&U)>>>16)>>>16)|(O+=P>>>16)<<16,T=c,F=l,N=u,B=h,H=f,q=p,z=d,K=y=65535&A|S<<16,$=m,J=g,W=w,M=v,x%16==15)for(k=0;k<16;k++)_=R[k],A=65535&(U=C[k]),S=U>>>16,P=65535&_,O=_>>>16,_=R[(k+9)%16],A+=65535&(U=C[(k+9)%16]),S+=U>>>16,P+=65535&_,O+=_>>>16,b=R[(k+1)%16],A+=65535&(U=((E=C[(k+1)%16])>>>1|b<<31)^(E>>>8|b<<24)^(E>>>7|b<<25)),S+=U>>>16,P+=65535&(_=(b>>>1|E<<31)^(b>>>8|E<<24)^b>>>7),O+=_>>>16,b=R[(k+14)%16],S+=(U=((E=C[(k+14)%16])>>>19|b<<13)^(b>>>29|E<<3)^(E>>>6|b<<26))>>>16,P+=65535&(_=(b>>>19|E<<13)^(E>>>29|b<<3)^b>>>6),O+=_>>>16,O+=(P+=(S+=(A+=65535&U)>>>16)>>>16)>>>16,R[k]=65535&P|O<<16,C[k]=65535&A|S<<16;A=65535&(U=M),S=U>>>16,P=65535&(_=B),O=_>>>16,_=t[0],S+=(U=e[0])>>>16,P+=65535&_,O+=_>>>16,O+=(P+=(S+=(A+=65535&U)>>>16)>>>16)>>>16,t[0]=B=65535&P|O<<16,e[0]=M=65535&A|S<<16,A=65535&(U=H),S=U>>>16,P=65535&(_=L),O=_>>>16,_=t[1],S+=(U=e[1])>>>16,P+=65535&_,O+=_>>>16,O+=(P+=(S+=(A+=65535&U)>>>16)>>>16)>>>16,t[1]=L=65535&P|O<<16,e[1]=H=65535&A|S<<16,A=65535&(U=q),S=U>>>16,P=65535&(_=D),O=_>>>16,_=t[2],S+=(U=e[2])>>>16,P+=65535&_,O+=_>>>16,O+=(P+=(S+=(A+=65535&U)>>>16)>>>16)>>>16,t[2]=D=65535&P|O<<16,e[2]=q=65535&A|S<<16,A=65535&(U=z),S=U>>>16,P=65535&(_=I),O=_>>>16,_=t[3],S+=(U=e[3])>>>16,P+=65535&_,O+=_>>>16,O+=(P+=(S+=(A+=65535&U)>>>16)>>>16)>>>16,t[3]=I=65535&P|O<<16,e[3]=z=65535&A|S<<16,A=65535&(U=K),S=U>>>16,P=65535&(_=j),O=_>>>16,_=t[4],S+=(U=e[4])>>>16,P+=65535&_,O+=_>>>16,O+=(P+=(S+=(A+=65535&U)>>>16)>>>16)>>>16,t[4]=j=65535&P|O<<16,e[4]=K=65535&A|S<<16,A=65535&(U=$),S=U>>>16,P=65535&(_=T),O=_>>>16,_=t[5],S+=(U=e[5])>>>16,P+=65535&_,O+=_>>>16,O+=(P+=(S+=(A+=65535&U)>>>16)>>>16)>>>16,t[5]=T=65535&P|O<<16,e[5]=$=65535&A|S<<16,A=65535&(U=J),S=U>>>16,P=65535&(_=F),O=_>>>16,_=t[6],S+=(U=e[6])>>>16,P+=65535&_,O+=_>>>16,O+=(P+=(S+=(A+=65535&U)>>>16)>>>16)>>>16,t[6]=F=65535&P|O<<16,e[6]=J=65535&A|S<<16,A=65535&(U=W),S=U>>>16,P=65535&(_=N),O=_>>>16,_=t[7],S+=(U=e[7])>>>16,P+=65535&_,O+=_>>>16,O+=(P+=(S+=(A+=65535&U)>>>16)>>>16)>>>16,t[7]=N=65535&P|O<<16,e[7]=W=65535&A|S<<16,V+=128,r-=128}return r}function X(t,e,n){var r,o=new Int32Array(8),i=new Int32Array(8),a=new Uint8Array(256),s=n;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,G(o,i,e,n),n%=128,r=0;r<n;r++)a[r]=e[s-n+r];for(a[n]=128,a[(n=256-128*(n<112?1:0))-9]=0,d(a,n-8,s/536870912|0,s<<3),G(o,i,a,n),r=0;r<8;r++)d(t,8*r,o[r],i[r]);return 0}function Z(t,n){var r=e(),o=e(),i=e(),a=e(),s=e(),c=e(),l=e(),h=e(),f=e();F(r,t[1],t[0]),F(f,n[1],n[0]),N(r,r,f),T(o,t[0],t[1]),T(f,n[0],n[1]),N(o,o,f),N(i,t[3],n[3]),N(i,i,u),N(a,t[2],n[2]),T(a,a,a),F(s,o,r),F(c,a,i),T(l,a,i),T(h,o,r),N(t[0],s,c),N(t[1],h,l),N(t[2],l,c),N(t[3],s,h)}function Q(t,e,n){var r;for(r=0;r<4;r++)B(t[r],e[r],n)}function tt(t,n){var r=e(),o=e(),i=e();H(i,n[2]),N(r,n[0],i),N(o,n[1],i),L(t,o),t[31]^=I(r)<<7}function et(t,e,n){var r,o;for(R(t[0],a),R(t[1],s),R(t[2],s),R(t[3],a),o=255;o>=0;--o)Q(t,e,r=n[o/8|0]>>(7&o)&1),Z(e,t),Z(t,t),Q(t,e,r)}function nt(t,n){var r=[e(),e(),e(),e()];R(r[0],h),R(r[1],f),R(r[2],s),N(r[3],h,f),et(t,r,n)}function rt(t,n,o){var i,a=new Uint8Array(64),s=[e(),e(),e(),e()];for(o||r(n,32),X(a,n,32),a[0]&=248,a[31]&=127,a[31]|=64,nt(s,a),tt(t,s),i=0;i<32;i++)n[i+32]=t[i];return 0}var ot=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function it(t,e){var n,r,o,i;for(r=63;r>=32;--r){for(n=0,o=r-32,i=r-12;o<i;++o)e[o]+=n-16*e[r]*ot[o-(r-32)],n=Math.floor((e[o]+128)/256),e[o]-=256*n;e[o]+=n,e[r]=0}for(n=0,o=0;o<32;o++)e[o]+=n-(e[31]>>4)*ot[o],n=e[o]>>8,e[o]&=255;for(o=0;o<32;o++)e[o]-=n*ot[o];for(r=0;r<32;r++)e[r+1]+=e[r]>>8,t[r]=255&e[r]}function at(t){var e,n=new Float64Array(64);for(e=0;e<64;e++)n[e]=t[e];for(e=0;e<64;e++)t[e]=0;it(t,n)}function st(t,n,r,o){var i,a,s=new Uint8Array(64),c=new Uint8Array(64),l=new Uint8Array(64),u=new Float64Array(64),h=[e(),e(),e(),e()];X(s,o,32),s[0]&=248,s[31]&=127,s[31]|=64;var f=r+64;for(i=0;i<r;i++)t[64+i]=n[i];for(i=0;i<32;i++)t[32+i]=s[32+i];for(X(l,t.subarray(32),r+32),at(l),nt(h,l),tt(t,h),i=32;i<64;i++)t[i]=o[i];for(X(c,t,r+64),at(c),i=0;i<64;i++)u[i]=0;for(i=0;i<32;i++)u[i]=l[i];for(i=0;i<32;i++)for(a=0;a<32;a++)u[i+a]+=c[i]*s[a];return it(t.subarray(32),u),f}function ct(t,n,r,o){var i,c=new Uint8Array(32),u=new Uint8Array(64),h=[e(),e(),e(),e()],f=[e(),e(),e(),e()];if(r<64)return-1;if(function(t,n){var r=e(),o=e(),i=e(),c=e(),u=e(),h=e(),f=e();return R(t[2],s),j(t[1],n),M(i,t[1]),N(c,i,l),F(i,i,t[2]),T(c,t[2],c),M(u,c),M(h,u),N(f,h,u),N(r,f,i),N(r,r,c),q(r,r),N(r,r,i),N(r,r,c),N(r,r,c),N(t[0],r,c),M(o,t[0]),N(o,o,c),D(o,i)&&N(t[0],t[0],p),M(o,t[0]),N(o,o,c),D(o,i)?-1:(I(t[0])===n[31]>>7&&F(t[0],a,t[0]),N(t[3],t[0],t[1]),0)}(f,o))return-1;for(i=0;i<r;i++)t[i]=n[i];for(i=0;i<32;i++)t[i+32]=o[i];if(X(u,t,r),at(u),et(h,f,u),nt(f,n.subarray(32)),Z(h,f),tt(c,h),r-=64,g(n,0,c,0)){for(i=0;i<r;i++)t[i]=0;return-1}for(i=0;i<r;i++)t[i]=n[i+64];return r}var lt,ut=64,ht=32,ft=64;function pt(t,e){if(32!==t.length)throw new Error("bad key size");if(24!==e.length)throw new Error("bad nonce size")}function dt(){for(var t=0;t<arguments.length;t++)if(!(arguments[t]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function yt(t){for(var e=0;e<t.length;e++)t[e]=0}t.lowlevel={crypto_core_hsalsa20:v,crypto_stream_xor:_,crypto_stream:k,crypto_stream_salsa20_xor:E,crypto_stream_salsa20:x,crypto_onetimeauth:A,crypto_onetimeauth_verify:S,crypto_verify_16:m,crypto_verify_32:g,crypto_secretbox:P,crypto_secretbox_open:O,crypto_scalarmult:z,crypto_scalarmult_base:K,crypto_box_beforenm:J,crypto_box_afternm:W,crypto_box:function(t,e,n,r,o,i){var a=new Uint8Array(32);return J(a,o,i),W(t,e,n,r,a)},crypto_box_open:function(t,e,n,r,o,i){var a=new Uint8Array(32);return J(a,o,i),V(t,e,n,r,a)},crypto_box_keypair:$,crypto_hash:X,crypto_sign:st,crypto_sign_keypair:rt,crypto_sign_open:ct,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:ut,crypto_sign_PUBLICKEYBYTES:ht,crypto_sign_SECRETKEYBYTES:ft,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:e,D:l,L:ot,pack25519:L,unpack25519:j,M:N,A:T,S:M,Z:F,pow2523:q,add:Z,set25519:R,modL:it,scalarmult:et,scalarbase:nt},t.randomBytes=function(t){var e=new Uint8Array(t);return r(e,t),e},t.secretbox=function(t,e,n){dt(t,e,n),pt(n,e);for(var r=new Uint8Array(32+t.length),o=new Uint8Array(r.length),i=0;i<t.length;i++)r[i+32]=t[i];return P(o,r,r.length,e,n),o.subarray(16)},t.secretbox.open=function(t,e,n){dt(t,e,n),pt(n,e);for(var r=new Uint8Array(16+t.length),o=new Uint8Array(r.length),i=0;i<t.length;i++)r[i+16]=t[i];return r.length<32||0!==O(o,r,r.length,e,n)?null:o.subarray(32)},t.secretbox.keyLength=32,t.secretbox.nonceLength=24,t.secretbox.overheadLength=16,t.scalarMult=function(t,e){if(dt(t,e),32!==t.length)throw new Error("bad n size");if(32!==e.length)throw new Error("bad p size");var n=new Uint8Array(32);return z(n,t,e),n},t.scalarMult.base=function(t){if(dt(t),32!==t.length)throw new Error("bad n size");var e=new Uint8Array(32);return K(e,t),e},t.scalarMult.scalarLength=32,t.scalarMult.groupElementLength=32,t.box=function(e,n,r,o){var i=t.box.before(r,o);return t.secretbox(e,n,i)},t.box.before=function(t,e){dt(t,e),function(t,e){if(32!==t.length)throw new Error("bad public key size");if(32!==e.length)throw new Error("bad secret key size")}(t,e);var n=new Uint8Array(32);return J(n,t,e),n},t.box.after=t.secretbox,t.box.open=function(e,n,r,o){var i=t.box.before(r,o);return t.secretbox.open(e,n,i)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var t=new Uint8Array(32),e=new Uint8Array(32);return $(t,e),{publicKey:t,secretKey:e}},t.box.keyPair.fromSecretKey=function(t){if(dt(t),32!==t.length)throw new Error("bad secret key size");var e=new Uint8Array(32);return K(e,t),{publicKey:e,secretKey:new Uint8Array(t)}},t.box.publicKeyLength=32,t.box.secretKeyLength=32,t.box.sharedKeyLength=32,t.box.nonceLength=24,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(t,e){if(dt(t,e),e.length!==ft)throw new Error("bad secret key size");var n=new Uint8Array(ut+t.length);return st(n,t,t.length,e),n},t.sign.open=function(t,e){if(dt(t,e),e.length!==ht)throw new Error("bad public key size");var n=new Uint8Array(t.length),r=ct(n,t,t.length,e);if(r<0)return null;for(var o=new Uint8Array(r),i=0;i<o.length;i++)o[i]=n[i];return o},t.sign.detached=function(e,n){for(var r=t.sign(e,n),o=new Uint8Array(ut),i=0;i<o.length;i++)o[i]=r[i];return o},t.sign.detached.verify=function(t,e,n){if(dt(t,e,n),e.length!==ut)throw new Error("bad signature size");if(n.length!==ht)throw new Error("bad public key size");var r,o=new Uint8Array(ut+t.length),i=new Uint8Array(ut+t.length);for(r=0;r<ut;r++)o[r]=e[r];for(r=0;r<t.length;r++)o[r+ut]=t[r];return ct(i,o,o.length,n)>=0},t.sign.keyPair=function(){var t=new Uint8Array(ht),e=new Uint8Array(ft);return rt(t,e),{publicKey:t,secretKey:e}},t.sign.keyPair.fromSecretKey=function(t){if(dt(t),t.length!==ft)throw new Error("bad secret key size");for(var e=new Uint8Array(ht),n=0;n<e.length;n++)e[n]=t[32+n];return{publicKey:e,secretKey:new Uint8Array(t)}},t.sign.keyPair.fromSeed=function(t){if(dt(t),32!==t.length)throw new Error("bad seed size");for(var e=new Uint8Array(ht),n=new Uint8Array(ft),r=0;r<32;r++)n[r]=t[r];return rt(e,n,!0),{publicKey:e,secretKey:n}},t.sign.publicKeyLength=ht,t.sign.secretKeyLength=ft,t.sign.seedLength=32,t.sign.signatureLength=ut,t.hash=function(t){dt(t);var e=new Uint8Array(64);return X(e,t,t.length),e},t.hash.hashLength=64,t.verify=function(t,e){return dt(t,e),0!==t.length&&0!==e.length&&t.length===e.length&&0===y(t,0,e,0,t.length)},t.setPRNG=function(t){r=t},(lt="undefined"!=typeof self?self.crypto||self.msCrypto:null)&&lt.getRandomValues?t.setPRNG((function(t,e){var n,r=new Uint8Array(e);for(n=0;n<e;n+=65536)lt.getRandomValues(r.subarray(n,n+Math.min(e-n,65536)));for(n=0;n<e;n++)t[n]=r[n];yt(r)})):(lt=n(5024))&&lt.randomBytes&&t.setPRNG((function(t,e){var n,r=lt.randomBytes(e);for(n=0;n<e;n++)t[n]=r[n];yt(r)}))}(t.exports?t.exports:self.nacl=self.nacl||{})},4078:function(t,e,n){var r,o,i;i=function(){function t(t){var e=[];if(0===t.length)return"";if("string"!=typeof t[0])throw new TypeError("Url must be a string. Received "+t[0]);if(t[0].match(/^[^/:]+:\/*$/)&&t.length>1){var n=t.shift();t[0]=n+t[0]}t[0].match(/^file:\/\/\//)?t[0]=t[0].replace(/^([^/:]+):\/*/,"$1:///"):t[0]=t[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<t.length;r++){var o=t[r];if("string"!=typeof o)throw new TypeError("Url must be a string. Received "+o);""!==o&&(r>0&&(o=o.replace(/^[\/]+/,"")),o=r<t.length-1?o.replace(/[\/]+$/,""):o.replace(/[\/]+$/,"/"),e.push(o))}var i=e.join("/"),a=(i=i.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return a.shift()+(a.length>0?"?":"")+a.join("&")}return function(){return t("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},t.exports?t.exports=i():void 0===(o="function"==typeof(r=i)?r.call(e,n,e,t):r)||(t.exports=o)},4564:function(t,e,n){"use strict";var r=n(7418),o=n(7129),i=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,a=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function h(t){return(t||"").toString().replace(i,"")}var f=[["#","hash"],["?","query"],function(t,e){return y(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function d(t){var e,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},o={},i=typeof(t=t||r);if("blob:"===t.protocol)o=new g(unescape(t.pathname),{});else if("string"===i)for(e in o=new g(t,{}),p)delete o[e];else if("object"===i){for(e in t)e in p||(o[e]=t[e]);void 0===o.slashes&&(o.slashes=s.test(t.href))}return o}function y(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function m(t,e){t=(t=h(t)).replace(a,""),e=e||{};var n,r=l.exec(t),o=r[1]?r[1].toLowerCase():"",i=!!r[2],s=!!r[3],c=0;return i?s?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):s?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===o?c>=2&&(n=n.slice(2)):y(o)?n=r[4]:o?i&&(n=n.slice(2)):c>=2&&y(e.protocol)&&(n=r[4]),{protocol:o,slashes:i||y(o),slashesCount:c,rest:n}}function g(t,e,n){if(t=(t=h(t)).replace(a,""),!(this instanceof g))return new g(t,e,n);var i,s,c,l,p,w,v=f.slice(),b=typeof e,E=this,x=0;for("object"!==b&&"string"!==b&&(n=e,e=null),n&&"function"!=typeof n&&(n=o.parse),i=!(s=m(t||"",e=d(e))).protocol&&!s.slashes,E.slashes=s.slashes||i&&e.slashes,E.protocol=s.protocol||e.protocol||"",t=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||u.test(t))||!s.slashes&&(s.protocol||s.slashesCount<2||!y(E.protocol)))&&(v[3]=[/(.*)/,"pathname"]);x<v.length;x++)"function"!=typeof(l=v[x])?(c=l[0],w=l[1],c!=c?E[w]=t:"string"==typeof c?~(p="@"===c?t.lastIndexOf(c):t.indexOf(c))&&("number"==typeof l[2]?(E[w]=t.slice(0,p),t=t.slice(p+l[2])):(E[w]=t.slice(p),t=t.slice(0,p))):(p=c.exec(t))&&(E[w]=p[1],t=t.slice(0,p.index)),E[w]=E[w]||i&&l[3]&&e[w]||"",l[4]&&(E[w]=E[w].toLowerCase())):t=l(t,E);n&&(E.query=n(E.query)),i&&e.slashes&&"/"!==E.pathname.charAt(0)&&(""!==E.pathname||""!==e.pathname)&&(E.pathname=function(t,e){if(""===t)return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=n.length,o=n[r-1],i=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(i=!0),n.splice(r,1),a--);return i&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(E.pathname,e.pathname)),"/"!==E.pathname.charAt(0)&&y(E.protocol)&&(E.pathname="/"+E.pathname),r(E.port,E.protocol)||(E.host=E.hostname,E.port=""),E.username=E.password="",E.auth&&(~(p=E.auth.indexOf(":"))?(E.username=E.auth.slice(0,p),E.username=encodeURIComponent(decodeURIComponent(E.username)),E.password=E.auth.slice(p+1),E.password=encodeURIComponent(decodeURIComponent(E.password))):E.username=encodeURIComponent(decodeURIComponent(E.auth)),E.auth=E.password?E.username+":"+E.password:E.username),E.origin="file:"!==E.protocol&&y(E.protocol)&&E.host?E.protocol+"//"+E.host:"null",E.href=E.toString()}g.prototype={set:function(t,e,n){var i=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||o.parse)(e)),i[t]=e;break;case"port":i[t]=e,r(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[t]=e,c.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(e){var a="pathname"===t?"/":"#";i[t]=e.charAt(0)!==a?a+e:e}else i[t]=e;break;case"username":case"password":i[t]=encodeURIComponent(e);break;case"auth":var s=e.indexOf(":");~s?(i.username=e.slice(0,s),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=e.slice(s+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(e))}for(var l=0;l<f.length;l++){var u=f[l];u[4]&&(i[u[1]]=i[u[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin="file:"!==i.protocol&&y(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(t){t&&"function"==typeof t||(t=o.stringify);var e,n=this,r=n.host,i=n.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var a=i+(n.protocol&&n.slashes||y(n.protocol)?"//":"");return n.username?(a+=n.username,n.password&&(a+=":"+n.password),a+="@"):n.password?(a+=":"+n.password,a+="@"):"file:"!==n.protocol&&y(n.protocol)&&!r&&"/"!==n.pathname&&(a+="@"),(":"===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=":"),a+=r+n.pathname,(e="object"==typeof n.query?t(n.query):n.query)&&(a+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(a+=n.hash),a}},g.extractProtocol=m,g.location=d,g.trimLeft=h,g.qs=o,t.exports=g},5024:function(){}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";var t=n(9669),e=n.n(t),r=n(1433),o=n(9575),i=n(4564),a=n.n(i);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){var e="function"==typeof Map?new Map:void 0;return u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return h(t,arguments,d(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,t)},u(t)}function h(t,e,n){return h=f()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&p(o,n.prototype),o},h.apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(o,t);var e,n,r=(e=o,n=f(),function(){var t,r=d(e);if(n){var o=d(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return l(this,t)});function o(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(c(this,o),(e=r.call(this,t)).originalRequest=i,e.originalResponse=a,e.causingError=n,null!=n&&(t+=", caused by ".concat(n.toString())),null!=i){var s=i.getHeader("X-Request-ID")||"n/a",l=i.getMethod(),u=i.getURL(),h=a?a.getStatus():"n/a",f=a?a.getBody()||"":"n/a";t+=", originated from request (method: ".concat(l,", url: ").concat(u,", response code: ").concat(h,", response text: ").concat(f,", request id: ").concat(s,")")}return e.message=t,e}return o}(u(Error)),m=y;function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var x=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"resume"in n&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=n,this.options.chunkSize=+this.options.chunkSize,this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._splitSizeIntoParts=null,this._parallelUploadUrls=null,this._currentChunk=null,this._initialUpload=!0}var e,n,r;return e=t,n=[{key:"findPreviousUploads",value:function(){var t=this;return this.options.fingerprint(this.file,this.options).then((function(e){return t._urlStorage.findUploadsByFingerprint(e)}))}},{key:"resumeFromPreviousUpload",value:function(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function(){var t=this,e=this.file;if(e)if(this.options.endpoint||this.options.uploadUrl){var n=this.options.retryDelays;null==n||"[object Array]"===Object.prototype.toString.call(n)?(this.options.parallelUploads>1&&["uploadUrl","uploadSize","uploadLengthDeferred"].forEach((function(e){t.options[e]&&t._emitError(new Error("tus: cannot use the ".concat(e," option when parallelUploads is enabled")))})),null!==this.options.staggerPercent&&this._initialUpload&&this.options.parallelUploads<=1&&this._emitError(new Error("tus: cannot use the staggerPercent option when parallelUploads is disabled")),null!==this.options.splitSizeIntoParts&&this.options.parallelUploads<=1&&this._emitError(new Error("tus: cannot use the splitSizeIntoParts option when parallelUploads is disabled")),this.options.fingerprint(e,this.options).then((function(n){return null==n||"Calculated fingerprint: ".concat(n),t._fingerprint=n,t._source?t._source:t.options.fileReader.openFile(e,t.options.chunkSize)})).then((function(e){t._source=e,t.options.parallelUploads>1||null!=t._parallelUploadUrls?t._startParallelUpload():t._startSingleUpload()})).catch((function(e){t._emitError(e)}))):this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var e,n=this,r=this._size=this._source.size,o=0,i=this.options,a=i.chunkSize,s=i.staggerPercent;this._parallelUploads=[];var c=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,l=(null!==(e=this.options.splitSizeIntoParts)&&void 0!==e?e:O)(this._source.size,c);this._parallelUploadUrls&&l.forEach((function(t,e){t.uploadUrl=n._parallelUploadUrls[e]||null})),this._parallelUploadUrls=new Array(l.length);var u,h,f=null,p=null;if(null!==s){var d=function(t,e,n){function r(t,e){var n,r=t[e],o={promise:new Promise((function(t){return n=t})),resolve:n,resolved:!1,nextChunkStagger:null,nextChunkInPart:null,indexInPart:r.length};r.length>0&&(r[r.length-1].nextChunkInPart=o),r.push(o)}if(e<1)throw new Error("Expected option 'partCount' to be greater than or equal to 1, was type 'number', value '".concat(e,"'"));if(n<1)throw new Error("Expected option 'chunkSize' to be greater than or equal to 1, was type 'number', value '".concat(n,"'"));if(t<=n)throw new Error("Expected parameter 'totalSize' to be greater than the size of a chunk ('".concat(n,"'), was type 'number', value '").concat(t,"'"));for(var o=[],i=0;i<e;i++)o.push([]);for(var a=Math.floor(t/n),s=0;s<a;s++)r(o,s%e);t%n>0&&r(o,Math.min(a,e-1));for(var c=0,l=o[0].length,u=1;u<o.length;u++)o[u].length>l&&(c=u,l=o[u].length);for(var h=o[c][0],f=null,p=0;p<l;p++)for(var d=c;d<c+e;d++){var y=d%e;if(o[y].length>p){var m=o[y][p];null!==f&&(f.nextChunkStagger=m),f=m}}return[o,h]}(r,l.length,a),y=(h=2,function(t){if(Array.isArray(t))return t}(u=d)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(u,h)||function(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}(u,h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());p=y[0],f=y[1]}var m,g=l.map((function(e,i){var c=0;return n._source.slice(e.start,e.end).then((function(u){var h=u.value;return new Promise((function(u,f){var d=w(w({},n.options),{},{uploadUrl:e.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,splitSizeIntoParts:null,metadata:{},headers:w(w({},n.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:u,onError:f,_onUploadUrlAvailable:function(){n._parallelUploadUrls[i]=y.url,n._parallelUploadUrls.filter((function(t){return!!t})).length===l.length&&n._saveUploadInUrlStorage()}}),y=new t(h,d);y.options.onProgress=function(t){if(o=o-c+t,c=t,n._emitProgress(o,r),null!==s){var e=y._currentChunk,i=(t-a*e.indexInPart)/a*100,l=e.nextChunkStagger;null!==l&&!l.resolved&&i>=s&&(l.resolve(),l.resolved=!0)}},y._initialUpload=!1;var m=Promise.resolve();if(null!==s){var g=p[i][0];m=g.promise,y._currentChunk=g}m.then((function(){return y.start()})),n._parallelUploads.push(y)}))}))}));null!==s&&f.resolve(),Promise.all(g).then((function(){(m=n._openRequest("POST",n.options.endpoint)).setHeader("Upload-Concat","final;".concat(n._parallelUploadUrls.join(" ")));var t=k(n.options.metadata);return""!==t&&m.setHeader("Upload-Metadata",t),n._sendRequest(m,null)})).then((function(t){if(_(t.getStatus(),200)){var e=t.getHeader("Location");null!=e?(n.url=P(n.options.endpoint,e),"Created upload at ".concat(n.url),n._emitSuccess()):n._emitHttpError(m,t,"tus: invalid or missing Location header")}else n._emitHttpError(m,t,"tus: unexpected response while creating upload")})).catch((function(t){n._emitError(t)}))}},{key:"_startSingleUpload",value:function(){if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=this._source.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return this._aborted=!1,null!=this.url?("Resuming upload from previous URL: ".concat(this.url),void this._resumeUpload()):null!=this.options.uploadUrl?("Resuming upload from provided URL: ".concat(this.options.uploadUrl),this.url=this.options.uploadUrl,void this._resumeUpload()):void this._createUpload()}},{key:"abort",value:function(e){var n=this;if(arguments.length>1&&"function"==typeof arguments[1])throw new Error("tus: the abort function does not accept a callback since v2 anymore; please use the returned Promise instead");return null!=this._parallelUploads&&this._parallelUploads.forEach((function(t){t.abort(e)})),null!==this._req&&(this._req.abort(),this._source.close()),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),e&&null!=this.url?t.terminate(this.url,this.options).then((function(){return n._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(t,e,n,r){this._emitError(new m(n,r,t,e))}},{key:"_emitError",value:function(t){var e=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),S(t,this._retryAttempt,this.options))){var n=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){e.start()}),n))}if("function"!=typeof this.options.onError)throw t;this.options.onError(t)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(t,e){"function"==typeof this.options.onProgress&&this.options.onProgress(t,e)}},{key:"_emitChunkComplete",value:function(t,e,n){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(t,e,n)}},{key:"_createUpload",value:function(){var t=this;if(this.options.endpoint){var e=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?e.setHeader("Upload-Defer-Length",1):e.setHeader("Upload-Length",this._size);var n,r=k(this.options.metadata);""!==r&&e.setHeader("Upload-Metadata",r),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,n=this._addChunkToRequest(e)):n=this._sendRequest(e,null),n.then((function(n){if(_(n.getStatus(),200)){var r=n.getHeader("Location");if(null!=r){if(t.url=P(t.options.endpoint,r),"Created upload at ".concat(t.url),"function"==typeof t.options._onUploadUrlAvailable&&t.options._onUploadUrlAvailable(),0===t._size)return t._emitSuccess(),void t._source.close();t._saveUploadInUrlStorage(),t.options.uploadDataDuringCreation?t._handleUploadResponse(e,n):(t._offset=0,t._performUpload())}else t._emitHttpError(e,n,"tus: invalid or missing Location header")}else t._emitHttpError(e,n,"tus: unexpected response while creating upload")})).catch((function(n){t._emitHttpError(e,null,"tus: failed to create upload",n)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var t=this,e=this._openRequest("HEAD",this.url);this._sendRequest(e,null).then((function(n){var r=n.getStatus();if(!_(r,200))return _(r,400)&&t._removeFromUrlStorage(),423===r?void t._emitHttpError(e,n,"tus: upload is currently locked; retry later"):t.options.endpoint?(t.url=null,void t._createUpload()):void t._emitHttpError(e,n,"tus: unable to resume upload (new upload cannot be created without an endpoint)");var o=parseInt(n.getHeader("Upload-Offset"),10);if(isNaN(o))t._emitHttpError(e,n,"tus: invalid or missing offset value");else{var i=parseInt(n.getHeader("Upload-Length"),10);if(!isNaN(i)||t.options.uploadLengthDeferred){if("function"==typeof t.options._onUploadUrlAvailable&&t.options._onUploadUrlAvailable(),o===i)return t._emitProgress(i,i),void t._emitSuccess();t._offset=o,t._performUpload()}else t._emitHttpError(e,n,"tus: invalid or missing length value")}})).catch((function(n){t._emitHttpError(e,null,"tus: failed to resume upload",n)}))}},{key:"_performUpload",value:function(){var t,e=this;this._aborted||(this.options.overridePatchMethod?(t=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):t=this._openRequest("PATCH",this.url),t.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(t).then((function(n){_(n.getStatus(),200)?e._handleUploadResponse(t,n):e._emitHttpError(t,n,"tus: unexpected response while uploading chunk")})).catch((function(n){e._aborted||e._emitHttpError(t,null,"tus: failed to upload chunk at offset ".concat(e._offset),n)})))}},{key:"_addChunkToRequest",value:function(t){var e=this,n=this._offset,r=this._offset+this.options.chunkSize;return t.setProgressHandler((function(t){e._emitProgress(n+t,e._size)})),t.setHeader("Content-Type","application/offset+octet-stream"),(r===1/0||r>this._size)&&!this.options.uploadLengthDeferred&&(r=this._size),this._source.slice(n,r).then((function(n){var r=n.value,o=n.done;return e.options.uploadLengthDeferred&&o&&(e._size=e._offset+(r&&r.size?r.size:0),t.setHeader("Upload-Length",e._size)),null===r?e._sendRequest(t):(e._emitProgress(e._offset,e._size),e._sendRequest(t,r))}))}},{key:"_handleUploadResponse",value:function(t,e){var n=this,r=parseInt(e.getHeader("Upload-Offset"),10);if(isNaN(r))this._emitHttpError(t,e,"tus: invalid or missing offset value");else{if(this._emitProgress(r,this._size),this._emitChunkComplete(r-this._offset,r,this._size),this._offset=r,r==this._size)return this._emitSuccess(),void this._source.close();var o=Promise.resolve();null!==this.options.staggerPercent&&(this._currentChunk=this._currentChunk.nextChunkInPart,null!==this.currentChunk&&(o=this._currentChunk.promise)),o.then((function(){return n._performUpload()}))}}},{key:"_openRequest",value:function(t,e){var n=U(t,e,this.options);return this._req=n,n}},{key:"_removeFromUrlStorage",value:function(){var t=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(e){t._emitError(e)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var t=this;if(this.options.storeFingerprintForResuming&&this._fingerprint){var e={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};this._parallelUploads?e.parallelUploadUrls=this._parallelUploadUrls:e.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,e).then((function(e){return t._urlStorageKey=e})).catch((function(e){t._emitError(e)}))}}},{key:"_sendRequest",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return A(t,e,this.options)}}],r=[{key:"terminate",value:function(e,n){if(arguments.length>1&&"function"==typeof arguments[arguments.length-1])throw new Error("tus: the terminate function does not accept a callback since v2 anymore; please use the returned Promise instead");void 0===n&&(n={});var r=U("DELETE",e,n);return A(r,null,n).then((function(t){if(204!==t.getStatus())throw new m("tus: unexpected response while terminating upload",null,r,t)})).catch((function(o){if(o instanceof m||(o=new m("tus: failed to terminate upload",o,r,null)),!S(o,0,n))throw o;var i=n.retryDelays[0],a=n.retryDelays.slice(1),s=w(w({},n),{},{retryDelays:a});return new Promise((function(t){return setTimeout(t,i)})).then((function(){return t.terminate(e,s)}))}))}}],n&&E(e.prototype,n),r&&E(e,r),t}();function k(t){var e=[];for(var n in t)e.push("".concat(n," ").concat(o.Base64.encode(t[n])));return e.join(",")}function _(t,e){return t>=e&&t<e+100}function U(t,e,n){var r=n.httpStack.createRequest(t,e);r.setHeader("Tus-Resumable","1.0.0");var o=n.headers||{};for(var i in o)r.setHeader(i,o[i]);if(n.addRequestId){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}));r.setHeader("X-Request-ID",a)}return r}function A(t,e,n){return("function"==typeof n.onBeforeRequest?Promise.resolve(n.onBeforeRequest(t)):Promise.resolve()).then((function(){return t.send(e).then((function(e){return("function"==typeof n.onAfterResponse?Promise.resolve(n.onAfterResponse(t,e)):Promise.resolve()).then((function(){return e}))}))}))}function S(t,e,n){if(null==n.retryDelays||e>=n.retryDelays.length||null==t.originalRequest)return!1;if(n&&"function"==typeof n.onShouldRetry)return n.onShouldRetry(t,e,n);var r,o=t.originalResponse?t.originalResponse.getStatus():0;return(!_(o,400)||409===o||423===o)&&(r=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(r=!1),r)}function P(t,e){return new(a())(e,t).toString()}function O(t,e){for(var n=Math.floor(t/e),r=[],o=0;o<e;o++)r.push({start:n*o,end:n*(o+1)});return r[e-1].end=t,r}x.defaultOptions={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,splitSizeIntoParts:null,staggerPercent:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null};var R=x;function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var B=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve([])}},{key:"removeUpload",value:function(t){return Promise.resolve()}},{key:"addUpload",value:function(t,e){return Promise.resolve(null)}}])&&C(e.prototype,n),t}();function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var D=!1;try{D="localStorage"in window;var I="tusSupport";localStorage.setItem(I,localStorage.getItem(I))}catch(t){if(t.code!==t.SECURITY_ERR&&t.code!==t.QUOTA_EXCEEDED_ERR)throw t;D=!1}var j=D,T=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"findAllUploads",value:function(){var t=this._findEntries("tus::");return Promise.resolve(t)}},{key:"findUploadsByFingerprint",value:function(t){var e=this._findEntries("tus::".concat(t,"::"));return Promise.resolve(e)}},{key:"removeUpload",value:function(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function(t,e){var n=Math.round(1e12*Math.random()),r="tus::".concat(t,"::").concat(n);return localStorage.setItem(r,JSON.stringify(e)),Promise.resolve(r)}},{key:"_findEntries",value:function(t){for(var e=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);if(0===r.indexOf(t))try{var o=JSON.parse(localStorage.getItem(r));o.urlStorageKey=r,e.push(o)}catch(t){}}return e}}],n&&L(e.prototype,n),t}();function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e,n){return e&&N(t.prototype,e),n&&N(t,n),t}var H=function(){function t(){F(this,t)}return M(t,[{key:"createRequest",value:function(t,e){return new q(t,e)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),t}(),q=function(){function t(e,n){F(this,t),this._xhr=new XMLHttpRequest,this._xhr.open(e,n,!0),this._method=e,this._url=n,this._headers={}}return M(t,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(t,e){this._xhr.setRequestHeader(t,e),this._headers[t]=e}},{key:"getHeader",value:function(t){return this._headers[t]}},{key:"setProgressHandler",value:function(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(e){e.lengthComputable&&t(e.loaded)})}},{key:"send",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n,r){t._xhr.onload=function(){n(new z(t._xhr))},t._xhr.onerror=function(t){r(t)},t._xhr.send(e)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}(),z=function(){function t(e){F(this,t),this._xhr=e}return M(t,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}(),K=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var J=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._file=e,this.size=e.size}var e,n;return e=t,(n=[{key:"slice",value:function(t,e){if("undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova))return n=this._file.slice(t,e),new Promise((function(t,e){var r=new FileReader;r.onload=function(){var e=new Uint8Array(r.result);t({value:e})},r.onerror=function(t){e(t)},r.readAsArrayBuffer(n)}));var n,r=this._file.slice(t,e);return Promise.resolve({value:r})}},{key:"close",value:function(){}}])&&$(e.prototype,n),t}();function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function V(t){return void 0===t?0:void 0!==t.size?t.size:t.length}var Y=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._chunkSize=n,this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}var e,n;return e=t,(n=[{key:"slice",value:function(t,e){return t<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,e)}},{key:"_readUntilEnoughDataOrDone",value:function(t,e){var n=this,r=e<=this._bufferOffset+V(this._buffer);if(this._done||r){var o=this._getDataFromBuffer(t,e),i=null==o&&this._done;return Promise.resolve({value:o,done:i})}return this._reader.read().then((function(r){var o=r.value;return r.done?n._done=!0:void 0===n._buffer?n._buffer=o:n._buffer=function(t,e){if(t.concat)return t.concat(e);if(t instanceof Blob)return new Blob([t,e],{type:t.type});if(t.set){var n=new t.constructor(t.length+e.length);return n.set(t),n.set(e,t.length),n}throw new Error("Unknown data type")}(n._buffer,o),n._readUntilEnoughDataOrDone(t,e)}))}},{key:"_getDataFromBuffer",value:function(t,e){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var n=0===V(this._buffer);return this._done&&n?null:this._buffer.slice(0,e-t)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])&&W(e.prototype,n),t}();function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var X=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"openFile",value:function(t,e){return K()&&t&&void 0!==t.uri?(n=t.uri,new Promise((function(t,e){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var e=r.response;t(e)},r.onerror=function(t){e(t)},r.open("GET",n),r.send()}))).then((function(t){return new J(t)})).catch((function(t){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(t))})):"function"==typeof t.slice&&void 0!==t.size?Promise.resolve(new J(t)):"function"==typeof t.read?(e=+e,isFinite(e)?Promise.resolve(new Y(t,e)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"));var n}}])&&G(e.prototype,n),t}();function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function et(t,e){return et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},et(t,e)}function nt(t,e){return!e||"object"!==Z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(n),!0).forEach((function(e){at(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function at(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var st=it(it({},R.defaultOptions),{},{httpStack:new H,fileReader:new X,urlStorage:j?new T:new B,fingerprint:function(t,e){return K()?Promise.resolve(function(t,e){var n=t.exif?function(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e}(JSON.stringify(t.exif)):"noexif";return["tus-rn",t.name||"noname",t.size||"nosize",n,e.endpoint].join("/")}(t,e)):Promise.resolve(["tus-br",t.name,t.type,t.size,t.lastModified,e.endpoint].join("-"))}}),ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&et(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=rt(r);if(o){var n=rt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return nt(this,t)});function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Q(this,a),e=it(it({},st),e),i.call(this,t,e)}return e=a,n=[{key:"terminate",value:function(t,e,n){return e=it(it({},st),e),R.terminate(t,e,n)}}],null&&tt(e.prototype,null),n&&tt(e,n),a}(R),lt=window,ut=lt.XMLHttpRequest,ht=lt.Blob,ft=(ut&&ht&&ht.prototype.slice,n(8102)),pt=n.n(ft),dt=n(6470),yt=n.n(dt),mt=n(8764),gt=n(4078),wt=n.n(gt);const vt="hns://",bt="sia://";function Et(t,e){const n=new URL(t);return n.hostname=`${e}.${n.hostname}`,Vt(n.toString(),"/")}function xt(t,e){const n=a()(t,!0);return e={...n.query,...e},n.set("query",e),n.toString()}function kt(t){return"localhost"===t?"http://localhost/":/^https?:(\/\/)?/i.test(t)?t:`https://${t}`}function _t(...t){return 0===t.length&&Kt("args",t,"parameter","non-empty"),(0,r.ensureUrl)(t.reduce(((t,e)=>wt()(t,e))))}function Ut(t,e){let n,r;return Nt("portalUrl",t,"parameter"),Nt("domain",e,"parameter"),t=kt(Yt(t,"http://")),e=Jt(e=Yt(e,bt)),[e,n]=e.split(/\/(.+)/),r="localhost"===e?"localhost":Et(t,e),n&&(r=function(t,e){let n;if(Nt("url",t,"parameter"),Nt("path",e,"parameter"),e=Jt(e),"localhost"===t)n=`localhost/${e}`;else{const r=new URL(t);r.pathname=e,n=r.toString()}return Vt(n,"/")}(r,n)),r}function At(t,e){let n;Nt("portalUrl",t,"parameter"),Nt("fullDomain",e,"parameter");try{const t=new URL(e);e=t.hostname,n=t.pathname,n=Jt(n)}catch{e=Jt(e),[e,n]=e.split(/\/(.+)/),e=e.toLowerCase()}let r=Vt(e,Jt(new URL(kt(t)).hostname),1);return r=Vt(r,"."),n&&""!==n&&(n=Jt(n),r=`${r}/${n}`),r}const St={fromSubdomain:!1,includePath:!1,onlyPath:!1},Pt="([a-zA-Z0-9_-]{46})",Ot=new RegExp(`^${Pt}$`),Rt=new RegExp(`^/?${Pt}((/.*)?)$`),Ct=new RegExp("^([a-z0-9_-]{55})(\\..*)?$");function Bt(t,e){Nt("skylinkUrl",t,"parameter"),jt("customOptions",e,"parameter",St);const n={...St,...e};if(n.includePath&&n.onlyPath)throw new Error("The includePath and onlyPath options cannot both be set");if(n.includePath&&n.fromSubdomain)throw new Error("The includePath and fromSubdomain options cannot both be set");if(n.fromSubdomain)return function(t,e){const n={...St,...e},r=a()(t,{}),o=r.hostname.match(Ct);return o?n.onlyPath?Vt(r.pathname,"/"):o[1]:null}(t,n);const r=(t=Yt(t,bt)).match(Ot);if(r)return n.onlyPath?"":r[1];const o=Vt(a()(t,{}).pathname,"/"),i=o.match(Rt);if(!i)return null;const s=i[2];return n.includePath?Jt(o):n.onlyPath?s:i[1]}function Lt(t,e,n){"bigint"!=typeof e&&Kt(t,e,n,"type 'bigint'")}function Dt(t,e,n){Tt(t,e,n),Number.isInteger(e)||Kt(t,e,n,"an integer value")}function It(t,e,n){"object"!=typeof e&&Kt(t,e,n,"type 'object'"),null===e&&Kt(t,e,n,"non-null")}function jt(t,e,n,r){if(e){It(t,e,n);for(const o in e)if(!(o in r))throw new Error(`Object ${n} '${t}' contains unexpected property '${o}'`)}}function Tt(t,e,n){"number"!=typeof e&&Kt(t,e,n,"type 'number'")}function Ft(t,e,n){Nt(t,e,n);const r=Bt(e);if(null===r)throw $t(t,e,n,"valid skylink of type 'string'");return r}function Nt(t,e,n){"string"!=typeof e&&Kt(t,e,n,"type 'string'")}function Mt(t,e,n,r){Nt(t,e,n);const o=e.length;o!==r&&Kt(t,e,n,`type 'string' of length ${r}, was length ${o}`)}function Ht(t,e,n){Nt(t,e,n),Qt(e)||Kt(t,e,n,"a hex-encoded string")}function qt(t,e,n){e instanceof Uint8Array||Kt(t,e,n,"type 'Uint8Array'")}function zt(t,e,n,r){qt(t,e,n);const o=e.length;o!==r&&Kt(t,e,n,`type 'Uint8Array' of length ${r}, was length ${o}`)}function Kt(t,e,n,r){throw $t(t,e,n,r)}function $t(t,e,n,r){let o;return o=void 0===e?"type 'undefined'":null===e?"type 'null'":`type '${typeof e}', value '${e}'`,new Error(`Expected ${n} '${t}' to be ${r}, was ${o}`)}function Jt(t){return Wt(Vt(t,"/"),"/")}function Wt(t,e,n){for(;t.startsWith(e)&&!(void 0!==n&&n<=0);)t=t.slice(e.length),n&&(n-=1);return t}function Vt(t,e,n){for(;t.endsWith(e)&&!(void 0!==n&&n<=0);)t=t.substring(0,t.length-e.length),n&&(n-=1);return t}function Yt(t,e){const n=e.toLowerCase(),r=Vt(n,"/"),o=t.toLowerCase();return o.startsWith(n)?t.slice(n.length):o.startsWith(r)?t.slice(r.length):t}function Gt(t){return Nt("str",t,"parameter"),Uint8Array.from(mt.Buffer.from(t,"utf-8"))}function Xt(t){return mt.Buffer.from(t).toString("utf-8")}function Zt(t){Ht("str",t,"parameter");const e=t.match(/.{1,2}/g);if(null===e)throw $t("str",t,"parameter","a hex-encoded string");return new Uint8Array(e.map((t=>parseInt(t,16))))}function Qt(t){return Nt("str",t,"parameter"),/^[0-9A-Fa-f]*$/g.test(t)}function te(t){let e="";return t.forEach((function(t){e+=("0"+(255&t).toString(16)).slice(-2)})),e}function ee(t){if(t.type)return t.type;let e=yt().extname(t.name);if(e=Wt(e,"."),""!==e){const t=pt().getType(e);if(t)return t}return""}const ne={APIKey:"",skynetApiKey:"",customUserAgent:"",customCookie:"",onDownloadProgress:void 0,onUploadProgress:void 0,loginFn:void 0};function re(t,e){const n={};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(!Object.prototype.hasOwnProperty.call(t,r))throw new Error(`Property '${r}' not found`);n[r]=t[r]}return n}n(1757);var oe=n(1191),ie=n(1798),ae=n.n(ie),se=n(780),ce=n(4501),le=n.n(ce),ue=n(1227),he=n.n(ue),fe=n(9742);const pe=BigInt("18446744073709551615");function de(t){if(Lt("int",t,"parameter"),t<BigInt(0))throw new Error(`Argument ${t} must be an unsigned 64-bit integer; was negative`);if(t>pe)throw new Error(`Argument ${t} does not fit in a 64-bit unsigned integer; exceeds 2^64-1`)}const ye="RFC4648-HEX";function me(t){return Mt("skylink",t,"parameter",Ue),t=(t=`${t}==`).replace(/-/g,"+").replace(/_/g,"/"),(0,fe.toByteArray)(t)}function ge(t){let e=(0,fe.fromByteArray)(t);return e=e.replace(/\+/g,"-").replace(/\//g,"_"),e.slice(0,-2)}function we(t){const e=t.length,n=new ArrayBuffer(8+e);new DataView(n).setUint32(0,e,!0);const r=new Uint8Array(n);return r.set(t,8),r}const ve=2*se.sign.publicKeyLength,be=(se.sign.secretKeyLength,se.sign.signatureLength);function Ee(...t){const e=(0,oe.blake2bInit)(32);return t.forEach((t=>(0,oe.blake2bUpdate)(e,t))),(0,oe.blake2bFinal)(e)}function xe(t){return Ee(function(t){const e=Gt(t),n=new Uint8Array(8+e.length);return n.set(function(t){const e=new Uint8Array(8);for(let n=0;n<e.length;n++){const r=255&t;e[n]=r,t>>=8}return e}(e.length)),n.set(e,8),n}(t))}function ke(t,e){let n;return n=e?Zt(t.dataKey):xe(t.dataKey),Ee(n,we(t.data),function(t){de(t);const e=new Uint8Array(8);for(let n=0;n<e.length;n++){const r=t&BigInt(255);e[n]=Number(r),t>>=BigInt(8)}return e}(t.revision))}function _e(t){return"string"==typeof t?(0,se.hash)(Gt(t)):(0,se.hash)(t)}const Ue=46,Ae=34,Se=new Uint8Array(Ae);class Pe{constructor(t,e){this.bitfield=t,this.merkleRoot=e,Tt("bitfield",t,"constructor parameter"),zt("merkleRoot",e,"constructor parameter",32)}toBytes(){const t=new ArrayBuffer(Ae);new DataView(t).setUint16(0,this.bitfield,!0);const e=new Uint8Array(t);return e.set(this.merkleRoot,2),e}toString(){return ge(this.toBytes())}static fromBytes(t){zt("data",t,"parameter",Ae);const e=new DataView(t.buffer).getUint16(0,!0),n=new Uint8Array(32);return n.set(t.slice(2)),new Pe(e,n)}static fromString(t){const e=Be(t);return Pe.fromBytes(e)}}class Oe{constructor(t,e){this.algorithm=t,this.key=e}marshalSia(){const t=new Uint8Array(56);return t.set(this.algorithm),t.set(we(this.key),16),t}}function Re(t){Ht("publicKey",t,"parameter");const e=function(t){Nt("name",t,"parameter");const e=new Uint8Array(16);return e.set(Gt(t)),e}("ed25519"),n=Zt(t);return zt("publicKeyBytes",n,"converted publicKey",32),new Oe(e,n)}function Ce(t,e){const n=function(t,e){return Ee(t.marshalSia(),e)}(t,e);return new Pe(1,n)}function Be(t){let e;if(55===(t=Yt(t,bt)).length)e=function(t){Mt("skylink",t,"parameter",55),t=t.toUpperCase();const e=le()(t,ye);return new Uint8Array(e)}(t);else{if(t.length!==Ue)throw new Error("skylink has incorrect size");e=me(t)}if(e.length!=Ae)throw new Error("failed to load skylink data");return e}function Le(t){return Nt("skylink",t,"parameter"),""===t||t.startsWith(bt)||(t=`sia://${t}`),t}function De(t,e,n,r){const o={...t};return e&&(o["User-Agent"]=e),n&&(o.Cookie=n),r&&(o["Skynet-Api-Key"]=r),o}async function Ie(t,e){let n;return n=e.baseUrl?e.baseUrl:await t.portalUrl(),n=kt(n),e.endpointPath&&(n=_t(n,e.endpointPath)),e.extraPath&&(n=_t(n,e.extraPath)),e.subdomain&&(n=Et(n,e.subdomain)),e.query&&(n=xt(n,e.query)),n}class je extends Error{constructor(t,e,n,r){if(e instanceof je)throw new Error("Could not instantiate an `ExecuteRequestError` from an `ExecuteRequestError`, an original error from axios was expected");super(t),this.name="ExecuteRequestError",this.originalError=e,this.responseStatus=n,this.responseMessage=r,this.config=e.config,this.code=e.code,this.request=e.request,this.response=e.response,this.isAxiosError=e.isAxiosError,this.toJSON=e.toJSON,Object.setPrototypeOf(this,je.prototype)}static From(t){if(!t.response)return new je("Error response did not contain expected field 'response'.",t,null,null);if(!t.response.status)return new je("Error response did not contain expected field 'response.status'.",t,null,null);const e=t.response.status;return t.response.data&&t.response.data.message?new je(`Request failed with status code ${t.response.status}: ${t.response.data.message}`,t,e,t.response.data.message):new je(`Request failed with status code ${e}`,t,e,null)}}const Te=41943040,Fe="file",Ne={...ne,endpointUpload:"/skynet/skyfile",endpointLargeUpload:"/skynet/tus",chunkSizeMultiplier:3,customFilename:"",errorPages:void 0,largeFileSize:Te,numParallelUploads:2,staggerPercent:50,retryDelays:[0,5e3,15e3,6e4,3e5,6e5],tryFiles:void 0};async function Me(t,e){const n={...Ne,...this.customOptions,...e};return t.size<n.largeFileSize*n.chunkSizeMultiplier?this.uploadSmallFile(t,n):this.uploadLargeFile(t,n)}async function He(t,e){const n=await this.uploadSmallFileRequest(t,e);return Ye(n),{skylink:Le(n.data.skylink)}}async function qe(t,e){Ve("file",t,"parameter"),jt("customOptions",e,"parameter",Ne);const n={...Ne,...this.customOptions,...e},r=new FormData;return t=We(t),n.customFilename?r.append(Fe,t,n.customFilename):r.append(Fe,t),await this.executeRequest({...n,endpointPath:n.endpointUpload,method:"post",data:r})}async function ze(t,e){const n=await this.uploadLargeFileRequest(t,e);!function(t){try{if(!t.headers)throw new Error("response.headers field missing");Nt('response.headers["skynet-skylink"]',t.headers["skynet-skylink"],"upload response field")}catch(t){throw new Error(`Did not get a complete upload response despite a successful request. Please try again and report this issue to the devs if it persists. Error: ${t}`)}}(n);let r=n.headers["skynet-skylink"];return r=Le(r),{skylink:r}}async function Ke(t,e){Ve("file",t,"parameter"),jt("customOptions",e,"parameter",Ne);const n={...Ne,...this.customOptions,...e};if(void 0!==n.staggerPercent&&null!==n.staggerPercent&&(n.staggerPercent<0||n.staggerPercent>100))throw new Error(`Expected 'staggerPercent' option to be between 0 and 100, was '${n.staggerPercent}`);n.chunkSizeMultiplier<1&&Kt("opts.chunkSizeMultiplier",n.chunkSizeMultiplier,"option","greater than or equal to 1"),Dt("opts.chunkSizeMultiplier",n.chunkSizeMultiplier,"option"),n.numParallelUploads<1&&Kt("opts.numParallelUploads",n.numParallelUploads,"option","greater than or equal to 1"),Dt("opts.numParallelUploads",n.numParallelUploads,"option");const r=await Ie(this,{endpointPath:n.endpointLargeUpload}),o=De(void 0,n.customUserAgent,n.customCookie,n.skynetApiKey);let i=(t=We(t)).name;n.customFilename&&(i=n.customFilename);const a=n.onUploadProgress&&function(t,e){const r=t/e;n.onUploadProgress(r,{loaded:t,total:e})};let s=n.numParallelUploads;const c=Te*n.chunkSizeMultiplier;let l=null,u=null;const h=Math.ceil(t.size/Te);return s>h&&(s=h),s>1&&(l=(t,e)=>function(t,e,n){e<1&&Kt("partCount",e,"parameter","greater than or equal to 1"),n<1&&Kt("chunkSize",n,"parameter","greater than or equal to 1"),t<=n&&Kt("totalSize",t,"parameter",`greater than the size of a chunk ('${n}')`);const r=new Array(e).fill(0),o=Math.floor(t/n);for(let t=0;t<o;t++)r[t%e]+=n;const i=t%n;i>0&&(r[Math.min(o,e-1)]+=i);const a=[];let s=0;for(let t=0;t<e;t++)a.push({start:s,end:s+r[t]}),s=a[t].end;return a}(t,e,c),u=n.staggerPercent),new Promise(((e,h)=>{const f={endpoint:r,chunkSize:c,retryDelays:n.retryDelays,metadata:{filename:i,filetype:t.type},parallelUploads:s,staggerPercent:u,splitSizeIntoParts:l,headers:o,onProgress:a,onBeforeRequest:function(t){t.getUnderlyingObject().withCredentials=!0},onError:t=>{const e=t.originalResponse,n=e&&new Error(e.getBody().trim())||t;h(n)},onSuccess:async()=>{if(p.url)try{const t=await this.executeRequest({...n,url:p.url,method:"head",headers:{...o,"tus-resumable":"1.0.0"}});e(t)}catch(t){h(t)}else h(new Error("'upload.url' was not set"))}},p=new ct(t,f);p.start()}))}async function $e(t,e,n){const r=await this.uploadDirectoryRequest(t,e,n);return Ye(r),{skylink:Le(r.data.skylink)}}async function Je(t,e,n){It("directory",t,"parameter"),Nt("filename",e,"parameter"),jt("customOptions",n,"parameter",Ne);const r={...Ne,...this.customOptions,...n},o=new FormData;Object.entries(t).forEach((([t,e])=>{e=We(e),o.append("files[]",e,t)}));const i={filename:e};return r.tryFiles&&(i.tryfiles=JSON.stringify(r.tryFiles)),r.errorPages&&(i.errorpages=JSON.stringify(r.errorPages)),await this.executeRequest({...r,endpointPath:r.endpointUpload,method:"post",data:o,query:i})}function We(t){return new File([t],t.name,{type:ee(t)})}function Ve(t,e,n){e instanceof File||Kt(t,e,n,"type 'File'")}function Ye(t){try{if(!t.data)throw new Error("response.data field missing");Nt("skylink",t.data.skylink,"upload response field")}catch(t){throw new Error(`Did not get a complete upload response despite a successful request. Please try again and report this issue to the devs if it persists. ${t}`)}}const Ge={...ne,endpointGetEntry:"/skynet/registry",hashedDataKeyHex:!1},Xe={...ne,endpointSetEntry:"/skynet/registry",hashedDataKeyHex:!1},Ze=/"revision":\s*([0-9]+)/,Qe=/"revision":\s*"([0-9]+)"/,tn="ed25519:";async function en(t,e,n){const r={...Ge,...this.customOptions,...n},o=await this.registry.getEntryUrl(t,e,r);let i;try{i=await this.executeRequest({...r,url:o,method:"get",transformResponse:function(t){if(void 0===t)return{};t=t.replace(Ze,'"revision":"$1"');try{return JSON.parse(t)}catch{return t}}})}catch(t){return function(t){if(404===t.responseStatus)return{entry:null,signature:null};throw t}(t)}try{Nt("response.data.data",i.data.data,"entry response field"),Nt("response.data.revision",i.data.revision,"entry response field"),Nt("response.data.signature",i.data.signature,"entry response field")}catch(t){throw new Error(`Did not get a complete entry response despite a successful request. Please try again and report this issue to the devs if it persists. Error: ${t}`)}const a=BigInt(i.data.revision),s=mt.Buffer.from(Zt(i.data.signature));let c=new Uint8Array([]);i.data.data&&(c=Zt(i.data.data));const l={entry:{dataKey:e,data:c,revision:a},signature:s},u=new Uint8Array(l.signature),h=Zt(t);if(zt("signatureArray",u,"response value",be),zt("publicKeyArray",h,"response value",ve/2),se.sign.detached.verify(ke(l.entry,r.hashedDataKeyHex),u,h))return l;throw new Error("Could not verify signature from retrieved, signed registry entry -- possible corrupted entry")}async function nn(t,e,n){const r={...Ge,...this.customOptions,...n};return function(t,e,n,r){Nt("portalUrl",t,"parameter"),ln("publicKey",e,"parameter"),Nt("dataKey",n,"parameter"),jt("customOptions",r,"parameter",Ge);const o={...Ge,...r};let i=n;o.hashedDataKeyHex||(i=te(xe(n)));const a={publickey:(s=e,c=tn,s.startsWith(c)||(s=`${c}${s}`),s),datakey:i,timeout:5..toString()};var s,c;let l=_t(t,o.endpointGetEntry);return l=xt(l,a),l}(await this.portalUrl(),t,e,r)}function rn(t,e,n){ln("publicKey",t,"parameter"),Nt("dataKey",e,"parameter"),jt("customOptions",n,"parameter",Ge);const r={...Ge,...n},o=Re(Wt(t,tn));let i;return i=r.hashedDataKeyHex?Zt(e):xe(e),Le(Ce(o,i).toString())}async function on(t,e,n){ln("publicKey",t,"parameter"),Nt("dataKey",e,"parameter"),jt("customOptions",n,"parameter",Ge);const r={...Ge,...n},o=Re(Wt(t,tn));let i;return i=r.hashedDataKeyHex?Zt(e):xe(e),Le(Ce(o,i).toString())}async function an(t,e,n){Ht("privateKey",t,"parameter"),cn("entry",e,"parameter"),jt("customOptions",n,"parameter",Xe),de(e.revision);const r={...Xe,...this.customOptions,...n},o=Zt(t),i=await async function(t,e,n){const r=Zt(t);return se.sign.detached(ke(e,n),r)}(t,e,r.hashedDataKeyHex),{publicKey:a}=se.sign.keyPair.fromSecretKey(o);return await this.registry.postSignedEntry(te(a),e,i,r)}async function sn(t,e,n,r){Ht("publicKey",t,"parameter"),cn("entry",e,"parameter"),qt("signature",n,"parameter"),jt("customOptions",r,"parameter",Xe);const o={...Xe,...this.customOptions,...r};let i=e.dataKey;o.hashedDataKeyHex||(i=te(xe(i)));const a=Array.from(e.data),s={publickey:{algorithm:"ed25519",key:Array.from(Zt(t))},datakey:i,revision:e.revision.toString(),data:a,signature:Array.from(n)};await this.executeRequest({...o,endpointPath:o.endpointSetEntry,method:"post",data:s,transformRequest:function(t){return JSON.stringify(t).replace(Qe,'"revision":$1')}})}function cn(t,e,n){It(t,e,n),Nt(`${t}.dataKey`,e.dataKey,`${n} field`),qt(`${t}.data`,e.data,`${n} field`),Lt(`${t}.revision`,e.revision,`${n} field`)}function ln(t,e,n){Qt(Wt(e,tn))||Kt(t,e,n,"a hex-encoded string with a valid prefix")}const un={...ne,endpointDownload:"/",download:!1,path:void 0,range:void 0,responseType:void 0,subdomain:!1},hn={...ne,endpointGetMetadata:"/skynet/metadata"},fn={...un,endpointDownloadHns:"hns",hnsSubdomain:"hns",subdomain:!0},pn={...ne,endpointResolveHns:"hnsres"};async function dn(t,e){const n={...un,...this.customOptions,...e,download:!0},r=await this.getSkylinkUrl(t,n);return window.location.assign(r),r}async function yn(t,e){const n={...fn,...this.customOptions,...e,download:!0},r=await this.getHnsUrl(t,n);return window.location.assign(r),r}async function mn(t,e){const n={...un,...this.customOptions,...e};return function(t,e,n){var r;Nt("portalUrl",t,"parameter"),Nt("skylinkUrl",e,"parameter"),jt("customOptions",n,"parameter",un);const o={...un,...n},i=On(o.download);let a,s="";if(o.path){if("string"!=typeof o.path)throw new Error(`opts.path has to be a string, ${typeof o.path} provided`);s=o.path.split("/").map((t=>encodeURIComponent(t))).join("/")}if(o.subdomain){const n=null!==(r=Bt(e,{onlyPath:!0}))&&void 0!==r?r:"";let o=Bt(e);if(null===o)throw new Error(`Could not get skylink out of input '${e}'`);o=function(t){return Mt("skylink",t=Yt(t,bt),"parameter",Ue),e=me(t),he()(e,ye,{padding:!1}).toLowerCase();var e}(o),a=Et(t,o),a=_t(a,n,s)}else{const n=Bt(e,{includePath:!0});if(null===n)throw new Error(`Could not get skylink with path out of input '${e}'`);a=_t(t,o.endpointDownload,n),a=_t(a,s)}return xt(a,i)}(await this.portalUrl(),t,n)}async function gn(t,e){Nt("domain",t,"parameter"),jt("customOptions",e,"parameter",fn);const n={...fn,...this.customOptions,...e},r=On(n.download);let o,i,a;return t=Yt(t,vt),n.subdomain?o=`${t}.${n.hnsSubdomain}`:(i=n.endpointDownloadHns,a=t),Ie(this,{endpointPath:i,extraPath:a,subdomain:o,query:r})}async function wn(t,e){Nt("domain",t,"parameter"),jt("customOptions",e,"parameter",pn);const n={...pn,...this.customOptions,...e};return t=Yt(t,vt),Ie(this,{endpointPath:n.endpointResolveHns,extraPath:t})}async function vn(t,e){jt("customOptions",e,"parameter",hn);const n={...hn,...this.customOptions,...e};if(Bt(t,{onlyPath:!0}))throw new Error("Skylink string should not contain a path");const r={endpointDownload:n.endpointGetMetadata},o=await this.getSkylinkUrl(t,r),i=await this.executeRequest({...n,method:"GET",url:o});return function(t,e){try{if(!t.data)throw new Error("'response.data' field missing");if(!t.headers)throw new Error("'response.headers' field missing");const n=t.headers["skynet-portal-api"];if(!n)throw new Error("'skynet-portal-api' header missing");Nt('response.headers["skynet-portal-api"]',n,"getMetadata response header");const r=t.headers["skynet-skylink"];if(!r)throw new Error("'skynet-skylink' header missing");Ft('response.headers["skynet-skylink"]',r,"getMetadata response header"),Ln(e,r,t.headers["skynet-proof"])}catch(t){throw new Error(`Metadata response invalid despite a successful request. Please try again and report this issue to the devs if it persists. ${t}`)}}(i,Bt(t)),{metadata:i.data,portalUrl:i.headers["skynet-portal-api"],skylink:Le(i.headers["skynet-skylink"])}}async function bn(t,e){const n=await this.getFileContentRequest(t,e),r=Bt(t);return Ft("inputSkylink",r,"parsed skylink"),Bn(n,r),await Rn(n)}async function En(t,e){Cn(e),e={...e,responseType:"arraybuffer"};const n=await this.getFileContent(t,e);return{...n,data:new Uint8Array(n.data)}}async function xn(t,e){const n={...un,...this.customOptions,...e},r=await this.getSkylinkUrl(t,n),o=Pn(n.range);return await this.executeRequest({...n,method:"get",url:r,subdomain:void 0,headers:o})}async function kn(t,e){const n={...fn,...this.customOptions,...e},r=await this.getHnsUrl(t,n),o=Pn(n.range),[i,{skylink:a}]=await Promise.all([this.executeRequest({...n,method:"get",url:r,headers:o,subdomain:void 0}),this.resolveHns(t)]),s=Bt(a);return Ft("inputSkylink",s,"parsed skylink"),Bn(i,s),await Rn(i)}async function _n(t,e){Cn(e),e={...e,responseType:"arraybuffer"};const n=await this.getFileContentHns(t,e);return{...n,data:new Uint8Array(n.data)}}async function Un(t,e){const n={...un,...this.customOptions,...e},r=await this.getSkylinkUrl(t,n);return window.open(r,"_blank"),r}async function An(t,e){const n={...fn,...this.customOptions,...e},r=await this.getHnsUrl(t,n);return window.open(r,"_blank"),r}async function Sn(t,e){const n={...pn,...this.customOptions,...e},r=await this.getHnsresUrl(t,n),o=await this.executeRequest({...n,method:"get",url:r});if(function(t){try{if(!t.data)throw new Error("'response.data' field missing");t.data.skylink?Ft("response.data.skylink",t.data.skylink,"resolveHns response field"):t.data.registry?(It("response.data.registry",t.data.registry,"resolveHns response field"),Nt("response.data.registry.publickey",t.data.registry.publickey,"resolveHns response field"),Nt("response.data.registry.datakey",t.data.registry.datakey,"resolveHns response field")):Kt("response.data",t.data,"response data object","object containing skylink or registry field")}catch(t){throw new Error(`Did not get a complete resolve HNS response despite a successful request. Please try again and report this issue to the devs if it persists. ${t}`)}}(o),o.data.skylink)return{data:o.data,skylink:o.data.skylink};{const t=rn(o.data.registry.publickey,o.data.registry.datakey,{hashedDataKeyHex:!0});return{data:o.data,skylink:t}}}function Pn(t){const e={};return t&&(e.range=t),e}function On(t){const e={};return t&&(e.attachment="true"),e}async function Rn(t){const e=t.headers["content-type"],n=t.headers["skynet-portal-api"],r=Le(t.headers["skynet-skylink"]);return{data:t.data,contentType:e,portalUrl:n,skylink:r}}function Cn(t){const e=null==t?void 0:t.responseType;if(void 0!==e&&"arraybuffer"!==e)throw new Error(`Unexpected 'responseType' option found for 'getFileContentBinary': '${e}'`)}function Bn(t,e){try{if(!t.data&&""!==t.data)throw new Error("'response.data' field missing");if(!t.headers)throw new Error("'response.headers' field missing");const n=t.headers["content-type"];if(!n)throw new Error("'content-type' header missing");Nt('response.headers["content-type"]',n,"getFileContent response header");const r=t.headers["skynet-portal-api"];if(!r)throw new Error("'skynet-portal-api' header missing");Nt('response.headers["skynet-portal-api"]',r,"getFileContent response header");const o=t.headers["skynet-skylink"];if(!o)throw new Error("'skynet-skylink' header missing");Ft('response.headers["skynet-skylink"]',o,"getFileContent response header"),Ln(e,o,t.headers["skynet-proof"])}catch(t){throw new Error(`File content response invalid despite a successful request. Please try again and report this issue to the devs if it persists. ${t}`)}}function Ln(t,e,n){let r=[];try{if(n&&(r=JSON.parse(n),!r))throw new Error("Could not parse 'skynet-proof' header as JSON")}catch(t){throw new Error(`Could not parse 'skynet-proof' header as JSON: ${t}`)}if(function(t){const e=Be(t);return 0==(3&new DataView(e.buffer).getUint16(0,!0))}(t)){if(t!==e)throw new Error(`Expected returned skylink ('${e}') to be the same as input data link ('${t}')`);if(n)throw new Error("Expected 'skynet-proof' header to be empty for data link")}else{if(t===e)throw new Error(`Expected returned skylink ('${e}') to be different from input entry link`);!function(t,e){let n,r=null==e?void 0:e.resolverSkylink;const o=null==e?void 0:e.skylink;if(0===t.length)throw new Error("Expected registry proof not to be empty");for(const e of t){if(1!==e.type)throw new Error(`Unsupported registry type in proof: '${e.type}'`);const t=e.publickey.key,o=(0,fe.toByteArray)(t),i=te(o),a=e.datakey,s=e.data,c=Zt(e.signature);let l=rn(i,a,{hashedDataKeyHex:!0});if(l=Yt(l,bt),r&&l!==r)throw new Error("Could not verify registry proof chain");n||(n=l);const u=Zt(s),h=ge(u),f={dataKey:a,data:u,revision:BigInt(e.revision)};if(zt("signatureArray",c,"response value",be),zt("publicKeyArray",o,"parameter",ve/2),!se.sign.detached.verify(ke(f,!0),c,o))throw new Error("Could not verify signature from retrieved, signed registry entry in registry proof");r=h}if(o&&r!==o)throw new Error("Could not verify registry proof chain")}(r,{resolverSkylink:t,skylink:e})}}function Dn(t,e){if(qt("data",t,"parameter"),zt("key",e,"parameter",32),!function(t){for(let e=0;e<53;e++)if(t<=80*(1<<e)*1024)return t%(4*(1<<e)*1024)==0;throw new Error("Could not check padded file size, overflow detected.")}(t.length))throw new Error(`Expected parameter 'data' to be padded encrypted data, length was '${t.length}', nearest padded block is '${Fn(t.length)}'`);const n=t.slice(0,24),r=(t=t.slice(24)).slice(0,16);t=t.slice(16);const o=(zt("bytes",i=r,"encrypted file metadata bytes",16),{version:i[0]});var i;if(1!==o.version)throw new Error(`Received unrecognized JSON response version '${o.version}' in metadata, expected '1'`);let a=se.secretbox.open(t,n,e);if(!a)throw new Error("Could not decrypt given encrypted JSON file");let s=a.length;for(;s>0&&0===a[s-1];)s--;return a=a.slice(0,s),JSON.parse(Xt(a))}function In(t,e,n){It("json",t,"parameter"),Tt("metadata.version",e.version,"parameter"),zt("key",n,"parameter",32);let r=Gt(JSON.stringify(t));const o=Fn(r.length+56)-56;r=new Uint8Array([...r,...new Uint8Array(o-r.length)]);const i=new Uint8Array(ae()(24)),a=(0,se.secretbox)(r,i,n),s=function(t){const e=new Uint8Array(16);if(t.version>=256||t.version<0)throw new Error(`Metadata version '${t.version}' could not be stored in a uint8`);return e[0]=t.version,e}(e),c=new Uint8Array([...s,...a]);return new Uint8Array([...i,...c])}function jn(t){const e=Nn(t),n=new Uint8Array([..._e("encryption"),..._e(e)]);return _e(n).slice(0,32)}function Tn(t){const e=Nn(t);let n=_e(new Uint8Array([..._e("encrypted filesystem tweak"),..._e(e)]));return n=n.slice(0,32),te(n)}function Fn(t){for(let e=0;e<53;e++)if(t<=80*(1<<e)*1024){const n=4*(1<<e)*1024;let r=t;return r%n!=0&&(r=t-t%n+n),r}throw new Error("Could not pad file size, overflow detected.")}function Nn(t){return Ht("pathSeed",t,"parameter"),64!==t.length&&Kt("pathSeed",t,"parameter","a valid file path seed of length '64'"),Gt(t)}function Mn(t){return te(new Hn(t).getHash())}class Hn{constructor(t){const e=function(t){return t.split("/")}(t),n=e.map(qn);this.version=1,this.path=n}encode(){const t=1+32*this.path.length,e=new Uint8Array(t);e.set([this.version]);let n=1;for(const t of this.path)e.set(t,n),n+=32;return e}getHash(){return Ee(this.encode())}}function qn(t){return Ee(Gt(t))}function zn(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}const Kn="@post-me";function $n(){let t=0;return function(){const e=t;return t+=1,e}}class Jn{constructor(){this._listeners={}}addEventListener(t,e){let n=this._listeners[t];n||(n=new Set,this._listeners[t]=n),n.add(e)}removeEventListener(t,e){let n=this._listeners[t];n&&n.delete(e)}once(t){return new Promise((e=>{const n=r=>{this.removeEventListener(t,n),e(r)};this.addEventListener(t,n)}))}emit(t,e){let n=this._listeners[t];n&&n.forEach((t=>{t(e)}))}removeAllListeners(){Object.values(this._listeners).forEach((t=>{t&&t.clear()}))}}var Wn,Vn;function Yn(t){return t&&t.type===Kn}function Gn(t){return`callback_${t}`}function Xn(t){return`response_${t}`}!function(t){t.HandshakeRequest="handshake-request",t.HandshakeResponse="handshake-response",t.Call="call",t.Response="response",t.Error="error",t.Event="event",t.Callback="callback"}(Wn||(Wn={}));class Zn extends Jn{constructor(t,e){super(),this.uniqueId=$n(),this.messenger=t,this.sessionId=e,this.removeMessengerListener=this.messenger.addMessageListener(this.messengerListener.bind(this))}messengerListener(t){const{data:e}=t;var n;Yn(e)&&this.sessionId===e.sessionId&&(Yn(n=e)&&n.action===Wn.Call?this.emit(Wn.Call,e):function(t){return Yn(t)&&t.action===Wn.Response}(e)?this.emit(Xn(e.requestId),e):function(t){return Yn(t)&&t.action===Wn.Event}(e)?this.emit(Wn.Event,e):function(t){return Yn(t)&&t.action===Wn.Callback}(e)&&this.emit(Gn(e.requestId),e))}callOnRemote(t,e,n){const r=this.uniqueId(),o=Gn(r),i=Xn(r),a=function(t,e,n,r){return{type:Kn,action:Wn.Call,sessionId:t,requestId:e,methodName:n,args:r}}(this.sessionId,r,t,e);return this.messenger.postMessage(a,n),{callbackEvent:o,responseEvent:i}}respondToRemote(t,e,n,r){n instanceof Error&&(n={name:n.name,message:n.message});const o=function(t,e,n,r){const o={type:Kn,action:Wn.Response,sessionId:t,requestId:e};return void 0!==n&&(o.result=n),void 0!==r&&(o.error=r),o}(this.sessionId,t,e,n);this.messenger.postMessage(o,r)}callbackToRemote(t,e,n){const r=function(t,e,n,r){return{type:Kn,action:Wn.Callback,sessionId:t,requestId:e,callbackId:n,args:r}}(this.sessionId,t,e,n);this.messenger.postMessage(r)}emitToRemote(t,e,n){const r=function(t,e,n){return{type:Kn,action:Wn.Event,sessionId:t,eventName:e,payload:n}}(this.sessionId,t,e);this.messenger.postMessage(r,n)}close(){this.removeMessengerListener(),this.removeAllListeners()}}class Qn extends Jn{constructor(t,e){super(),this.messenger=t,this.sessionId=e,this.removeMessengerListener=this.messenger.addMessageListener(this.messengerListener.bind(this))}messengerListener(t){const{data:e}=t;var n;Yn(e)&&this.sessionId===e.sessionId&&Yn(n=e)&&n.action===Wn.HandshakeResponse&&this.emit(e.sessionId,e)}initiateHandshake(){const t=(e=this.sessionId,{type:Kn,action:Wn.HandshakeRequest,sessionId:e});var e;return this.messenger.postMessage(t),this.sessionId}close(){this.removeMessengerListener(),this.removeAllListeners()}}!function(t){t.Callback="callback"}(Vn||(Vn={}));class tr extends Jn{constructor(t){super(),this._dispatcher=t,this._callTransfer={},this._dispatcher.addEventListener(Wn.Event,this._handleEvent.bind(this))}close(){this.removeAllListeners()}setCallTransfer(t,e){this._callTransfer[t]=e}call(t,...e){return this.customCall(t,e)}customCall(t,e,n={}){return new Promise(((r,o)=>{const i=[],a=[];let s=0;e.forEach((t=>{"function"==typeof t?(a.push(t),i.push(function(t){return{type:Kn,proxy:Vn.Callback,callbackId:t}}(s)),s+=1):i.push(t)}));const c=a.length>0;let l;c&&(l=t=>{const{callbackId:e,args:n}=t;a[e](...n)});let u=n.transfer;void 0===u&&this._callTransfer[t]&&(u=this._callTransfer[t](...i));const{callbackEvent:h,responseEvent:f}=this._dispatcher.callOnRemote(t,i,u);c&&this._dispatcher.addEventListener(h,l),this._dispatcher.once(f).then((t=>{l&&this._dispatcher.removeEventListener(h,l);const{result:e,error:n}=t;void 0!==n?o(n):r(e)}))}))}_handleEvent(t){const{eventName:e,payload:n}=t;this.emit(e,n)}}class er{constructor(t,e){this._dispatcher=t,this._methods=e,this._returnTransfer={},this._emitTransfer={},this._dispatcher.addEventListener(Wn.Call,this._handleCall.bind(this))}emit(t,e,n={}){let r=n.transfer;void 0===r&&this._emitTransfer[t]&&(r=this._emitTransfer[t](e)),this._dispatcher.emitToRemote(t,e,r)}setMethods(t){this._methods=t}setMethod(t,e){this._methods[t]=e}setReturnTransfer(t,e){this._returnTransfer[t]=e}setEmitTransfer(t,e){this._emitTransfer[t]=e}_handleCall(t){const{requestId:e,methodName:n,args:r}=t;new Promise(((t,o)=>{if("function"!=typeof this._methods[n])return void o(new Error(`The method "${n}" has not been implemented.`));const i=r.map((t=>{if((n=t)&&n.type===Kn&&n.proxy===Vn.Callback){const{callbackId:n}=t;return(...t)=>{this._dispatcher.callbackToRemote(e,n,t)}}return t;var n}));Promise.resolve(this._methods[n](...i)).then(t).catch(o)})).then((t=>{let r;this._returnTransfer[n]&&(r=this._returnTransfer[n](t)),this._dispatcher.respondToRemote(e,t,void 0,r)})).catch((t=>{this._dispatcher.respondToRemote(e,void 0,t)}))}}class nr{constructor(t,e){this._dispatcher=t,this._localHandle=new er(t,e),this._remoteHandle=new tr(t)}close(){this._dispatcher.close(),this.remoteHandle().close()}localHandle(){return this._localHandle}remoteHandle(){return this._remoteHandle}}const rr=$n();function or(t,e={},n=5,r=100){const o=rr();let i=!1;return new Promise(((a,s)=>{const c=new Qn(t,o);c.once(o).then((n=>{i=!0,c.close();const{sessionId:r}=n,o=new Zn(t,r),s=new nr(o,e);a(s)})),((t,e,n,r,o)=>{let i=0;const a=()=>{!e()&&(i<r||r<1)?(c.initiateHandshake(),i+=1,setTimeout(a,o)):!e()&&i>=r&&r>=1&&s(new Error("Handshake failed, reached maximum number of attempts"))};a()})(0,(()=>i),0,n,r)}))}class ir{constructor({localWindow:t,remoteWindow:e,remoteOrigin:n}){t=t||window,this.postMessage=(t,r)=>{e.postMessage(t,n,r)},this.addMessageListener=r=>{const o=t=>{((t,e,n)=>{const{source:r,origin:o}=t;return r===e&&(o===n||"*"===n)})(t,e,n)&&r(t)};return t.addEventListener("message",o),()=>{t.removeEventListener("message",o)}}}}const ar={dev:!1,debug:!1,alpha:!1,handshakeMaxAttempts:r.defaultHandshakeMaxAttempts,handshakeAttemptsInterval:r.defaultHandshakeAttemptsInterval};class sr{constructor(t,e,n,r,o){this.url=t,this.client=e,this.childFrame=n,this.connection=r,this.options=o}static async init(t,e,n){const o={...ar,...n};let i=await t.getFullDomainUrl(e);o.dev&&(i=xt(i,{dev:"true"})),o.debug&&(i=xt(i,{debug:"true"})),o.alpha&&(i=xt(i,{alpha:"true"}));const a=(0,r.createIframe)(i,i);if(!a.contentWindow)throw new Error("'childFrame.contentWindow' was null");const s=a.contentWindow,c=new ir({localWindow:window,remoteWindow:s,remoteOrigin:"*"}),l=await or(c,{},o.handshakeMaxAttempts,o.handshakeAttemptsInterval);return new sr(i,t,a,l,o)}async call(t,...e){return this.connection.remoteHandle().call(t,...e)}}async function cr(t){return Ut(await this.portalUrl(),t)}async function lr(t){t=Jt(t);const e=Jt(await this.resolvePortalServerUrl());let n;try{n=new URL(e).hostname}catch(t){n=e}return t.endsWith(n)?At(e,t):At(await this.resolvePortalUrl(),t)}async function ur(t,e){Nt("path",t,"parameter"),jt("customOptions",e,"parameter",Yr);const n={...Yr,...this.connector.client.customOptions,...e},r=await this.userID(),o=Mn(t);return n.hashedDataKeyHex=!0,await this.connector.client.dbV2.getJSON(r,o,n)}async function hr(t){return Nt("path",t,"parameter"),rn(await this.userID(),Mn(t),{...Ge,hashedDataKeyHex:!0})}async function fr(t,e,n){Nt("path",t,"parameter"),It("json",e,"parameter"),jt("customOptions",n,"parameter",Gr);const r={...Gr,...this.connector.client.customOptions,...n},o=await this.userID(),i=Mn(t);return r.hashedDataKeyHex=!0,await this.connector.client.dbV2.revisionNumberCache.withCachedEntryLock(o,i,(async n=>{const a=so(n.revision),[s,c]=await ao(this.connector.client,i,e,a,r),l=await this.signRegistryEntry(s,t),u=re(r,Xe);return await this.connector.client.registry.postSignedEntry(o,s,l,u),{data:e,dataLink:c}}))}async function pr(t,e){const n={...Xr,...this.connector.client.customOptions,...e};await this.dbV2.setEntryData(t,Wr,{...n,allowDeletionEntryData:!0})}async function dr(t,e,n){const r=Be(Ft("dataLink",e,"parameter"));await this.dbV2.setEntryData(t,r,n)}async function yr(t,e){Nt("path",t,"parameter"),jt("customOptions",e,"parameter",Ge);const n={...Ge,...this.connector.client.customOptions,...e},r=await this.userID(),o=Mn(t);return n.hashedDataKeyHex=!0,await this.connector.client.dbV2.getEntryData(r,o,n)}async function mr(t,e,n){Nt("path",t,"parameter"),qt("data",e,"parameter"),jt("customOptions",n,"parameter",Xr);const r={...Xr,...this.connector.client.customOptions,...n};lo(e,r.allowDeletionEntryData);const o=await this.userID(),i=Mn(t);return r.hashedDataKeyHex=!0,await this.connector.client.dbV2.revisionNumberCache.withCachedEntryLock(o,i,(async n=>{const a=so(n.revision),s={dataKey:i,data:e,revision:a},c=await this.signRegistryEntry(s,t),l=re(r,Xe);return await this.connector.client.registry.postSignedEntry(o,s,c,l),{data:s.data}}))}async function gr(t,e){await this.dbV2.setEntryData(t,Wr,{...e,allowDeletionEntryData:!0})}async function wr(t,e){Nt("path",t,"parameter"),jt("customOptions",e,"parameter",Yr);const n={...Yr,...this.connector.client.customOptions,...e,hashedDataKeyHex:!0},[r,o]=await Promise.all([this.userID(),this.getEncryptedPathSeed(t,!1)]),i=Tn(o),{data:a}=await this.connector.client.dbV2.getRawBytes(r,i,n);return null===a?{data:null}:{data:Dn(a,jn(o))}}async function vr(t,e,n){Nt("path",t,"parameter"),It("json",e,"parameter"),jt("customOptions",n,"parameter",Gr);const r={...Gr,...this.connector.client.customOptions,...n},[o,i]=await Promise.all([this.userID(),this.getEncryptedPathSeed(t,!1)]),a=Tn(i);return r.hashedDataKeyHex=!0,await this.connector.client.dbV2.revisionNumberCache.withCachedEntryLock(o,a,(async n=>{const s=so(n.revision),c=jn(i),l=In(e,{version:1},c),[u]=await ao(this.connector.client,a,l,s,r),h=await this.signEncryptedRegistryEntry(u,t),f=re(r,Xe);return await this.connector.client.registry.postSignedEntry(o,u,h,f),{data:e}}))}async function br(t,e,n){ln("publicKey",t,"parameter"),Nt("dataKey",e,"parameter"),jt("customOptions",n,"parameter",Yr);const r={...Yr,...this.customOptions,...n},o=re(r,Ge),i=await Cr(this,t,e,o);if(null===i)return{data:null,dataLink:null};const{rawDataLink:a,dataLink:s}=Br(i.data,!0);if(co(a,r.cachedDataLink))return{data:null,dataLink:s};const c=re(r,un),{data:l}=await this.getFileContent(s,c);if("object"!=typeof l||null===l)throw new Error(`File data for the entry at data key '${e}' is not JSON.`);if(!l._data||!l._v)return{data:l,dataLink:s};const u=l._data;if("object"!=typeof u||null===l)throw new Error(`File data '_data' for the entry at data key '${e}' is not JSON.`);return{data:u,dataLink:s}}async function Er(t,e,n,r){Ht("privateKey",t,"parameter"),Nt("dataKey",e,"parameter"),It("json",n,"parameter"),jt("customOptions",r,"parameter",Gr);const o={...Gr,...this.customOptions,...r},{publicKey:i}=se.sign.keyPair.fromSecretKey(Zt(t)),[a,s]=await Or(this,te(i),e,n,o),c=re(o,Xe);return await this.registry.setEntry(t,a,c),{data:n,dataLink:Le(s)}}async function xr(t,e,n){const r={...Xr,...this.customOptions,...n};await this.db.setEntryData(t,e,Wr,{...r,allowDeletionEntryData:!0})}async function kr(t,e,n,r){const o=Be(Ft("dataLink",n,"parameter"));await this.db.setEntryData(t,e,o,r)}async function _r(t,e,n){ln("publicKey",t,"parameter"),Nt("dataKey",e,"parameter"),jt("customOptions",n,"parameter",Ge);const r={...Ge,...this.customOptions,...n},o=await Cr(this,t,e,r);return null===o?{data:null}:{data:o.data}}async function Ur(t,e,n,r){Ht("privateKey",t,"parameter"),Nt("dataKey",e,"parameter"),qt("data",n,"parameter"),jt("customOptions",r,"parameter",Xr);const o={...Xr,...this.customOptions,...r};lo(n,o.allowDeletionEntryData);const{publicKey:i}=se.sign.keyPair.fromSecretKey(Zt(t)),a=re(o,Ge),s=await Pr(this,te(i),e,n,a),c=re(o,Xe);return await this.registry.setEntry(t,s,c),{data:s.data}}async function Ar(t,e,n){await this.db.setEntryData(t,e,Wr,{...n,allowDeletionEntryData:!0})}async function Sr(t,e,n){ln("publicKey",t,"parameter"),Nt("dataKey",e,"parameter"),jt("customOptions",n,"parameter",Yr);const r={...Yr,...this.customOptions,...n},o=re(r,Ge),i=await Cr(this,t,e,o);if(null===i)return{data:null,dataLink:null};const{rawDataLink:a,dataLink:s}=Br(i.data,!1);if(co(a,r.cachedDataLink))return{data:null,dataLink:s};const c={...re(r,un),responseType:"arraybuffer"},{data:l}=await this.getFileContent(s,c);return{data:new Uint8Array(l),dataLink:s}}async function Pr(t,e,n,r,o){const i={...Ge,...t.customOptions,...o};return{dataKey:n,data:r,revision:Rr((await t.registry.getEntry(e,n,i)).entry)}}async function Or(t,e,n,r,o){const i={...Gr,...t.customOptions,...o},a={_data:r,_v:2};let s=n;i.hashedDataKeyHex||(s=te(Gt(n)));const c=new File([JSON.stringify(a)],`dk:${s}`,{type:"application/json"}),l=re(i,Ne),u=t.uploadFile(c,l),h=re(i,Ge),f=t.registry.getEntry(e,n,h),[p,d]=await Promise.all([f,u]),y=Rr(p.entry),m=Yt(d.skylink,bt),g=me(m);return zt("data",g,"skylink byte array",Ae),[{dataKey:n,data:g,revision:y},Le(m)]}function Rr(t){let e;if(e=null===t?BigInt(0):t.revision+BigInt(1),e>pe)throw new Error("Current entry already has maximum allowed revision, could not update the entry");return e}async function Cr(t,e,n,r){const{entry:o}=await t.registry.getEntry(e,n,r);return null===o||zn(o.data,Se)?null:o}function Br(t,e){let n="";return e&&t.length===Ue?n=Xt(t):t.length===Ae?n=ge(t):Kt("entry.data",t,"returned entry data","length 34 bytes"),{rawDataLink:n,dataLink:Le(n)}}async function Lr(t,e){Nt("path",t,"parameter"),jt("customOptions",e,"parameter",Yr);const n={...Yr,...this.connector.client.customOptions,...e},r=await this.userID(),o=Mn(t);return n.hashedDataKeyHex=!0,await this.connector.client.db.getJSON(r,o,n)}async function Dr(t){return Nt("path",t,"parameter"),rn(await this.userID(),Mn(t),{...Ge,hashedDataKeyHex:!0})}async function Ir(t,e,n){Nt("path",t,"parameter"),It("json",e,"parameter"),jt("customOptions",n,"parameter",Gr);const r={...Gr,...this.connector.client.customOptions,...n},o=await this.userID(),i=Mn(t);r.hashedDataKeyHex=!0;const[a,s]=await Or(this.connector.client,o,i,e,r),c=await this.signRegistryEntry(a,t),l=re(r,Xe);return await this.connector.client.registry.postSignedEntry(o,a,c,l),{data:e,dataLink:s}}async function jr(t,e){const n={...Xr,...this.connector.client.customOptions,...e};await this.setEntryData(t,Wr,{...n,allowDeletionEntryData:!0})}async function Tr(t,e,n){const r=Be(Ft("dataLink",e,"parameter"));await this.setEntryData(t,r,n)}async function Fr(t,e){Nt("path",t,"parameter"),jt("customOptions",e,"parameter",Ge);const n={...Ge,...this.connector.client.customOptions,...e},r=await this.userID(),o=Mn(t);return n.hashedDataKeyHex=!0,await this.connector.client.db.getEntryData(r,o,n)}async function Nr(t,e,n){Nt("path",t,"parameter"),qt("data",e,"parameter"),jt("customOptions",n,"parameter",Xr);const r={...Xr,...this.connector.client.customOptions,...n};lo(e,r.allowDeletionEntryData);const o=await this.userID(),i=Mn(t);r.hashedDataKeyHex=!0;const a=re(r,Ge),s=await Pr(this.connector.client,o,i,e,a),c=await this.signRegistryEntry(s,t),l=re(r,Xe);return await this.connector.client.registry.postSignedEntry(o,s,c,l),{data:s.data}}async function Mr(t,e){await this.setEntryData(t,Wr,{...e,allowDeletionEntryData:!0})}async function Hr(t,e){Nt("path",t,"parameter"),jt("customOptions",e,"parameter",Yr);const n={...Yr,...this.connector.client.customOptions,...e,hashedDataKeyHex:!0},[r,o]=await Promise.all([this.userID(),this.getEncryptedPathSeed(t,!1)]),i=Tn(o),{data:a}=await this.connector.client.db.getRawBytes(r,i,n);return null===a?{data:null}:{data:Dn(a,jn(o))}}async function qr(t,e,n){Nt("path",t,"parameter"),It("json",e,"parameter"),jt("customOptions",n,"parameter",Gr);const r={...Gr,...this.connector.client.customOptions,...n},[o,i]=await Promise.all([this.userID(),this.getEncryptedPathSeed(t,!1)]),a=Tn(i);r.hashedDataKeyHex=!0;const s=In(e,{version:1},jn(i)),c=await async function(t,e,n,r,o){const i={...Gr,...t.customOptions,...o};let a=n;i.hashedDataKeyHex||(a=te(Gt(n)));const s=new File([r],`dk:${a}`,{type:"application/octet-stream"}),c=re(i,Ne),l=t.uploadFile(s,c),u=re(i,Ge),h=t.registry.getEntry(e,n,u),[f,p]=await Promise.all([h,l]),d=Rr(f.entry),y=me(Yt(p.skylink,bt));return zt("rawDataLink",y,"skylink byte array",Ae),{dataKey:n,data:y,revision:d}}(this.connector.client,o,a,s,r),l=await this.signEncryptedRegistryEntry(c,t),u=re(r,Xe);return await this.connector.client.registry.postSignedEntry(o,c,l,u),{data:e}}const[zr,Kr]=[640,750];async function $r(t,e){return await Jr.New(this,t,e)}class Jr{constructor(t,e,n,r){if(this.connector=t,this.hostDomain=n,this.skappIsOnPortal=r,this.dacs=[],this.grantedPermissions=[],this.getJSON=Lr,this.getEntryLink=Dr,this.setJSON=Ir,this.deleteJSON=jr,this.setDataLink=Tr,this.getEntryData=Fr,this.setEntryData=Nr,this.deleteEntryData=Mr,this.getJSONEncrypted=Hr,this.setJSONEncrypted=qr,this.dbV2={getJSON:ur.bind(this),getEntryLink:hr.bind(this),setJSON:fr.bind(this),deleteJSON:pr.bind(this),setDataLink:dr.bind(this),getEntryData:yr.bind(this),setEntryData:mr.bind(this),deleteEntryData:gr.bind(this),getJSONEncrypted:wr.bind(this),setJSONEncrypted:vr.bind(this)},Jr.instance)throw new Error("Trying to create a second MySky instance");this.pendingPermissions=e}static async New(t,e,n){const o={...ar,...n};if(Jr.instance)return Jr.instance;let i="skynet-mysky.hns";if(o.alpha&&o.dev)throw new Error("Cannot redirect to both Alpha MySky Domain and Dev MySky Domain. Please pass either the 'dev' or the 'alpha' option, not both.");o.alpha?i="sandbridge.hns":o.dev&&(i="skynet-mysky-dev.hns");const a=await sr.init(t,i,n);let s,c=!1;if("localhost"===window.location.hostname)s="localhost";else{const e=new Po(window.location.hostname,t.customOptions);try{e.customPortalUrl=await e.resolvePortalUrl(),c=!0}catch(t){c=!1}s=c?await e.extractDomain(window.location.hostname):Jt(window.location.hostname)}const l=[];if(e){const t=new r.Permission(s,e,r.PermCategory.Discoverable,r.PermType.Write),n=new r.Permission(s,e,r.PermCategory.Hidden,r.PermType.Read),o=new r.Permission(s,e,r.PermCategory.Hidden,r.PermType.Write);l.push(t,n,o)}return Jr.instance=new Jr(a,l,s,c),Jr.instance}static async isBrowserSupported(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?[!1,"MySky is currently not supported in Safari browsers."]:[!0,""]}async loadDacs(...t){const e=[];for(const n of t)e.push(this.loadDac(n));this.dacs.push(...t),await Promise.all(e)}async addPermissions(...t){this.pendingPermissions.push(...t)}async checkLogin(){const[t,e]=await this.connector.connection.remoteHandle().call("checkLogin",this.pendingPermissions),{grantedPermissions:n,failedPermissions:r}=e;this.grantedPermissions=n,this.pendingPermissions=r;const o=t&&0===r.length;return o&&await this.handleLogin(),o}async destroy(){this.connector.connection.close();const t=this.connector.childFrame;if(t){if(!t.parentNode)throw new Error("'childFrame.parentNode' was not set");t.parentNode.removeChild(t)}}async logout(){await this.connector.connection.remoteHandle().call("logout"),this.connector.client.customOptions.loginFn=void 0}async requestLoginAccess(){let t,e,n=!1;const{promise:o,controller:i}=(0,r.monitorWindowError)(),a=new Promise((async(i,a)=>{o.catch((t=>{t!==r.errorWindowClosed?a(t):i()}));try{t=this.launchUI(),e=await this.connectUi(t);const[r,o]=await e.remoteHandle().call("requestLoginAccess",this.pendingPermissions);n=r;const{grantedPermissions:a,failedPermissions:s}=o;this.grantedPermissions=a,this.pendingPermissions=s,i()}catch(t){a(t)}}));await a.catch((t=>{throw t})).finally((()=>{t&&t.close(),e&&e.close(),i.cleanup()}));const s=n&&0===this.pendingPermissions.length;return s&&await this.handleLogin(),s}async userID(){return await this.connector.connection.remoteHandle().call("userID")}async getEncryptedFileSeed(t,e){return await this.getEncryptedPathSeed(t,e)}async getEncryptedPathSeed(t,e){var n;return Nt("path",t,"parameter"),"isDirectory","parameter","boolean"!=typeof(n=e)&&Kt("isDirectory",n,"parameter","type 'boolean'"),await this.connector.connection.remoteHandle().call("getEncryptedFileSeed",t,e)}async signMessage(t){return await this.connector.connection.remoteHandle().call("signMessage",t)}async verifyMessageSignature(t,e,n){return await this.connector.connection.remoteHandle().call("verifyMessageSignature",t,e,n)}async catchError(t){const e=new CustomEvent(r.dispatchedErrorEvent,{detail:t});window.dispatchEvent(e)}async checkPortalLogin(){return await this.connector.connection.remoteHandle().call("checkPortalLogin")}launchUI(){const t=new URL(this.connector.url);t.pathname="ui.html";const e=t.toString(),n=function(t,e,n,r){if(!window.top)throw new Error("Current window is not valid");t=kt(t);const o=window.top.outerHeight/2+window.top.screenY-r/2,i=window.top.outerWidth/2+window.top.screenX-n/2,a=window.open(t,"MySky UI",`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, copyhistory=no, width=${n}, height=${r}, top=${o}, left=${i}`);if(!a)throw new Error("Could not open window");return a.focus&&a.focus(),a}(e,0,zr,Kr);if(!n)throw new Error(`Could not open window at '${e}'`);return n}async connectUi(t){const e=this.connector.options,n=new ir({localWindow:window,remoteWindow:t,remoteOrigin:"*"}),r={catchError:this.catchError};return await or(n,r,e.handshakeMaxAttempts,e.handshakeAttemptsInterval)}async getPreferredPortal(){return await this.connector.connection.remoteHandle().call("getPreferredPortal")}async loadDac(t){await t.init(this.connector.client,this.connector.options);const e=t.getPermissions();await this.addPermissions(...e)}async handleLogin(){await Promise.allSettled(this.dacs.map((async t=>{try{await t.onUserLogin()}catch(t){console.warn(t)}})))}async portalLogin(){return await this.connector.connection.remoteHandle().call("portalLogin")}async redirectIfNotOnPreferredPortal(){if("localhost"===this.hostDomain)return;const t=window.location.hostname,e=await this.getPreferredPortal();null!==e&&(this.skappIsOnPortal&&function(t,e){return t=Jt(t.replace(/https:\/\/|http:\/\//i,"")),e=Jt(e.replace(/https:\/\/|http:\/\//i,"")),!t.endsWith(e)}(t,e)?await this.redirectToPreferredPortalUrl(e):this.connector.client=new Po(e,this.connector.client.customOptions))}async redirectToPreferredPortalUrl(t){const e=await async function(t,e){return Ut(e,t)}(this.hostDomain,t),n=new Po(e,this.connector.client.customOptions);var r;await n.portalUrl()&&(r=e,window.location.replace(r))}async signRegistryEntry(t,e){return await this.connector.connection.remoteHandle().call("signRegistryEntry",t,e)}async signEncryptedRegistryEntry(t,e){return await this.connector.connection.remoteHandle().call("signEncryptedRegistryEntry",t,e)}}Jr.instance=null;const Wr=new Uint8Array(Ae),Vr=BigInt(-1),Yr={...ne,...Ge,...un,cachedDataLink:void 0},Gr={...ne,...Ne,...Yr,...Xe},Xr={...ne,...Ge,...Xe,allowDeletionEntryData:!1};async function Zr(t,e,n){ln("publicKey",t,"parameter"),Nt("dataKey",e,"parameter"),jt("customOptions",n,"parameter",Yr);const r={...Yr,...this.customOptions,...n};return await this.dbV2.revisionNumberCache.withCachedEntryLock(t,e,(async n=>{const o=re(r,Ge),i=await uo(this,t,e,n,o);if(null===i)return{data:null,dataLink:null};const{rawDataLink:a,dataLink:s}=ho(i.data,!0);if(co(a,r.cachedDataLink))return{data:null,dataLink:s};const c=re(r,un),{data:l}=await this.getFileContent(s,c);if("object"!=typeof l||null===l)throw new Error(`File data for the entry at data key '${e}' is not JSON.`);if(!l._data||!l._v)return{data:l,dataLink:s};const u=l._data;if("object"!=typeof u||null===l)throw new Error(`File data '_data' for the entry at data key '${e}' is not JSON.`);return{data:u,dataLink:s}}))}async function Qr(t,e,n,r){Ht("privateKey",t,"parameter"),Nt("dataKey",e,"parameter"),It("json",n,"parameter"),jt("customOptions",r,"parameter",Gr);const o={...Gr,...this.customOptions,...r},{publicKey:i}=se.sign.keyPair.fromSecretKey(Zt(t)),a=te(i);return await this.dbV2.revisionNumberCache.withCachedEntryLock(a,e,(async r=>{const i=so(r.revision),[a,s]=await ao(this,e,n,i,o),c=re(o,Xe);return await this.registry.setEntry(t,a,c),r.revision=i,{data:n,dataLink:Le(s)}}))}async function to(t,e,n){const r={...Xr,...this.customOptions,...n};await this.dbV2.setEntryData(t,e,Wr,{...r,allowDeletionEntryData:!0})}async function eo(t,e,n,r){const o=Be(Ft("dataLink",n,"parameter"));await this.dbV2.setEntryData(t,e,o,r)}async function no(t,e,n){ln("publicKey",t,"parameter"),Nt("dataKey",e,"parameter"),jt("customOptions",n,"parameter",Ge);const r={...Ge,...this.customOptions,...n};return await this.dbV2.revisionNumberCache.withCachedEntryLock(t,e,(async n=>{const o=await uo(this,t,e,n,r);return null===o?{data:null}:{data:o.data}}))}async function ro(t,e,n,r){Ht("privateKey",t,"parameter"),Nt("dataKey",e,"parameter"),qt("data",n,"parameter"),jt("customOptions",r,"parameter",Xr);const o={...Xr,...this.customOptions,...r};lo(n,o.allowDeletionEntryData);const{publicKey:i}=se.sign.keyPair.fromSecretKey(Zt(t)),a=te(i);return await this.dbV2.revisionNumberCache.withCachedEntryLock(a,e,(async r=>{const i=so(r.revision),a={dataKey:e,data:n,revision:i},s=re(o,Xe);return await this.registry.setEntry(t,a,s),r.revision=i,{data:a.data}}))}async function oo(t,e,n){await this.dbV2.setEntryData(t,e,Wr,{...n,allowDeletionEntryData:!0})}async function io(t,e,n){ln("publicKey",t,"parameter"),Nt("dataKey",e,"parameter"),jt("customOptions",n,"parameter",Yr);const r={...Yr,...this.customOptions,...n};return await this.dbV2.revisionNumberCache.withCachedEntryLock(t,e,(async n=>{const o=re(r,Ge),i=await uo(this,t,e,n,o);if(null===i)return{data:null,dataLink:null};const{rawDataLink:a,dataLink:s}=ho(i.data,!1);if(co(a,r.cachedDataLink))return{data:null,dataLink:s};const c={...re(r,un),responseType:"arraybuffer"},{data:l}=await this.getFileContent(s,c);return{data:new Uint8Array(l),dataLink:s}}))}async function ao(t,e,n,r,o){const i={...Gr,...t.customOptions,...o};let a;if(n instanceof Uint8Array)a=n;else{const t=function(t){return{_data:t,_v:2}}(n);a=JSON.stringify(t)}let s=e;i.hashedDataKeyHex||(s=te(Gt(e)));const c=new File([a],`dk:${s}`,{type:"application/json"}),l=re(i,Ne),u=Yt((await t.uploadFile(c,l)).skylink,bt),h=me(u);return zt("rawDataLink",h,"skylink byte array",Ae),[{dataKey:e,data:h,revision:r},Le(u)]}function so(t){if((t+=BigInt(1))>pe)throw new Error("Current entry already has maximum allowed revision, could not update the entry");return t}function co(t,e){return!!e&&t===Ft("cachedDataLink",e,"optional parameter")}function lo(t,e){if(t.length>70&&Kt("data",t,"parameter",`'Uint8Array' of length <= 70, was length ${t.length}`),!e&&zn(t,Wr))throw new Error("Tried to set 'Uint8Array' entry data that is the deletion sentinel ('Uint8Array(RAW_SKYLINK_SIZE)'), please use the 'deleteEntryData' method instead`")}async function uo(t,e,n,r,o){var i;const{entry:a}=await t.registry.getEntry(e,n,o);if(null===a)return null;const s=null!==(i=null==a?void 0:a.revision)&&void 0!==i?i:Vr+BigInt(1),c=r.revision;if(c&&c>s)throw new Error("Returned revision number too low. A higher revision number for this userID and path is already cached");return r.revision=s,function(t){return zn(t.data,Se)}(a)?null:a}function ho(t,e){let n="";return e&&t.length===Ue?n=Xt(t):t.length===Ae?n=ge(t):Kt("entry.data",t,"returned entry data","length 34 bytes"),{rawDataLink:n,dataLink:Le(n)}}async function fo(t,e,n){Nt("userID",t,"parameter"),Nt("path",e,"parameter"),jt("customOptions",n,"parameter",Yr);const r={...Yr,...this.customOptions,...n},o=Mn(e);return r.hashedDataKeyHex=!0,await this.dbV2.getJSON(t,o,r)}async function po(t,e){return Nt("userID",t,"parameter"),Nt("path",e,"parameter"),rn(t,Mn(e),{...Ge,hashedDataKeyHex:!0})}async function yo(t,e,n){Nt("userID",t,"parameter"),Nt("path",e,"parameter"),jt("customOptions",n,"parameter",Ge);const r={...Ge,...this.customOptions,...n},o=Mn(e);return r.hashedDataKeyHex=!0,await this.dbV2.getEntryData(t,o,r)}async function mo(t,e,n){Nt("userID",t,"parameter"),Nt("pathSeed",e,"parameter"),jt("customOptions",n,"parameter",Yr);const r={...Yr,...this.customOptions,...n,hashedDataKeyHex:!0},o=jn(e),i=Tn(e),{data:a}=await this.dbV2.getRawBytes(t,i,r);return null===a?{data:null}:{data:Dn(a,o)}}const go={...ne,endpointPin:"/skynet/pin"};async function wo(t,e){const n=Ft("skylinkUrl",t,"parameter"),r={...go,...this.customOptions,...e};if(Bt(t,{onlyPath:!0}))throw new Error("Skylink string should not contain a path");const o=await this.executeRequest({...r,endpointPath:r.endpointPin,method:"post",extraPath:n});!function(t){try{if(!t.headers)throw new Error("response.headers field missing");Nt('response.headers["skynet-skylink"]',t.headers["skynet-skylink"],"pin response field")}catch(t){throw new Error(`Did not get a complete pin response despite a successful request. Please try again and report this issue to the devs if it persists. ${t}`)}}(o);let i=o.headers["skynet-skylink"];return i=Le(i),{skylink:i}}const vo=new Error("timeout while waiting for mutex to become available"),bo=new Error("mutex already locked"),Eo=new Error("request for lock canceled");var xo=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))};class ko{constructor(t,e=Eo){if(this._maxConcurrency=t,this._cancelError=e,this._queue=[],this._waiters=[],t<=0)throw new Error("semaphore must be initialized to a positive value");this._value=t}acquire(){const t=this.isLocked(),e=new Promise(((t,e)=>this._queue.push({resolve:t,reject:e})));return t||this._dispatch(),e}runExclusive(t){return xo(this,void 0,void 0,(function*(){const[e,n]=yield this.acquire();try{return yield t(e)}finally{n()}}))}waitForUnlock(){return xo(this,void 0,void 0,(function*(){return this.isLocked()?new Promise((t=>this._waiters.push({resolve:t}))):Promise.resolve()}))}isLocked(){return this._value<=0}release(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){const t=this._currentReleaser;this._currentReleaser=void 0,t()}}cancel(){this._queue.forEach((t=>t.reject(this._cancelError))),this._queue=[]}_dispatch(){const t=this._queue.shift();if(!t)return;let e=!1;this._currentReleaser=()=>{e||(e=!0,this._value++,this._resolveWaiters(),this._dispatch())},t.resolve([this._value--,this._currentReleaser])}_resolveWaiters(){this._waiters.forEach((t=>t.resolve())),this._waiters=[]}}class _o{constructor(t){this._semaphore=new ko(1,t)}acquire(){return t=this,e=void 0,r=function*(){const[,t]=yield this._semaphore.acquire();return t},new((n=void 0)||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}));var t,e,n,r}runExclusive(t){return this._semaphore.runExclusive((()=>t()))}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.release()}cancel(){return this._semaphore.cancel()}}var Uo=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))};class Ao{constructor(){this.mutex=new _o,this.cache={}}static getCacheKey(t,e){return`${t}/${e}`}async getRevisionAndMutexForEntry(t,e){const n=Ao.getCacheKey(t,e);return await this.mutex.runExclusive((async()=>(this.cache[n]||(this.cache[n]=new So),this.cache[n])))}async withCachedEntryLock(t,e,n){const r=await this.getRevisionAndMutexForEntry(t,e);try{return await function(t,e=bo){return function(t,e,n=vo){return{acquire:()=>new Promise(((r,o)=>Uo(this,void 0,void 0,(function*(){let i=!1;const a=setTimeout((()=>{i=!0,o(n)}),e);try{const e=yield t.acquire();i?(Array.isArray(e)?e[1]:e)():(clearTimeout(a),r(e))}catch(t){i||(clearTimeout(a),o(t))}})))),runExclusive(t){return Uo(this,void 0,void 0,(function*(){let e=()=>{};try{const n=yield this.acquire();return Array.isArray(n)?(e=n[1],yield t(n[0])):(e=n,yield t())}finally{e()}}))},release(){t.release()},cancel:()=>t.cancel(),waitForUnlock:()=>t.waitForUnlock(),isLocked:()=>t.isLocked()}}(t,0,e)}(r.mutex).runExclusive((async()=>n(r)))}catch(n){throw n.message.includes("mutex already locked")?new Error(`Concurrent access prevented in SkyDB for entry { publicKey: ${t}, dataKey: ${e} }`):n}}}class So{constructor(){this.mutex=new _o,this.revision=BigInt(-1)}}e().interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(je.From(t))}));class Po{constructor(t="",e={}){this.uploadFile=Me,this.uploadSmallFile=He,this.uploadSmallFileRequest=qe,this.uploadLargeFile=ze,this.uploadLargeFileRequest=Ke,this.uploadDirectory=$e,this.uploadDirectoryRequest=Je,this.downloadFile=dn,this.downloadFileHns=yn,this.getSkylinkUrl=mn,this.getHnsUrl=gn,this.getHnsresUrl=wn,this.getMetadata=vn,this.getFileContent=bn,this.getFileContentBinary=En,this.getFileContentRequest=xn,this.getFileContentHns=kn,this.getFileContentBinaryHns=_n,this.openFile=Un,this.openFileHns=An,this.resolveHns=Sn,this.pinSkylink=wo,this.extractDomain=lr,this.getFullDomainUrl=cr,this.loadMySky=$r,this.file={getJSON:fo.bind(this),getEntryData:yo.bind(this),getEntryLink:po.bind(this),getJSONEncrypted:mo.bind(this)},this.db={getJSON:br.bind(this),setJSON:Er.bind(this),deleteJSON:xr.bind(this),getRawBytes:Sr.bind(this),setDataLink:kr.bind(this),getEntryData:_r.bind(this),setEntryData:Ur.bind(this),deleteEntryData:Ar.bind(this)},this.dbV2={getJSON:Zr.bind(this),setJSON:Qr.bind(this),deleteJSON:to.bind(this),getRawBytes:io.bind(this),setDataLink:eo.bind(this),getEntryData:no.bind(this),setEntryData:ro.bind(this),deleteEntryData:oo.bind(this),revisionNumberCache:new Ao},this.registry={getEntry:en.bind(this),getEntryUrl:nn.bind(this),getEntryLink:on.bind(this),setEntry:an.bind(this),postSignedEntry:sn.bind(this)},""===t?t="undefined"==typeof window?"/":window.location.origin:this.customPortalUrl=(0,r.ensureUrl)(t),this.initialPortalUrl=t,this.customOptions=e}async initPortalUrl(){if(!this.customPortalUrl){if(Po.resolvedPortalUrl)try{await Po.resolvedPortalUrl}catch(t){Po.resolvedPortalUrl=this.resolvePortalUrl()}else Po.resolvedPortalUrl=this.resolvePortalUrl();await Po.resolvedPortalUrl}}async portalUrl(){return this.customPortalUrl?this.customPortalUrl:(await this.initPortalUrl(),await Po.resolvedPortalUrl)}async executeRequest(t){const n=await Ie(this,{baseUrl:t.url,endpointPath:t.endpointPath,subdomain:t.subdomain,extraPath:t.extraPath,query:t.query}),r=De(t.headers,t.customUserAgent,t.customCookie,t.skynetApiKey),o=t.APIKey?{username:"",password:t.APIKey}:void 0;let i,a;t.onDownloadProgress&&(i=function(e){const n=e.total?e.loaded/e.total:1;t.onDownloadProgress(n,e)}),t.onUploadProgress&&(a=function(e){const n=e.total?e.loaded/e.total:1;t.onUploadProgress(n,e)});try{return await e()({url:n,method:t.method,data:t.data,headers:r,auth:o,onDownloadProgress:i,onUploadProgress:a,responseType:t.responseType,transformRequest:t.transformRequest,transformResponse:t.transformResponse,maxContentLength:1/0,maxBodyLength:1/0,withCredentials:!0})}catch(e){if(t.loginFn&&401===e.responseStatus)return await t.loginFn(t),await this.executeRequest({...t,loginFn:void 0});throw e}}async resolvePortalServerUrl(){const t=await this.executeRequest({...this.customOptions,method:"head",url:this.initialPortalUrl});if(!t.headers)throw new Error("Did not get 'headers' in response despite a successful request. Please try again and report this issue to the devs if it persists.");const e=t.headers["skynet-server-api"];if(!e)throw new Error("Could not get server portal URL for the given portal");return e}async resolvePortalUrl(){const t=await this.executeRequest({...this.customOptions,method:"head",url:this.initialPortalUrl});if(!t.headers)throw new Error("Did not get 'headers' in response despite a successful request. Please try again and report this issue to the devs if it persists.");const e=t.headers["skynet-portal-api"];if(!e)throw new Error("Could not get portal URL for the given portal");return e}}new Po}()}();